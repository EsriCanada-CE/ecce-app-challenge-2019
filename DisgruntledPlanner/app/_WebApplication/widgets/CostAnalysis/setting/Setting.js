// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/CostAnalysis/setting/GeneralSettings":function(){define("dojo/_base/declare jimu/BaseWidget dijit/_WidgetsInTemplateMixin dojo/text!./GeneralSettings.html dojo/_base/lang dojo/on dojo/dom-attr dojo/dom-class".split(" "),function(w,v,x,r,f,l,h,c){return w([v,x],{templateString:r,baseClass:"jimu-widget-cost-analysis-general-settings",constructor:function(c){f.mixin(this,c)},postMixInProperties:function(){this.nls.common={};f.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this.inherited(arguments);
this._init()},_init:function(){this._setConfig();this._attachNodeEvents();this.currencyInputNode.validator=f.hitch(this,this._currencyValidator);this.bufferDistanceInputNode.validator=f.hitch(this,this._bufferDistanceValidator)},_setConfig:function(){this.measurementUnitInputNode.set("value",this.config.generalSettings.measurementUnit);this.currencyInputNode.set("value",this.config.generalSettings.currency);this.roundCostInputNode.set("value",this.config.generalSettings.roundCostType);this.projectAreaTypeInputNode.set("value",
this.config.generalSettings.projectAreaType);this.bufferDistanceInputNode.set("value",this.config.generalSettings.bufferDistance)},validate:function(){var c;c=this.projectAreaTypeInputNode.get("value");return this.currencyInputNode.validate()?"buffer"!==c||this.bufferDistanceInputNode.validate()?{isValid:!0}:{isValid:!1,errorMessage:this.nls.generalSettings.errorMessages.bufferDistance}:{isValid:!1,errorMessage:this.nls.generalSettings.errorMessages.currency}},getConfig:function(){return{measurementUnit:this.measurementUnitInputNode.get("value"),
currency:this.currencyInputNode.get("value"),roundCostType:this.roundCostInputNode.get("value"),projectAreaType:this.projectAreaTypeInputNode.get("value"),bufferDistance:this.bufferDistanceInputNode.get("value")}},_attachNodeEvents:function(){this.own(l(this.measurementUnitInputNode,"change",f.hitch(this,function(c){h.set(this.bufferDistanceUnit,"innerHTML",this.nls.units[c].label)})));this.own(l(this.projectAreaTypeInputNode,"change",f.hitch(this,function(p){"outline"===p?(this.bufferDistanceInputNode.textbox.value=
"5",this.bufferDistanceInputNode.set("disabled",!0),c.add(this.projectSettingsOutputRightContainerNode,"esriCTHidden")):(this.bufferDistanceInputNode.set("disabled",!1),c.remove(this.projectSettingsOutputRightContainerNode,"esriCTHidden"))})))},_currencyValidator:function(c){return c.match(/^([^0-9]+)$/)?!0:(this.currencyInputNode.invalidMessage=this.nls.generalSettings.errorMessages.currency,!1)},_bufferDistanceValidator:function(c){return 0>c||100<c?(this.bufferDistanceInputNode.invalidMessage=
this.nls.generalSettings.errorMessages.outOfRangebufferDistance,!1):c.match(/^([0-9]*[1-9][0-9]*(\.[0-9]+)?|[0]+\.[0-9]*[1-9][0-9]*)$/)?!0:(this.bufferDistanceInputNode.invalidMessage=this.nls.generalSettings.errorMessages.bufferDistance,!1)}})})},"widgets/CostAnalysis/setting/ProjectSettings":function(){define("dojo/_base/declare jimu/BaseWidget dijit/_WidgetsInTemplateMixin dojo/text!./ProjectSettings.html dojo/_base/lang dojo/on dojo/_base/array dojo/Evented dojo/string esri/layers/FeatureLayer dojo/promise/all dojo/Deferred jimu/dijit/CheckBox".split(" "),
function(w,v,x,r,f,l,h,c,p,g,t,m){return w([v,x,c],{baseClass:"jimu-widget-cost-analysis-project-settings",templateString:r,_configuredFieldsTable:null,_prevCostingGeometryLayerValue:"",_prevProjectLayerValue:"",_prevPointLayerCentroidValue:"",_prevProjectAssetsTableValue:"",_prevProjectMultiplierTableValue:"",_defaultSelectOption:{},_assetsTableRequiredFields:{},_multiplierTableRequiredFields:{},constructor:function(a){f.mixin(this,a)},postMixInProperties:function(){this.nls.common={};f.mixin(this.nls.common,
window.jimuNls.common)},postCreate:function(){this._configuredFieldsTable=null;this._prevProjectMultiplierTableValue=this._prevProjectAssetsTableValue=this._prevPointLayerCentroidValue=this._prevProjectLayerValue=this._prevCostingGeometryLayerValue="";this.own(l(this.costingGeometryHelp,"click",f.hitch(this,function(){this.appUtils.showMessage(this.nls.projectSettings.costingGeometryHelp)})));this.own(l(this.fieldToLabelGeographyHelp,"click",f.hitch(this,function(){this.appUtils.showMessage(this.nls.projectSettings.fieldToLabelGeographyHelp)})));
this.own(l(this.projectAssetsTableHelp,"click",f.hitch(this,function(){this.appUtils.showMessage(this.nls.projectSettings.projectAssetsTableHelp)})));this.own(l(this.projectMultiplierTableHelp,"click",f.hitch(this,function(){this.appUtils.showMessage(this.nls.projectSettings.projectMultiplierTableHelp)})));this.own(l(this.projectLayerHelp,"click",f.hitch(this,function(){this.appUtils.showMessage(this.nls.projectSettings.projectLayerHelp)})));this.own(l(this.pointLayerCentroidHelp,"click",f.hitch(this,
function(){this.appUtils.showMessage(this.nls.projectSettings.pointLayerHintText)})));this._assetsTableRequiredFields={ASSETGUID:["esriFieldTypeGUID"],COSTEQUATION:["esriFieldTypeString"],SCENARIO:["esriFieldTypeString"],TEMPLATENAME:["esriFieldTypeString"],GEOGRAPHYGUID:["esriFieldTypeGUID"],PROJECTGUID:["esriFieldTypeGUID"]};this._multiplierTableRequiredFields={DESCRIPTION:["esriFieldTypeString"],TYPE:["esriFieldTypeString"],VALUE:["esriFieldTypeDouble","esriFieldTypeSingle"],COSTINDEX:["esriFieldTypeSmallInteger",
"esriFieldTypeInteger"],PROJECTGUID:["esriFieldTypeGUID"]};this._defaultSelectOption={value:"",label:this.nls.projectSettings.selectLabel};this.inherited(arguments);this._init()},getConfig:function(){return{costingGeometryLayer:this._prevCostingGeometryLayerValue,geographyField:this.fieldToLabelGeography.value,assetTable:this._prevProjectAssetsTableValue,multiplierAdditionalCostTable:this._prevProjectMultiplierTableValue,projectLayer:this._prevProjectLayerValue,pointLayerCentroid:this._prevPointLayerCentroidValue}},
validate:function(){var a,b;a=!0;b="";""===this._prevProjectAssetsTableValue&&""===this._prevProjectMultiplierTableValue&&""===this._prevProjectLayerValue||""!==this._prevProjectAssetsTableValue&&""!==this._prevProjectMultiplierTableValue&&""!==this._prevProjectLayerValue||(b=[],""===this._prevProjectAssetsTableValue&&b.push(this.nls.projectSettings.projectAssetsTableLabel),""===this._prevProjectMultiplierTableValue&&b.push(this.nls.projectSettings.projectMultiplierTableLabel),""===this._prevProjectLayerValue&&
b.push(this.nls.projectSettings.projectLayerLabel),b=b.join(" and "),a=!1,b=p.substitute(this.nls.projectSettings.errorMessages.invalidConfiguration,{fieldsString:f.trim(b)}));return{isValid:a,errorMessage:b}},_init:function(){var a,b,d;a=[];b=[];d=[];this.map&&this.map.itemInfo&&this.map.itemInfo.itemData&&(this.map.itemInfo.itemData.operationalLayers&&0<this.map.itemInfo.itemData.operationalLayers.length&&(a=this.map.itemInfo.itemData.operationalLayers),this.map.itemInfo.itemData.tables&&0<this.map.itemInfo.itemData.tables.length&&
(b=this.map.itemInfo.itemData.tables));this._filterValidLayersForDropDown(a);this._populatePointLayerDropdown(a);h.forEach(b,f.hitch(this,function(a){var b=new m;d.push(b);a=new g(a.url);l(a,"load",f.hitch(this,function(a){h.forEach(this.map.itemInfo.itemData.tables,f.hitch(this,function(e){if(e.url===a.layer.url)return a.layer.id=e.id,a.layer.title=e.title,!0}));b.resolve(a.layer)}));l(a,"error",f.hitch(this,function(){b.resolve(null)}))}));t(d).then(f.hitch(this,function(a){this._populateTablesForDropDown(a)}));
l(this.fieldToLabelGeography,"change",f.hitch(this,function(a){this.emit("onGeographyFieldChange",a,this.costingGeometryLayerDropDown.getValue())}));this._attachingEvents();this._setConfig()},_filterValidLayersForDropDown:function(a){var b,d;b=[this._defaultSelectOption];d=[this._defaultSelectOption];this._costingGeometryLayerFieldOptions={defaultSelectOption:{options:[this._defaultSelectOption]}};a=a&&0<a.length?this._getLayerOptions(a,b,d):{costingGeometryLayerOptions:b,projectLayerOptions:d};this.costingGeometryLayerDropDown.set("options",
f.clone(a.costingGeometryLayerOptions));this.projectLayerDropDown.set("options",f.clone(a.projectLayerOptions))},_getLayerOptions:function(a,b,d){var k;h.forEach(a,f.hitch(this,function(a){if(a.layerObject&&a.layerObject.capabilities)k=a.layerObject.capabilities;else return!0;"esriGeometryPolygon"===a.layerObject.geometryType&&-1<k.indexOf("Query")&&this._hasGlobalIDField(a)&&(b.push({value:a.id,label:a.title}),"ArcGISFeatureLayer"===a.layerType&&(-1<k.indexOf("Editing")||-1<k.indexOf("Update"))&&
-1<k.indexOf("Create")&&-1<k.indexOf("Delete")&&this._isValidProjectLayer(a)&&d.push({value:a.id,label:a.title}))}));return{costingGeometryLayerOptions:b,projectLayerOptions:d}},_isValidProjectLayer:function(a){var b,d,k,u,c;u=["esriFieldTypeDouble","esriFieldTypeSingle"];a=a.layerObject.fields;k=[];for(b in a)c=a[b].type,d=a[b].name.toUpperCase(),("PROJECTNAME"===d&&"esriFieldTypeString"===c||"DESCRIPTION"===d&&"esriFieldTypeString"===c||"TOTALASSETCOST"===d&&-1<u.indexOf(c)||"GROSSPROJECTCOST"===
d&&-1<u.indexOf(c)||"esriFieldTypeGlobalID"===c)&&k.push(d);return 5===k.length?!0:!1},_hasGlobalIDField:function(a){var b;b=!1;(a=a.layerObject.fields||a.fields)&&0<a.length&&h.some(a,f.hitch(this,function(a){if("esriFieldTypeGlobalID"===a.type)return b=!0}));return b},_populateTablesForDropDown:function(a){var b,d;b=[this._defaultSelectOption];d=[this._defaultSelectOption];a&&0<a.length&&h.forEach(a,f.hitch(this,function(a){a&&this._isValidTable(a,"projectAssets")&&b.push({value:a.id||a.name,label:a.title||
a.name});a&&this._isValidTable(a,"projectMultiplier")&&d.push({value:a.id||a.name,label:a.title||a.name})}));this.projectAssetsTable.addOption(f.clone(b));this.projectMultiplierTable.addOption(f.clone(d));this._setSelectedValuesInTables()},_isValidTable:function(a,b){var d,k,u=[];d=!1;(a=a.fields)&&0<a.length&&h.some(a,f.hitch(this,function(a){k=a.name.toUpperCase();if("projectAssets"===b&&this._assetsTableRequiredFields[k]&&-1<this._assetsTableRequiredFields[k].indexOf(a.type)&&!a.domain){if(u.push(a.name),
u.length===Object.keys(this._assetsTableRequiredFields).length)return d=!0}else if("projectMultiplier"===b&&this._multiplierTableRequiredFields[k]&&-1<this._multiplierTableRequiredFields[k].indexOf(a.type)&&!a.domain&&(u.push(a.name),u.length===Object.keys(this._multiplierTableRequiredFields).length))return d=!0}));return d},_setSelectedValuesInTables:function(){var a;this.config.assetTable?(a=this.layerInfosObj.getTableInfoById(this.config.assetTable))&&a.layerObject?(this.projectAssetsTable.set("value",
this.config.assetTable),this._prevProjectAssetsTableValue=this.config.assetTable):(this.projectAssetsTable.set("value",""),this._prevProjectAssetsTableValue=""):(this.projectAssetsTable.set("value",""),this._prevProjectAssetsTableValue="");this.config.multiplierAdditionalCostTable?(a=this.layerInfosObj.getTableInfoById(this.config.multiplierAdditionalCostTable))&&a.layerObject?(this.projectMultiplierTable.set("value",this.config.multiplierAdditionalCostTable),this._prevProjectMultiplierTableValue=
this.config.multiplierAdditionalCostTable):(this.projectMultiplierTable.set("value",""),this._prevProjectMultiplierTableValue=""):(this.projectMultiplierTable.set("value",""),this._prevProjectMultiplierTableValue="")},_setConfig:function(){var a;this.config.costingGeometryLayer&&this.layerInfosObj.getLayerInfoById(this.config.costingGeometryLayer)&&(a=this.layerInfosObj.getLayerInfoById(this.config.costingGeometryLayer).layerObject);a?(this.costingGeometryLayerDropDown.set("value",this.config.costingGeometryLayer),
this._prevCostingGeometryLayerValue=this.config.costingGeometryLayer,this._createCostingGeometryLayerFieldOptions(a,this._costingGeometryLayerFieldOptions),this.fieldToLabelGeography.options=[],this.fieldToLabelGeography.options.length=0,this.config.geographyField?(this.fieldToLabelGeography.set("options",this._costingGeometryLayerFieldOptions[this.config.costingGeometryLayer].options),this.fieldToLabelGeography.set("disabled",!1)):(this.fieldToLabelGeography.set("options",this._costingGeometryLayerFieldOptions.defaultSelectOption.options),
this.fieldToLabelGeography.set("disabled",!0))):(this.costingGeometryLayerDropDown.set("value",""),this._prevCostingGeometryLayerValue="",this.fieldToLabelGeography.set("options",this._costingGeometryLayerFieldOptions.defaultSelectOption.options),this.fieldToLabelGeography.set("disabled",!0),this.fieldToLabelGeography.set("value",""));this.config.projectLayer&&this.projectLayerDropDown&&1<this.projectLayerDropDown.options.length?(this.projectLayerDropDown.set("value",this.config.projectLayer),this._prevProjectLayerValue=
this.config.projectLayer):(this.projectLayerDropDown.set("value",""),this._prevProjectLayerValue="");this.config.pointLayerCentroid&&this.pointLayerCentroidDropDown&&1<this.pointLayerCentroidDropDown.options.length?(this.pointLayerCentroidDropDown.set("value",this.config.pointLayerCentroid),this._prevPointLayerCentroidValue=this.config.pointLayerCentroid):(this.pointLayerCentroidDropDown.set("value",""),this._prevPointLayerCentroidValue="")},_attachingEvents:function(){this.own(l(this.costingGeometryLayerDropDown,
"change",f.hitch(this,function(a){a!==this.costingGeometryLayerDropDown.value&&this.costingGeometryLayerDropDown.set("value",a);""===a||this._costingGeometryLayerFieldOptions[a]||(a=this.layerInfosObj.getLayerInfoById(a))&&a.layerObject&&(a=a.layerObject,this._createCostingGeometryLayerFieldOptions(a,this._costingGeometryLayerFieldOptions));this._onDropdownChange(this.costingGeometryLayerDropDown,"costingGeometryLayer","layer")})));this.own(l(this.projectLayerDropDown,"change",f.hitch(this,function(){this._onDropdownChange(this.projectLayerDropDown,
"projectLayer","layer");this._enableOrDisablePointLayerDropdown()})));this.own(l(this.projectAssetsTable,"change",f.hitch(this,function(){this._onDropdownChange(this.projectAssetsTable,"projectAssets","table")})));this.own(l(this.projectMultiplierTable,"change",f.hitch(this,function(){this._onDropdownChange(this.projectMultiplierTable,"projectMultiplier","table")})));this.own(l(this.pointLayerCentroidDropDown,"change",f.hitch(this,function(){this._onDropdownChange(this.pointLayerCentroidDropDown,
"pointLayerCentroidDropdown","layer")})))},_onDropdownChange:function(a,b,d){("layer"===d?this._validateDuplicateSelection(a,this.projectLayerDropDown,this.costingGeometryLayerDropDown):this._validateDuplicateSelection(a,this.projectAssetsTable,this.projectMultiplierTable))?this._setNewDropdownValue(a,b):this._restorePreviousDropdownValue(a,b)},_validateDuplicateSelection:function(a,b,d){return a.value&&b.value===d.value?(a=p.substitute(this.nls.projectSettings.errorMessages.duplicateLayerSelection,
{layerName:f.trim(a.tableNode.innerText)}),this.emit("onDuplicateLayerSelect",a),!1):!0},_setNewDropdownValue:function(a,b){switch(b){case "costingGeometryLayer":this._onCostingGeometryLayerDropDownChange();this._prevCostingGeometryLayerValue!==a.value&&(this.emit("onLayerSelected",{lastSelectedId:this._prevCostingGeometryLayerValue,currentSelectedLayerId:a.value}),this.emit("onGeographyFieldChange",this.fieldToLabelGeography.get("value"),this.costingGeometryLayerDropDown.get("value")),this._prevCostingGeometryLayerValue=
a.value);break;case "projectLayer":this._onProjectLayerDropDownChange();this._prevProjectLayerValue!==a.value&&(this.emit("onLayerSelected",{lastSelectedId:this._prevProjectLayerValue,currentSelectedLayerId:a.value}),this._prevProjectLayerValue=a.value);break;case "pointLayerCentroidDropdown":this._prevPointLayerCentroidValue!==a.value&&(this.emit("onLayerSelected",{lastSelectedId:this._prevPointLayerCentroidValue,currentSelectedLayerId:a.value}),this._prevPointLayerCentroidValue=a.value);break;case "projectAssets":this._prevProjectAssetsTableValue=
a.value;break;case "projectMultiplier":this._prevProjectMultiplierTableValue=a.value}},_restorePreviousDropdownValue:function(a,b){switch(b){case "costingGeometryLayer":a.set("value",this._prevCostingGeometryLayerValue);break;case "projectLayer":a.set("value",this._prevProjectLayerValue);break;case "projectAssets":a.set("value",this._prevProjectAssetsTableValue);break;case "projectMultiplier":a.set("value",this._prevProjectMultiplierTableValue);break;case "pointLayerCentroidDropdown":a.set("value",
this._prevPointLayerCentroidValue)}},_createCostingGeometryLayerFieldOptions:function(a,b){var d;d=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString"];a&&a.fields&&0<a.fields.length?(b[a.id]||(b[a.id]={},b[a.id].options=[]),h.forEach(a.fields,f.hitch(this,function(k){-1<d.indexOf(k.type)&&b[a.id].options.push({value:k.name,label:k.alias?k.alias:k.name})}))):b[a.id].options.push([this._defaultSelectOption])},_onCostingGeometryLayerDropDownChange:function(){var a;
this.fieldToLabelGeography.options=[];this.fieldToLabelGeography.options.length=0;a=this.costingGeometryLayerDropDown.value;""!==a?(this.fieldToLabelGeography.set("options",this._costingGeometryLayerFieldOptions[a].options),this.fieldToLabelGeography.set("disabled",!1)):(this.fieldToLabelGeography.set("options",this._costingGeometryLayerFieldOptions.defaultSelectOption.options),this.fieldToLabelGeography.set("disabled",!0));this.config.geographyField?this.fieldToLabelGeography.set("value",this.config.geographyField,
!1):this.fieldToLabelGeography.set("value","",!1)},_onProjectLayerDropDownChange:function(){var a,b;a={idFieldOptions:[this._defaultSelectOption],stringFieldOptions:[this._defaultSelectOption],costFieldOptions:[this._defaultSelectOption]};this.projectLayerDropDown.value&&(b=this.layerInfosObj.getLayerInfoById(this.projectLayerDropDown.value))&&b.layerObject&&(b=b.layerObject,a=this._getTableDropdownOptions(b.fields,a));this.emit("onProjectLayerSelected",this.projectLayerDropDown.value)},_getTableDropdownOptions:function(a,
b){var d,k,u;d=["esriFieldTypeOID","esriFieldTypeGlobalID"];k=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];h.forEach(a,f.hitch(this,function(a){u={value:a.name,label:a.alias?a.alias:a.name};-1<d.indexOf(a.type)?b.idFieldOptions.push(u):-1<k.indexOf(a.type)?b.costFieldOptions.push(u):"esriFieldTypeString"===a.type&&b.stringFieldOptions.push(u)}));return b},_isValidFieldType:function(a){var b,d=!1;h.some(a.fields,f.hitch(this,function(a){b=a.name.toUpperCase();
if("PROJECTID"===b&&"esriFieldTypeGUID"===a.type)return d=!0;d=!1}));return d},_isEditable:function(a){a=a.capabilities;return(-1<a.indexOf("Editing")||-1<a.indexOf("Update"))&&-1<a.indexOf("Create")&&-1<a.indexOf("Delete")?!0:!1},_populatePointLayerDropdown:function(a){var b=[];b.push(this._defaultSelectOption);this._getValidPointLayersOptions(b,a);this.pointLayerCentroidDropDown.set("options",f.clone(b));this._prevPointLayerCentroidValue=this.projectLayerDropDown.getValue();this._enableOrDisablePointLayerDropdown()},
_getValidPointLayersOptions:function(a,b){h.forEach(b,f.hitch(this,function(b){b.hasOwnProperty("layerObject")&&(b=b.layerObject,b.hasOwnProperty("geometryType")&&"esriGeometryPoint"===b.geometryType&&this._isEditable(b)&&this._isValidFieldType(b)&&"Feature Layer"===b.type&&a.push({value:b.id,label:b.title||b.name}))}))},_enableOrDisablePointLayerDropdown:function(){var a;a=this.projectLayerDropDown.getValue();""!==a&&null!==a&&void 0!==a?this.pointLayerCentroidDropDown.set("disabled",!1):(this.pointLayerCentroidDropDown.set("disabled",
!0),this.pointLayerCentroidDropDown.set("value",""))}})})},"widgets/CostAnalysis/setting/LayerSettings":function(){define("dojo/_base/declare jimu/BaseWidget dojo/Evented jimu/dijit/Message dijit/_WidgetsInTemplateMixin dojo/text!./LayerSettings.html dojo/_base/lang jimu/dijit/SimpleTable jimu/dijit/Popup dojo/_base/array dojo/query dijit/registry dojo/dom-class dojo/dom-construct dojo/_base/html dojo/on dojo/dom-attr ./AttributeSettings".split(" "),function(w,v,x,r,f,l,h,c,p,g,t,m,a,b,d,k,u,y){return w([v,
x,f],{templateString:l,attributeSettingPopup:null,baseClass:"jimu-widget-cost-analysis-layer-settings",_layerSettingsTable:null,constructor:function(a){h.mixin(this,a)},postMixInProperties:function(){this.nls.common={};h.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this.inherited(arguments);this.attributeSettingPopup=this._layerSettingsTable=null},setConfig:function(){this._filterLayers()},getConfig:function(){return this._getUpdateLayerSettings()},_getUpdateLayerSettings:function(){var a;
if(this._layerSettingsTable)return a=this._layerSettingsTable.getData(),a=this._getSelectedFields(a)},_createlayerSettingsGrid:function(){this._layerSettingsTable=new c({fields:[{name:"editable",title:this.nls.layerSettings.EditableLayerHeaderTitle,type:"checkbox",editable:!1,width:"16%"},{name:"title",title:this.nls.layerSettings.layerNameHeaderTitle,type:"text",editable:!1,width:"64%"},{name:"fieldPicker",title:this.nls.layerSettings.fieldPickerHeaderTitle,type:"empty",editable:!1,hidden:!0,width:"0%"},
{name:"selectable",title:"",type:"checkbox",editable:!1,hidden:!0,width:"0%"},{name:"id",title:"",type:"text",editable:!1,hidden:!0,width:"0%"},{name:"url",title:"",type:"text",editable:!1,hidden:!0,width:"0%"},{name:"attributeSetting",title:this.nls.layerSettings.attributeSettingHeaderTitle,type:"empty",editable:!1,width:"20%"}],selectable:!0});this._layerSettingsTable.placeAt(this.layerSettingsTableNode);d.setStyle(this._layerSettingsTable.domNode,{height:"100%"});this._layerSettingsTable.startup()},
onLayerSettingChange:function(a){var e={};if(a=this._layerSettingsTable.getRowData(a))e.layerId=a.id,e.editable=null===a.editable?!1:a.editable;this.emit("onLayerSettingUpdate",e)},_filterLayers:function(){var e,n,b=[];e=this.map.itemInfo.itemData.operationalLayers;0===e.length?a.remove(this.noAssetLayersAvailable,"esriCTHidden"):(a.add(this.noAssetLayersAvailable,"esriCTDisabled"),this._createlayerSettingsGrid(),this._setTableHeadTooltip(),b=[this.config.projectSettings.costingGeometryLayer||"",
this.config.projectSettings.projectLayer||"",this.config.projectSettings.pointLayerCentroid||""],this.config&&0<this.config.layerSettings.length&&g.forEach(this.config.layerSettings,h.hitch(this,function(a){(n=this.map.getLayer(a.id))&&(!n.errors||0>=n.errors.length)&&(b.push(a.id),n.editable=this._checkEditCapabilities(n),this._createFieldsRows(a,n.editable))})),g.forEach(e,h.hitch(this,function(a){a.errors&&!(0>=a.errors.length)||"ArcGISFeatureLayer"!==a.layerType||a.hasOwnProperty("featureCollection")||
-1!==b.indexOf(a.id)||(a.selectable=!0,a.editable=this._checkEditCapabilities(a.layerObject),this._createFieldsRows(a,a.editable))})));this.updateAttributeButtonState(this.config.projectSettings.projectLayer)},_checkEditCapabilities:function(a){return a&&a.capabilities&&-1!==a.capabilities.indexOf("Delete")&&-1!==a.capabilities.indexOf("Create")&&-1!==a.capabilities.indexOf("Update")&&a.globalIdField?!0:!1},_getInvalidLayersMsg:function(a){var e,b=[];e="";a=this.layerInfosObj.getLayerInfoById(a).layerObject;
a.capabilities?(-1===a.capabilities.indexOf("Create")&&b.push("Create"),-1===a.capabilities.indexOf("Update")&&b.push("Update"),-1===a.capabilities.indexOf("Delete")&&b.push("Delete")):b=["Create","Update","Delete"];0<b.length&&(e=this.nls.layerSettings.missingCapabilitiesMsg,e+="\x3cbr/\x3e",g.forEach(b,h.hitch(this,function(a){e+="\x3cli\x3e"+this.nls.layerSettings[a.toLowerCase()]+"\x3c/li\x3e"})));a.globalIdField||(e+="\x3cbr/\x3e",e+=this.nls.layerSettings.missingGlobalIdMsg);return e},_enableDisableEditableCheckbox:function(e,
n,z){var q,d;q=t(".simple-table-cell ",e)[0];q.children[0]&&(d=m.byNode(q.children[0]));z?d.setStatus(!0):(u.set(d.domNode,"title",this.nls.layerSettings.disableEditableCheckboxTooltip),d.setValue(!1),d.setStatus(!1),a.add(d.domNode,"jimu-float-leading"),e.errorDiv||(n=this._getInvalidLayersMsg(n.id),e.errorDiv=b.create("div",{"class":"esriCTFieldError"},q),u.set(e.errorDiv,"errorMessage",n),e.errorSpan=b.create("span",{"class":"jimu-icon jimu-icon-error"},e.errorDiv),this.own(k(e.errorDiv,"click",
h.hitch(this,function(a){a=u.get(a.currentTarget,"errorMessage");r({message:a})})))))},_createFieldsRows:function(a,b){var e,q,n;a.editable&&(a.selectable=a.editable);e=this._layerSettingsTable.addRow({title:a.title?a.title:a.name,editable:a.editable,selectable:a.selectable,id:a.id,url:a.url});e.tr.layerInfo=this.map._layers[a.id];e.tr.attributeSettingFields=a.attributeSetting;n=t(".jimu-checkbox",e.tr.children[3]);q=t(".jimu-checkbox",e.tr.children[0]);a.editable&&this._setCheckBoxState(q[0],n[0]);
setTimeout(h.hitch(this,function(){this._setHeaderCheckBoxState()}),200);this.own(k(m.byNode(q[0]),"change",h.hitch(this,function(b){this._setCheckBoxState(q[0],n[0]);this._setHeaderCheckBoxState();this.onLayerSettingChange(q[0].parentElement.parentElement);this._addAttributeSettingIcon(e.tr,a,b)})));this._enableDisableEditableCheckbox(e.tr,a,b);this._addAttributeSettingIcon(e.tr,a,b)},_addAttributeSettingIcon:function(e,n,d){var q;q=t(".simple-table-cell",e)[6];b.empty(q);q&&(d?(e.attributeSetting=
b.create("div",{"class":"esriCTAttributeSettingIcon"},q),this.projectLayer&&""!==this.projectLayer||a.add(e.attributeSetting,"esriCTAttributeSettingDisableIcon"),this.own(k(e.attributeSetting,"click",h.hitch(this,function(b){a.contains(b.currentTarget,"esriCTAttributeSettingDisableIcon")||(b=e.layerInfo,this._curRow=e,b||(b={selectedFields:null},e.layerInfo=b),b.layerLabel="",b.layer=this.layerInfosObj.getLayerInfoById(n.id),this._createAttributeSettingsPopup({nls:this.nls,featureLayer:b.layer.layerObject,
selectedFields:e.attributeSettingFields,layerGridInfo:b,config:this.config,projectLayer:this.projectLayer}))})))):e.attributeSetting=b.create("div",{"class":"esriCTAttributeSettingDisableIcon"},q))},updateAttributeButtonState:function(e){var b=!1,d=t(".esriCTAttributeSettingIcon",this.domNode);e&&""!==e||(b=!0);d&&0<d.length&&g.forEach(d,h.hitch(this,function(e){b?a.add(e,"esriCTAttributeSettingDisableIcon"):a.remove(e,"esriCTAttributeSettingDisableIcon")}))},_createAttributeSettingsPopup:function(a){var e,
d,q;a.map=this.map;d=b.create("button",{title:this.nls.common.ok});d.label=this.nls.common.ok;q=b.create("button",{title:this.nls.common.cancel});q.label=this.nls.common.cancel;this._attributeSettings=new y(a);this._attributeSettings.startup();e=new p({titleLabel:this.nls.layerSettings.attributeSettingsPopupTitle,content:this._attributeSettings,width:830,height:500,autoHeight:!0,buttons:[d,q]});d.onClick=h.hitch(this,function(){this._curRow.attributeSettingFields=this._attributeSettings.okButtonClicked();
this._attributeSettings.destroy();this._attributeSettings=null;e.close()});q.onClick=h.hitch(this,function(){this._attributeSettings.destroy();this._attributeSettings=null;e.close()})},_setCheckBoxState:function(e,b){e=m.byNode(e);b=m.byNode(b);e.checked?(b.set("checked",!0),b.set("status",!1),b.set("disable",!0),a.add(b.domNode,"jimu-state-disabled")):(b.set("checked",!0),b.set("status",!0),b.set("disable",!1),a.remove(b.domNode,"jimu-state-disabled"));a.add(b.domNode.children[0],"checked")},_setHeaderCheckBoxState:function(){var e,
b,d=!0,q;e=t(".simple-table-title .checkbox",this.domNode)[1];q=t(".simple-table-title .jimu-checkbox",this.domNode)[1];g.some(this._layerSettingsTable.getRows(),h.hitch(this,function(a){b=t("td.selectable .checked",a);if(0===b.length)return d=!1,!0}));d?(a.add(e,"checked"),m.byNode(q).set("checked",!0)):(a.remove(e,"checked"),m.byNode(q).set("checked",!1))},updateLayerSettingsTable:function(a){var e=this._layerSettingsTable.getData(),b;a.lastSelectedId&&(b=this.layerInfosObj.getLayerInfoById(a.lastSelectedId))&&
b.layerObject&&(b=b.layerObject,b.editable=this._checkEditCapabilities(b),b.selectable=!0,this._createFieldsRows(b,b.editable));a.currentSelectedLayerId&&g.some(e,h.hitch(this,function(b,e){if(b.id===a.currentSelectedLayerId)return this._layerSettingsTable.deleteRow(this._layerSettingsTable.tbody.rows[e]),!0}))},_getFieldsOptionsObj:function(a){var b=[],e,q;q=a.fields;e=["esriFieldTypeString"];b.push({label:this.nls.layerSettings.selectLabel,value:""});g.forEach(q,h.hitch(this,function(q){q.editable&&
!q.domain&&-1<e.indexOf(q.type)&&37<q.length&&q.name!==a.typeIdField&&b.push({label:q.alias||q.name,value:q.name})}));return b},_getSelectedFields:function(a){var b;b=this._layerSettingsTable.getRows();g.forEach(b,h.hitch(this,function(b,e){null===a[e].editable&&(a[e].editable=!1);a[e].attributeSetting=b.attributeSettingFields;delete a[e].fieldPicker}));return a},_setTableHeadTooltip:function(){var a;a=t(".simple-table-thead th",this.domNode);a.length&&(u.set(a[0],"title",this.nls.layerSettings.EditableLayerHeaderTooltip),
u.set(a[1],"title",this.nls.layerSettings.fieldPickerHeaderTooltip),u.set(a[2],"title",this.nls.layerSettings.layerNameHeaderTooltip),u.set(a[3],"title",this.nls.layerSettings.SelectableLayerHeaderTooltip))}})})},"widgets/CostAnalysis/setting/AttributeSettings":function(){define("dojo/_base/declare jimu/dijit/SimpleTable jimu/BaseWidget dojo/Evented dojo/_base/lang dojo/dom-class dijit/_WidgetsInTemplateMixin dojo/text!./AttributeSettings.html dojo/on dojo/query dijit/form/Select dojo/_base/array".split(" "),
function(w,v,x,r,f,l,h,c,p,g,t,m){return w([x,r,h],{templateString:c,attributeSettingPopup:null,baseClass:"jimu-widget-cost-analysis-attribute-settings",_layerSettingsTable:null,_projectLayer:"",_entireFieldsArr:[],_selectedFieldsArr:[],_entireFieldObj:[],_projectFieldTypes:[],validFieldTypes:"esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeSmallInteger esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeGUID".split(" "),constructor:function(a){f.mixin(this,a)},postMixInProperties:function(){this.nls.common=
{};f.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this._entireFieldsArr=[];this._selectedFieldsArr=[];this._entireFieldObj=[];this._projectFieldTypes=[];this._layerSettingsTable=this.attributeSettingPopup=null;this._projectLayer=this.config.projectSettings.projectLayer||this.projectLayer||"";this._projectLayerAttributeStore="";this.inherited(arguments);this._init()},_init:function(){this._clearData();this._fetchProjectLayerFieldTypes();this._addValidFields();this._createAttributeSettingsFieldsTable();
this._attachEventsToElement();this._displayPreviousConfiguredFields()},_clearData:function(){this._entireFieldsArr=[];this._selectedFieldsArr=[];this._projectFieldTypes=[]},_fetchProjectLayerFieldTypes:function(){var a;a=this.map.getLayer(this._projectLayer).fields;m.forEach(a,f.hitch(this,function(a){-1<this.validFieldTypes.indexOf(a.type)&&-1===this._projectFieldTypes.indexOf(a.type)&&this._projectFieldTypes.push(a.type)}))},_displayPreviousConfiguredFields:function(){this.selectedFields&&0<this.selectedFields.length&&
(m.forEach(this.selectedFields,f.hitch(this,function(a){this._configuredField=a;this.attributeSettingsAddFields.click()})),this._configuredField=null)},_addValidFields:function(){m.forEach(this.featureLayer.fields,f.hitch(this,function(a){this._entireFieldObj[a.name]=a;-1<this.validFieldTypes.indexOf(a.type)&&-1<this._projectFieldTypes.indexOf(a.type)&&a.editable&&(this._entireFieldsArr.push(a.name),this._entireFieldObj[a.name]=f.clone(a),this.selectedFields&&this.selectedFields[a.name]&&(this._entireFieldObj[a.name].label=
this.selectedFields[a.name].label))}));0===this._entireFieldsArr.length&&this._disableAddFieldButton()},_disableAddFieldButton:function(){this._selectedFieldsArr.length===this._entireFieldsArr.length&&l.add(this.attributeSettingsAddFields,"esriCTDisabled")},_addFieldsRow:function(a){var b,d,k;b=this._attributeSettingsTable.addRow({});b.success&&b.tr&&(b=b.tr,k=g(".simple-table-cell",b),d=k[0],k=k[1],this._addFieldDropdown(a,d,b),this._addProjectFieldDropdown(k,b))},_deleteFieldRow:function(a){var b;
l.remove(this.attributeSettingsAddFields,"esriCTDisabled");b=this._selectedFieldsArr.indexOf(a.fieldDropdownInstance.value);-1<b&&this._selectedFieldsArr.splice(b,1);this._addSelectedFieldInOtherDropdown(a.fieldDropdownInstance.value,null)},_addFieldDropdown:function(a,b,d){a=this._getDistinctFieldsOptionsObj(a);a=new t({"class":"esriCTFieldChooserDropdown",options:a});a.placeAt(b);a.startup();this._configuredField&&a.set("value",this._configuredField.layerField,!1);d.fieldDropdownInstance=a;this.own(p(a,
"change",f.hitch(this,function(a){var b;b=this._selectedFieldsArr[d.rowIndex];this._selectedFieldsArr[d.rowIndex]=a;this._addSelectedFieldInOtherDropdown(b,a);this._removeSelectedFieldFromOtherDropdown(a);d.projectFieldDropdownInstance.set("options",this._getProjectLayerFields(d));d.projectFieldDropdownInstance.set("value",d.projectFieldDropdownInstance.options[0])})));this._selectedFieldsArr.push(a.value);this._removeSelectedFieldFromOtherDropdown(a.value);this._disableAddFieldButton()},_addProjectFieldDropdown:function(a,
b){var d;d=this._getProjectLayerFields(b);d=new t({"class":"esriCTFieldChooserDropdown",options:d});d.placeAt(a);d.startup();this._configuredField&&d.set("value",this._configuredField.projectField,!1);b.projectFieldDropdownInstance=d;this.own(p(d,"change",f.hitch(this,function(){})))},_getProjectLayerFields:function(a){var b=[],d;a=a.fieldDropdownInstance.getValue();d=this._getFieldType(a);this._projectLayer&&""!==this._projectLayer&&(a=this.map.getLayer(this._projectLayer).fields,b=[],m.forEach(a,
f.hitch(this,function(a){d===a.type?b.push({label:a.alias||a.name,value:a.name}):"esriFieldTypeString"===d&&"esriFieldTypeGlobalID"===a.type?b.push({label:a.alias||a.name,value:a.name}):"esriFieldTypeGUID"!==d||"esriFieldTypeGlobalID"!==a.type&&"esriFieldTypeGUID"!==a.type||b.push({label:a.alias||a.name,value:a.name})})));return b},_getFieldType:function(a){return this.featureLayer.getField(a).type},_getDistinctFieldsOptionsObj:function(a){var b=[];m.forEach(a,f.hitch(this,function(a){b.push({label:this._entireFieldObj[a].alias||
this._entireFieldObj[a].name,value:a})}));return b},_removeSelectedFieldFromOtherDropdown:function(a){var b;b=this._attributeSettingsTable.getRows();m.forEach(b,f.hitch(this,function(b){a!==b.fieldDropdownInstance.value&&b.fieldDropdownInstance.removeOption(a)}))},_addSelectedFieldInOtherDropdown:function(a,b){var d;d=this._attributeSettingsTable.getRows();m.forEach(d,f.hitch(this,function(d){b!==d.fieldDropdownInstance.value&&d.fieldDropdownInstance.addOption({label:this._entireFieldObj[a].alias||
this._entireFieldObj[a].name,value:a})}))},okButtonClicked:function(){var a,b;b=[];a=this._attributeSettingsTable.getRows();0===a.length?this.selectedFields=null:(m.forEach(a,f.hitch(this,function(a){b.push({layerField:a.fieldDropdownInstance.value,projectField:a.projectFieldDropdownInstance.value})})),this.selectedFields=b);return this.selectedFields},_getDistinctFields:function(a,b){return a.filter(function(a){return 0>b.indexOf(a)})},_attachEventsToElement:function(){this.own(p(this.attributeSettingsAddFields,
"click",f.hitch(this,function(){var a;l.contains(this.attributeSettingsAddFields,"esriCTDisabled")||(a=this._getDistinctFields(this._entireFieldsArr,this._selectedFieldsArr),this._addFieldsRow(a))})));this.own(p(this._attributeSettingsTable,"row-delete",f.hitch(this,function(a){this._deleteFieldRow(a)})))},onOkButtonClicked:function(){this.parentNode.attributeSettingPopup=this.attributeSettingPopup;this.attributeSettingPopup.hide()},onCancelButtonClicked:function(){this.attributeSettingPopup.hide()},
_createAttributeSettingsFieldsTable:function(){this._attributeSettingsTable=new v({fields:[{name:"layerAttributes",title:this.nls.layerSettings.layerAttributesHeaderTitle,type:"empty",editable:!1,width:"40%"},{name:"projectLayerAttributes",title:this.nls.layerSettings.projectLayerAttributesHeaderTitle,type:"empty",editable:!1,width:"40%"},{name:"Delete",title:this.nls.layerSettings.delete,type:"actions",actions:["delete"],width:"20%"}],selectable:!0});this._attributeSettingsTable.placeAt(this.attributeSettingsTableNode);
this._attributeSettingsTable.startup()}})})},"widgets/CostAnalysis/setting/CostingInfo":function(){define("dojo/_base/declare jimu/BaseWidget dojo/Evented dijit/_WidgetsInTemplateMixin dojo/text!./CostingInfo.html dojo/on dojo/dom-construct dojo/_base/lang dojo/_base/array ./ManageScenarios ./CostingTemplate esri/tasks/query esri/tasks/QueryTask dojo/Deferred dojo/string dojo/dom-class dijit/form/CheckBox".split(" "),function(w,v,x,r,f,l,h,c,p,g,t,m,a,b,d,k){return w([v,x,r],{templateString:f,_manageScenario:null,
totalScenariosCollection:[],costingTemplate:{},_scenarioOptions:[],_geographyOptions:[],costingInfoData:{},_configuredLayers:[],baseClass:"jimu-widget-cost-analysis-costing-info",constructor:function(a){c.mixin(this,a)},postMixInProperties:function(){this.nls.common={};c.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this.costingTemplate={};this._manageScenario=null;this.totalScenariosCollection=[];this._scenarioOptions=[];this._geographyOptions=[];this.costingInfoData={};this._configuredLayers=
[];this.inherited(arguments);this._setUpdateEquationCheckBoxState();for(var a in this.config.layerSettings)this._configuredLayers.push(this.config.layerSettings[a].id);this._init();this.own(l(this.btnManageScenarios,"click",c.hitch(this,this._manageScenariosBtnClicked)))},_setUpdateEquationCheckBoxState:function(){this.config&&this.config.hasOwnProperty("updateCostEquationCheckBoxStatus")&&this.updateCostEquationCheckBox.set("checked",this.config.updateCostEquationCheckBoxStatus)},validate:function(){var a=
this._validateCostingInfoTabData();return a.isValid?{isValid:!0}:{isValid:!1,errorMessage:a.errorMessage}},getConfig:function(){return{costingInfoData:this.costingInfoData,scenarios:this.totalScenariosCollection,updateCostEquationCheckBoxStatus:this.updateCostEquationCheckBox.get("checked")}},_init:function(){this._geographyOptions=[{label:this.nls.costingInfo.noneValue,value:""}];this.config.projectSettings&&""!==this.config.projectSettings.costingGeometryLayer&&void 0!==this.config.projectSettings.costingGeometryLayer?
this.getGeographyOptions().then(c.hitch(this,function(){this._createCostingTemplate()})):this._createCostingTemplate()},_createCostingTemplate:function(){var a,b,e=[],e=[this.config.projectSettings.costingGeometryLayer||"",this.config.projectSettings.projectLayer||"",this.config.projectSettings.pointLayerCentroid||""];this._getScenarioOptions(this.config.scenarios);a=this.map.itemInfo.itemData.operationalLayers;this._showHideNoLayerMessage(a.length);if(0<Object.keys(this.config.costingInfoSettings).length)for(b in this.config.costingInfoSettings){var n=
this._getOperationalLayer(a,b);n&&(!n.errors||0>=n.errors.length)&&this._createCostingTemplateObj(n)}p.forEach(a,c.hitch(this,function(a){(!a.errors||0>=a.errors.length)&&this._checkEditCapabilities(a.layerObject)&&-1===e.indexOf(a.id)&&-1===this._configuredLayers.indexOf(a.id)&&(a.layerObject.templates.length?this._createCostingTemplateObj(a):a.layerObject.types.length&&this._createCostingTemplateObj(a))}))},_createCostingTemplateObj:function(a){this.costingTemplate[a.id]=new t({nls:this.nls,map:this.map,
config:this.config,layer:a,scenarios:this._scenarioOptions,geographies:this._geographyOptions},h.create("div",{},this.costingTemplateContainer))},_getOperationalLayer:function(a,b){var e;p.some(a,c.hitch(this,function(a){if(a.id===b)return e=a,!0}));return e},_manageScenariosBtnClicked:function(){this._manageScenario=new g({nls:this.nls,map:this.map,config:this.config,existingScenarios:this.totalScenariosCollection});l(this._manageScenario,"okButtonClicked",c.hitch(this,function(a){this._manageScenario.destroy();
this._getScenarioOptions(a)}))},_checkEditCapabilities:function(a){return a&&a.capabilities&&"string"===typeof a.capabilities&&-1!==a.capabilities.indexOf("Delete")&&-1!==a.capabilities.indexOf("Create")&&-1!==a.capabilities.indexOf("Update")&&a.globalIdField?!0:!1},_getScenarioOptions:function(a){var b,e;this._scenarioOptions=[{label:this.nls.costingInfo.noneValue,value:""}];this.totalScenariosCollection=[];p.forEach(a,c.hitch(this,function(a){b="object"===typeof a?a.field:a;this._scenarioOptions.push({label:b,
value:b});this.totalScenariosCollection.push(b)}));for(e in this.costingTemplate)this.costingTemplate[e].updateScenarioOptions(this._scenarioOptions)},getGeographyOptions:function(d,k){var e,n;e=new b;k||(d=this.config.projectSettings.geographyField,k=this.config.projectSettings.costingGeometryLayer);""!==k&&this.layerInfosObj.getLayerInfoById(k)?(k=this.map._layers[k],k=new a(k.url),n=new m,n.outFields=[d],n.returnDistinctValues=!0,n.returnGeometry=!1,n.where="1\x3d1",k.execute(n,c.hitch(this,function(a){this._geographyQueryTaskComplete(a,
d);e.resolve(this._geographyOptions)}),c.hitch(this,function(){this._geographyOptions=[];this._geographyOptions.push({label:this.nls.costingInfo.noneValue,value:""});e.resolve(this._geographyOptions)}))):(this._geographyOptions=[],this._geographyOptions.push({label:this.nls.costingInfo.noneValue,value:""}),e.resolve(this._geographyOptions));return e.promise},_geographyQueryTaskComplete:function(a,b){this._geographyOptions=[{label:this.nls.costingInfo.noneValue,value:""}];p.forEach(a.features,c.hitch(this,
function(a){""!==a.attributes[b]&&null!==a.attributes[b]&&this._geographyOptions.push({label:isNaN(a.attributes[b])?a.attributes[b]:a.attributes[b].toString(),value:a.attributes[b]})}))},_validateCostingInfoTabData:function(){var a,b,e,n,c,q,k;this.costingInfoData={};for(a in this.costingTemplate)if(q=[],k=[],this.costingTemplate[a]){this.costingInfoData[a]=this.costingTemplate[a].getUpdatedCostingInfo();n=this.costingInfoData[a].length;for(b in this.costingInfoData[a]){c=this.costingInfoData[a][b];
-1===k.indexOf(c.featureTemplate)&&k.push(c.featureTemplate);""===c.scenario&&""===c.geography&&-1===q.indexOf(c.featureTemplate)&&q.push(c.featureTemplate);if(!this.costingTemplate[a].validateCostEquation(c.costEquation))return{isValid:!1,errorMessage:d.substitute(this.nls.costingInfo.requiredCostEquation,{templateName:c.featureTemplate,layerName:this.costingTemplate[a].layer.title})};if(1<n)for(e=parseInt(b,0)+1;e<n;e++){var g;g=this.costingInfoData[a][e];if(c.featureTemplate===g.featureTemplate&&
c.scenario===g.scenario&&c.geography===g.geography)return{isValid:!1,errorMessage:d.substitute(this.nls.costingInfo.duplicateTemplateMessage,{layerName:this.costingTemplate[a].layer.title,templateName:c.featureTemplate})}}}n=0;c=k.length;for(n;n<c;n++)if(-1===q.indexOf(k[n]))return{isValid:!1,errorMessage:d.substitute(this.nls.costingInfo.defaultEquationRequired,{templateName:k[n],layerName:this.costingTemplate[a].layer.title})};if(0===this.costingInfoData[a].length)return{isValid:!1,errorMessage:d.substitute(this.nls.costingInfo.noTemplateAvailable,
{layerName:this.costingTemplate[a].layer.title})}}return Object.keys(this.costingInfoData).length?{isValid:!0}:{isValid:!1,errorMessage:d.substitute(this.nls.costingInfo.noLayerMessage,{tabName:this.nls.costingInfo.tabTitle})}},_updateCostingInfoTable:function(a){var b,e;a.layerId?b=a.layerId:(e=a.lastSelectedId,b=a.currentSelectedLayerId);Object.keys(a).length&&(e?(this.costingTemplate[b]&&this._deleteCostingInfoLayer(b),e&&this._addCostingInfoLayer(e)):a.editable?this._addCostingInfoLayer(b):this.costingTemplate[b]&&
this._deleteCostingInfoLayer(b));this._showHideNoLayerMessage(Object.keys(this.costingTemplate).length)},_showHideNoLayerMessage:function(a){0===a?(k.remove(this.noEditableLayersAvailable,"esriCTHidden"),k.add(this.updateCostEquationChkContainer,"esriCTHidden"),k.add(this.costingTemplateContainer,"esriCTHidden")):(k.add(this.noEditableLayersAvailable,"esriCTHidden"),k.remove(this.updateCostEquationChkContainer,"esriCTHidden"),k.remove(this.costingTemplateContainer,"esriCTHidden"))},_deleteCostingInfoLayer:function(a){this.costingTemplate[a].destroyRecursive();
delete this.costingTemplate[a];delete this.config.costingInfoSettings[a]},_addCostingInfoLayer:function(a){p.some(this.map.itemInfo.itemData.operationalLayers,c.hitch(this,function(b){if(a===b.id&&this._checkEditCapabilities(b.layerObject))return this._createCostingTemplateObj(b),!0}))},onGeographyFieldUpdate:function(a){for(var b in this.costingTemplate)this.costingTemplate[b].updateGeographyOptions(a)},disableUpdateCostEquationChk:function(a){this.updateCostEquationCheckBox.set("disabled",a);a&&
this.updateCostEquationCheckBox.set("value",!1)}})})},"widgets/CostAnalysis/setting/ManageScenarios":function(){define("dojo/_base/declare jimu/dijit/Popup jimu/dijit/SimpleTable jimu/BaseWidget dojo/Evented dijit/_WidgetsInTemplateMixin dojo/text!./ManageScenarios.html dojo/_base/array dojo/_base/lang dojo/on dojo/query dojo/dom-attr".split(" "),function(w,v,x,r,f,l,h,c,p,g,t,m){return w([r,f,l],{templateString:h,popup:null,_addScenarioTable:null,baseClass:"jimu-widget-cost-analysis-manage-scenarios",
constructor:function(a){p.mixin(this,a)},postMixInProperties:function(){this.nls.common={};p.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this._addScenarioTable=this.popup=null;this.inherited(arguments);this._init()},_init:function(){this._createManageScenarioTable();this._createManageScenarioPopup();this.own(g(this.addBtnNode,"click",p.hitch(this,function(){this.scenarioNameNode.set("value",this.scenarioNameNode.get("value").trim());this.scenarioNameNode.validate()?(this._addNewScenario(this._addScenarioTable.getRows().length+
1,this.scenarioNameNode.get("value")),this.scenarioNameNode.set("value"," ")):this.scenarioNameNode.focus()})));this.scenarioNameNode.validator=p.hitch(this,this._scenarioNameValidator);this.scenarioNameNode.focus()},_createManageScenarioPopup:function(){this.popup=new v({titleLabel:this.nls.costingInfo.manageScenarioLabel,content:this.domNode,width:500,height:400,autoHeight:!0,"class":this.baseClass,buttons:[{label:this.nls.common.ok,onClick:p.hitch(this,"onOkButtonClicked")}]})},onOkButtonClicked:function(){this.emit("okButtonClicked",
this._addScenarioTable.getData());this.popup.close()},_createManageScenarioTable:function(){this._addScenarioTable=new x({fields:[{name:"id",title:this.nls.costingInfo.srNoLabel,type:"text",editable:!1,width:"100px"},{name:"field",title:this.nls.costingInfo.scenarioNameLabel,type:"text",editable:!1,width:"200px"},{name:"actions",title:this.nls.costingInfo.deleteLabel,width:"100px",type:"actions",actions:["delete"]}],selectable:!1});this._addScenarioTable.placeAt(this.addScenarioNameTableNode);this._addScenarioTable.startup();
this._populateExistingScenarios();this._addScenarioTable.onBeforeRowDelete=p.hitch(this,function(a){var b,d;this._addScenarioTable.deleteRow(a);a=this._addScenarioTable.getRows();c.forEach(a,function(a,c){b=a.cells[0];d=t("div",b)[0];m.set(d,"innerHTML",c+1);m.set(d,"title",c+1)})})},_populateExistingScenarios:function(){c.forEach(this.existingScenarios,p.hitch(this,function(a,b){this._addNewScenario(b+1,a)}))},_addNewScenario:function(a,b){this._createRow(a,b)},_createRow:function(a,b){this._addScenarioTable.addRow({id:a,
field:b})},_scenarioNameValidator:function(a){return""===a?!1:0<this._addScenarioTable.getRowDataArrayByFieldValue("field",a).length?(this.scenarioNameNode.invalidMessage=this.nls.costingInfo.duplicateScenarioName,!1):!0},getUpdatedManageScenarios:function(){this._addScenarioTable.getRows();t(".simple-table-row",this._addScenarioTable);return[]}})})},"widgets/CostAnalysis/setting/CostingTemplate":function(){define("dojo/_base/declare jimu/dijit/SimpleTable jimu/BaseWidget dojo/Evented dijit/_WidgetsInTemplateMixin dojo/text!./CostingTemplate.html dojo/_base/array dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/on dojo/query dojo/dom-construct dijit/form/Select dijit/form/ValidationTextBox dijit/registry dijit/TooltipDialog dijit/popup ./EditCostEquation ../utils dojo/dom-style".split(" "),
function(w,v,x,r,f,l,h,c,p,g,t,m,a,b,d,k,u,y,e,n,z){return w([x,r,f],{templateString:l,popup:null,_addScenarioTable:null,_featureLayerTemplateOptions:null,baseClass:"jimu-widget-cost-analysis-costing-template",constructor:function(a){c.mixin(this,a)},postMixInProperties:function(){this.nls.common={};c.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this._featureLayerTemplateOptions=this._addScenarioTable=this.popup=null;this.inherited(arguments);g.add(this.domNode,"esriCTLayerTableWrapper");
this._init();this.own(t(this.btnCostingTemplateNode,"click",c.hitch(this,this._addCostingTemplateBtnClicked,!0)))},_init:function(){p.set(this.layerName,"innerHTML",this.layer.title);p.set(this.layerName,"title",this.layer.title);this._createCostingTable()},_createCostingTable:function(){this._addCostingInfoLayerTable=new v({fields:[{name:"field",title:this.nls.costingInfo.featureTemplateTitle,type:"empty",editable:!1,width:"22%"},{name:"field",title:this.nls.costingInfo.costEquationTitle,type:"empty",
editable:!0,width:"22%"},{name:"field",title:this.nls.costingInfo.geographyTitle,type:"empty",editable:!1,width:"22%"},{name:"field",title:this.nls.costingInfo.scenarioTitle,type:"empty",editable:!1,width:"22%"},{name:"actions",title:this.nls.costingInfo.actionTitle,width:"12%",type:"actions",actions:["edit","delete"]}],selectable:!1});this._addCostingInfoLayerTable.placeAt(this.addLayerTableNode);this._addCostingInfoLayerTable.startup();this._addCostingInfoLayerTable.onBeforeRowDelete=c.hitch(this,
function(a){this.config.costingInfoSettings[this.layer.id]&&this.config.costingInfoSettings[this.layer.id].splice(a.rowIndex,1);return!0});this._addHelpIconToHeader();this._createHelpPopups();this._windowEventsPopupClose();this._tableOnBeforeRowEdit();this._populateCostingAssets()},_tableOnBeforeRowEdit:function(){this._addCostingInfoLayerTable.onBeforeRowEdit=c.hitch(this,function(a){var b;b={};b.featureTemplateValue=a.featureTemplateFields.get("value");b.costEquationValue=a.costEquationInput.get("value");
b.geographyValue=a.geographyFields.get("value");b.scenarioValue=a.scenarioFields.get("value");this._editCostEquation=new e({nls:this.nls,map:this.map,config:this.config,layerTitle:this.layer.title,currentRow:a,existingRowValues:b,validateCostEquation:this.validateCostEquation});t(this._editCostEquation,"okButtonClicked",c.hitch(this,function(){this._editCostEquation.destroy()}))})},_createHelpPopups:function(){var b;b=a.create("div",{"class":"esriCTCancelDialogPopup",onclick:function(){y.close(this.costEquationHelpDialog);
return!1}});this.costEquationHelpDialog=new u({"class":this.baseClass,content:b.outerHTML+"\x3cdiv class \x3d 'esriCTDialogText'\x3e"+this.nls.costingInfo.costEquationHelpText+"\x3c/div\x3e",onClick:function(a){g.contains(a.target,"esriCTCancelDialogPopup")||a.stopPropagation()}});this.scenarioHelpDialog=new u({"class":this.baseClass,content:b.outerHTML+"\x3cdiv class \x3d 'esriCTDialogText'\x3e"+this.nls.costingInfo.scenarioHelpText+"\x3c/div\x3e",onClick:function(a){g.contains(a.target,"esriCTCancelDialogPopup")||
a.stopPropagation()}})},_windowEventsPopupClose:function(){t(window.document,"click",c.hitch(this,function(a){g.contains(a.target,"esriCTHelpIcon")||(y.close(this.scenarioHelpDialog),y.close(this.costEquationHelpDialog))}));var a=m(".container-node.jimu-viewstack")[0];a&&t(a,"scroll",c.hitch(this,function(){y.close(this.scenarioHelpDialog);y.close(this.costEquationHelpDialog)}))},_addHelpIconToHeader:function(){var b,e,d,n,k;if(b=m(".simple-table-thead tr",this.domNode)[0])e=b.children[1],d=b.children[3];
n=a.create("div",{"class":"esriCTHelpIcon"},e);k=a.create("div",{"class":"esriCTHelpIcon"},d);t(n,"click",c.hitch(this,function(){this._openHelpPopupDialog(this.costEquationHelpDialog,n)}));t(k,"click",c.hitch(this,function(){this._openHelpPopupDialog(this.scenarioHelpDialog,k)}))},_openHelpPopupDialog:function(a,b){y.open({popup:a,around:b,orient:["above-centered"]})},_addCostingTemplateBtnClicked:function(a){this._addLayerRow(a,null,!0)},_addLayerRow:function(a,b,e){a=a?this._addCostingInfoLayerTable.addRow({}):
this._addCostingInfoLayerTable.addRow({},b.rowIndex+1,!1);if(b=m(".simple-table-cell",a.tr))this._addFeatureTemplateDropdown(b[0],a.tr,e),this._addCostEquationTextBox(b[1],a.tr,e),this._addGeographyDropdown(b[2],a.tr,e),this._addScenarioDropdown(b[3],a.tr,e),this._addCopyRowActionIcon(a.tr)},_addFeatureTemplateDropdown:function(e,d,n){this._featureLayerTemplateOptions||this._getFeatureTemplateOptions();e=a.create("div",{"class":"esriCTDropDownContainer"},e);d.featureTemplateFields=new b({options:c.clone(this._featureLayerTemplateOptions),
"class":"esriCTCostingTemplateFeatureTemplate"});d.featureTemplateFields.placeAt(e);d.featureTemplateFields.startup();e=this.config.costingInfoSettings[this.layer.id];d.featureTemplateFields.set("value",e&&0<e.length&&e[d.rowIndex]&&!n?e[d.rowIndex].featureTemplate:this._featureLayerTemplateOptions[d.rowIndex])},_addGeographyDropdown:function(e,d,n){e=a.create("div",{"class":"esriCTDropDownContainer"},e);d.geographyFields=new b({options:c.clone(this.geographies),"class":"esriCTCostingTemplateGeography"});
d.geographyFields.placeAt(e);d.geographyFields.startup();(e=this.config.costingInfoSettings[this.layer.id])&&0<e.length&&e[d.rowIndex]&&!n?(n=e[d.rowIndex].geography,n=""===n?this.nls.costingInfo.noneValue:n,d.geographyFields.set("value",n)):d.geographyFields.set("value","")},_addScenarioDropdown:function(e,d,n){e=a.create("div",{"class":"esriCTDropDownContainer"},e);d.scenarioFields=new b({options:c.clone(this.scenarios),"class":"esriCTCostingInfoScenarioOptions"});d.scenarioFields.placeAt(e);d.scenarioFields.startup();
(e=this.config.costingInfoSettings[this.layer.id])&&0<e.length&&e[d.rowIndex]&&!n?(n=e[d.rowIndex].scenario,n=""===n?this.nls.costingInfo.noneValue:n,d.scenarioFields.set("value",n)):d.scenarioFields.set("value","")},_addCostEquationTextBox:function(b,e,n){b=a.create("div",{"class":"esriCTTextBoxContainer"},b);e.costEquationInput=new d({"class":"esriCTLayerLabelTextBox esriCTFullWidth",spellcheck:!1});e.costEquationInput.placeAt(b);e.costEquationInput.startup();this._setCostEquation(e.costEquationInput);
e.costEquationInput.validator=c.hitch(this,this.validateCostEquation);(b=this.config.costingInfoSettings[this.layer.id])&&0<b.length&&b[e.rowIndex]&&!n&&(n=b[e.rowIndex].costEquation,e.costEquationInput.set("value",n))},_populateCostingAssets:function(){this.config.costingInfoSettings&&this.config.costingInfoSettings.hasOwnProperty(this.layer.id)?this.layer&&this.layer.layerObject&&h.forEach(this.config.costingInfoSettings[this.layer.id],c.hitch(this,function(){this._addLayerRow(!0)})):0<this.layer.layerObject.templates.length?
h.forEach(this.layer.layerObject.templates,c.hitch(this,function(){this._addLayerRow(!0)})):0<this.layer.layerObject.types.length&&h.forEach(this.layer.layerObject.types,c.hitch(this,function(){this._addLayerRow(!0)}))},_getFeatureTemplateOptions:function(){this._featureLayerTemplateOptions=[];this.layer&&this.layer.layerObject&&(this.layer.layerObject.templates&&0<this.layer.layerObject.templates.length?h.forEach(this.layer.layerObject.templates,c.hitch(this,function(a){this._featureLayerTemplateOptions.push({label:a.name,
value:a.name})})):this.layer.layerObject.types&&0<this.layer.layerObject.types.length&&h.forEach(this.layer.layerObject.types,c.hitch(this,function(a){this._featureLayerTemplateOptions.push({label:a.templates[0].name,value:a.templates[0].name})})))},updateScenarioOptions:function(a){var b;b=m(".esriCTCostingInfoScenarioOptions",this.domNode);h.forEach(b,c.hitch(this,function(b){k.byNode(b).set("options",a)}));this.scenarios=a},_setCostEquation:function(a){var b;this.layer&&this.layer.layerObject&&
this.layer.layerObject.geometryType&&(b=this.layer.layerObject.geometryType,"esriGeometryPolyline"===b||"esriGeometryPolygon"===b?a.set("value","{MEASURE}"):a.set("value","{TOTALCOUNT}"))},validateCostEquation:function(a){return n.validateEquation(a)},getUpdatedCostingInfo:function(){var a,b=[],e={};a=this._addCostingInfoLayerTable.getRows();h.forEach(a,c.hitch(this,function(a){a.featureTemplateFields&&a.costEquationInput&&a.geographyFields&&a.scenarioFields&&(e={},a.featureTemplateFields&&(e.featureTemplate=
a.featureTemplateFields.get("value")),a.costEquationInput&&(e.costEquation=a.costEquationInput.get("value")),a.geographyFields&&(e.geography=a.geographyFields.get("value")),a.scenarioFields&&(e.scenario=a.scenarioFields.get("value")),b.push(e))}));return b},_addCopyRowActionIcon:function(b){var e,d;e=m(".action-item-parent",b)[0];d=m(".jimu-icon-edit",b)[0];setTimeout(function(){m(".action-item-parent",b)[0]&&z.set(m(".action-item-parent",b)[0],"width","60px")},100);e&&(b.copyDiv=a.create("div",{"class":"action-item jimu-float-leading row-edit-div jimu-icon jimu-icon-copy",
title:this.nls.costingInfo.copyRowTitle},e),a.place(b.copyDiv,d,"after"),this.own(t(b.copyDiv,"click",c.hitch(this,this._copyRow,b))))},_copyRow:function(a){this._addLayerRow(!1,a);this._setCopyLayerValues(a)},_setCopyLayerValues:function(a){var b=this._addCostingInfoLayerTable.getRows()[a.rowIndex+1];b.featureTemplateFields.set("value",a.featureTemplateFields.get("value"));b.costEquationInput.set("value",a.costEquationInput.get("value"));b.geographyFields.set("value",a.geographyFields.get("value"));
b.scenarioFields.set("value",a.scenarioFields.get("value"))},updateGeographyOptions:function(a){a&&(this.geographies=a);a=m(".esriCTCostingTemplateGeography",this.domNode);h.forEach(a,c.hitch(this,function(a){k.byNode(a).set("options",c.clone(this.geographies));k.byNode(a).startup()}))}})})},"widgets/CostAnalysis/setting/EditCostEquation":function(){define("dojo/_base/declare jimu/dijit/Popup jimu/BaseWidget dojo/Evented dijit/_WidgetsInTemplateMixin dojo/text!./EditCostEquation.html dojo/_base/lang dojo/on dojo/dom-class dojo/query dojo/dom-attr".split(" "),
function(w,v,x,r,f,l,h,c,p,g,t){return w([x,r,f],{templateString:l,popup:null,baseClass:"jimu-widget-cost-analysis-edit-equation",constructor:function(c){h.mixin(this,c)},postMixInProperties:function(){this.nls.common={};h.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this.popup=null;this.inherited(arguments);this._init()},_init:function(){this._createEditLayerRowPopup()},_createEditLayerRowPopup:function(){var c;this.popup=new v({titleLabel:this.layerTitle+": "+this.existingRowValues.featureTemplateValue,
content:this.domNode,width:600,height:515,autoHeight:!0,"class":this.baseClass,buttons:[{label:this.nls.common.ok,onClick:h.hitch(this,"onOkButtonClicked")},{label:this.nls.common.cancel,classNames:["jimu-btn-vacation"],onClick:h.hitch(this,"onCancelButtonClicked")}]});c=g(".title-label",this.popup.domNode)[0];t.set(c,"title",this.layerTitle+": "+this.existingRowValues.featureTemplateValue);this._setRowPopupValues()},onOkButtonClicked:function(){p.contains(this.costEquationValue.domNode,"esriCTCostEquationError")?
alert(this.nls.costingInfo.validCostEquationMessage):(this.currentRow.costEquationInput.set("value",this.costEquationValue.getValue()),this.popup.close())},onCancelButtonClicked:function(){this.popup.close()},_setRowPopupValues:function(){var g,a;g=""===this.existingRowValues.geographyValue?this.nls.costingInfo.noneValue:this.existingRowValues.geographyValue;a=""===this.existingRowValues.scenarioValue?this.nls.costingInfo.noneValue:this.existingRowValues.scenarioValue;this.geographyValue.set("value",
g);this.scenarioValue.set("value",a);this.costEquationValue.set("value",this.existingRowValues.costEquationValue);c(this.costEquationValue,"KeyUp",h.hitch(this,function(a){this._costEquationKeyUp(a)}));this.costEquationHint.innerHTML=this.nls.costingInfo.hintText},_costEquationKeyUp:function(c){var a;a=this.costEquationValue.domNode;p.contains(a,"esriCTCostEquationError")&&p.remove(a,"esriCTCostEquationError");this.validateCostEquation(c.currentTarget.value)||p.add(a,"esriCTCostEquationError")}})})},
"widgets/CostAnalysis/utils":function(){define("esri/request esri/geometry/geometryEngine dojo/Deferred dojo/_base/lang jimu/dijit/Message dojo/_base/array".split(" "),function(w,v,x,r,f,l){var h={};h.units={feet:{lengthUnit:"feet",areaUnit:"square-feet",bufferUnit:"UNIT_FOOT",lengthAbbr:window.jimuNls.units.feetAbbr,areaAbbr:window.jimuNls.units.squareFeetAbbr},meters:{lengthUnit:"meters",areaUnit:"square-meters",bufferUnit:"UNIT_METER",lengthAbbr:window.jimuNls.units.metersAbbr,areaAbbr:window.jimuNls.units.squareMetersAbbr},
miles:{lengthUnit:"miles",areaUnit:"square-miles",bufferUnit:"UNIT_STATUTE_MILE",lengthAbbr:window.jimuNls.units.milesAbbr,areaAbbr:window.jimuNls.units.squareMilesAbbr},yards:{lengthUnit:"yards",areaUnit:"square-yards",bufferUnit:"UNIT_SURVEY_YARD",lengthAbbr:window.jimuNls.units.yardsAbbr,areaAbbr:window.jimuNls.units.squareYardsAbbr},kilometers:{lengthUnit:"kilometers",areaUnit:"square-kilometers",bufferUnit:"UNIT_KILOMETER",lengthAbbr:window.jimuNls.units.kilometersAbbr,areaAbbr:window.jimuNls.units.squareKilometerAbbr}};
h.switchToTab=function(c,p){c.selectTab(p)};h.removeNegativeExponents=function(c){return 1<c.toString().toLowerCase().split("e-").length?0:c};h.applyRounding=function(c,p){var g;if(isNaN(p)||null===p)p=2;g=Math.pow(10,p);c=Math.round(c*g)/g;return c=c.toFixed(p)};h.getLengthOfGeometry=function(c,p){var g,f;g=0;(f=v.simplify(c))&&(g=c.spatialReference.isWebMercator()||4326===c.spatialReference.wkid?v.geodesicLength(f,p):v.planarLength(f,p));return g};h.getAreaOfGeometry=function(c,f){var g,p;p=v.simplify(c);
g=0;p&&(g=c.spatialReference.isWebMercator()||4326===c.spatialReference.wkid?v.geodesicArea(p,f):v.planarArea(p,f));return g};h.deleteFeatures=function(c,f){var g=new x;w({url:c+"/deleteFeatures",content:{where:f,f:"json"}},{usePost:!0}).then(r.hitch(this,function(c){g.resolve(c)}),function(){g.reject(!1)});return g.promise};h.getUnitsAbbreviation=function(c,f){var g="";if("esriGeometryPolygon"===c||"polygon"===c)g=h.units[f].areaAbbr;else if("esriGeometryPolyline"===c||"polyline"===c)g=h.units[f].lengthAbbr;
return g};h.roundProjectCostValue=function(c,f){var g=0;f=parseFloat(f);switch(c){case "nearestWholeNumber":g=f.toFixed();break;case "nearestTen":g=eval(f.toFixed())/10;g=10*eval(g.toFixed());break;case "nearestHundred":g=eval(f.toFixed())/100;g=100*eval(g.toFixed());break;case "nearestThousand":g=eval(f.toFixed())/1E3;g=1E3*eval(g.toFixed());break;case "nearestTenThousands":g=eval(f.toFixed())/1E4;g=1E4*eval(g.toFixed());break;default:g=f.toFixed(2)}return g};h.getPrjAssetTableFields=function(c){var f=
{};l.forEach(c.fields,r.hitch(this,function(c){"ASSETGUID"===c.name.toUpperCase()?f.ASSETGUID=c.name:"COSTEQUATION"===c.name.toUpperCase()?f.COSTEQUATION=c.name:"SCENARIO"===c.name.toUpperCase()?f.SCENARIO=c.name:"TEMPLATENAME"===c.name.toUpperCase()?f.TEMPLATENAME=c.name:"GEOGRAPHYGUID"===c.name.toUpperCase()?f.GEOGRAPHYGUID=c.name:"PROJECTGUID"===c.name.toUpperCase()&&(f.PROJECTGUID=c.name)}));f.OBJECTID=c.objectIdField;return f};h.getPrjLayerFields=function(c){var f={};l.forEach(c.fields,r.hitch(this,
function(c){"PROJECTNAME"===c.name.toUpperCase()?f.PROJECTNAME=c.name:"DESCRIPTION"===c.name.toUpperCase()?f.DESCRIPTION=c.name:"TOTALASSETCOST"===c.name.toUpperCase()?f.TOTALASSETCOST=c.name:"GROSSPROJECTCOST"===c.name.toUpperCase()?f.GROSSPROJECTCOST=c.name:"GLOBALID"===c.name.toUpperCase()&&(f.GLOBALID=c.name)}));return f};h.getPrjMultiplierFields=function(c){var f={};l.forEach(c.fields,r.hitch(this,function(c){"DESCRIPTION"===c.name.toUpperCase()?f.DESCRIPTION=c.name:"TYPE"===c.name.toUpperCase()?
f.TYPE=c.name:"VALUE"===c.name.toUpperCase()?f.VALUE=c.name:"COSTINDEX"===c.name.toUpperCase()?f.COSTINDEX=c.name:"PROJECTGUID"===c.name.toUpperCase()&&(f.PROJECTGUID=c.name)}));f.OBJECTID=c.objectIdField;return f};h.showMessage=function(c){(new f({message:c})).message=c};h.evaluate=function(c){return(new Function("return "+c))()};h.validateEquation=function(c){var f;if(""===c||-1<c.indexOf("\x26")||-1<c.indexOf("|")||-1<c.indexOf(","))return!1;c=c.replace(/{measure}/ig,1);c=c.replace(/{totalmeasure}/ig,
1);c=c.replace(/{totalcount}/ig,1);if(-1!==c.indexOf("{")||-1!==c.indexOf("}"))return!1;try{return f=h.evaluate(c),isFinite(f)?!0:!1}catch(g){return!1}};return h})},"widgets/CostAnalysis/setting/StatisticsSettings":function(){define("dojo/_base/declare jimu/BaseWidget jimu/dijit/SimpleTable dojo/on dojo/_base/array dojo/query dojo/dom-construct dijit/form/Select dijit/form/ValidationTextBox dijit/_WidgetsInTemplateMixin dojo/text!./StatisticsSettings.html dojo/_base/lang dojo/store/Memory dojo/dom-class dijit/registry dojo/_base/html dojo/dom-style ./ProjectCost".split(" "),
function(w,v,x,r,f,l,h,c,p,g,t,m,a,b,d,k,u,y){return w([v,g],{templateString:t,baseClass:"jimu-widget-cost-analysis-statistics-settings",_layerNameStore:null,_commonStatisticsStoreOption:null,_polygonStatisticsStoreOption:null,_polylineStatisticsStoreOption:null,_pointLayerStatisticsStore:null,_polygonLayerStatisticsStore:null,_polylineLayerStatisticsStore:null,_layerFieldStore:{},_shapeFields:"shape_length shape_area shape__length shape__area shape.len shape.area".split(" "),constructor:function(a){m.mixin(this,
a)},postMixInProperties:function(){this.nls.common={};m.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this._polylineLayerStatisticsStore=this._polygonLayerStatisticsStore=this._pointLayerStatisticsStore=this._polylineStatisticsStoreOption=this._polygonStatisticsStoreOption=this._commonStatisticsStoreOption=this._layerNameStore=null;this._layerFieldStore={};this.inherited(arguments);this._init();this._handleClickEvent();this.showActionButtonsInColumn&&this._createProjectCostTable()},
_createProjectCostTable:function(){this.additionalProjectCostObj=new y({nls:this.nls,map:this.map,config:this.config},h.create("div",{},this.additionalProjectCostWrapper));this.additionalProjectCostObj.startup()},_handleClickEvent:function(){this._addButtonClick();this._crossButtonClick();this._upButtonClick();this._downButtonClick()},_init:function(){this._createStatisticsStoreOptions();this._createStatisticsTable();this._layerNameStore||this._createLayerNameStore();this._attachNodeEvents();this._setConfig();
this._displayAddStatisticsButtonOrLabel();this._handleActionButtonVisibility()},_displayAddStatisticsButtonOrLabel:function(){this.showActionButtonsInColumn?b.remove(this.btnAddStatisticsNodeWrapper,"esriCTHidden"):b.add(this.btnAddStatisticsNodeWrapper,"esriCTHidden")},_setConfig:function(){this.config&&this.config.statisticsSettings&&0<this.config.statisticsSettings.length&&f.forEach(this.config.statisticsSettings,m.hitch(this,function(a){this._addLayerRow(a)}))},getConfig:function(){var a,b;a=
this._statisticsLayerTable.getRows();b=[];f.forEach(a,m.hitch(this,function(a){b.push({id:a.layerNameDropDown.getValue(),type:a.statisticsTypeDropdown.getValue(),field:a.layerFieldDropdown.getValue(),label:a.statisticsLabelTextBox.getValue()})}));this.additionalProjectCostObj&&this.additionalProjectCostObj.getConfig();return b},_createStatisticsStoreOptions:function(){this._commonStatisticsStoreOption=[{name:this.nls.statisticsType.averageLabel,value:"avg"},{name:this.nls.statisticsType.countLabel,
value:"count"},{name:this.nls.statisticsType.maxLabel,value:"max"},{name:this.nls.statisticsType.minLabel,value:"min"},{name:this.nls.statisticsType.summationLabel,value:"sum"}];this._polygonStatisticsStoreOption=[{name:this.nls.statisticsType.areaLabel,value:"area"}];this._polylineStatisticsStoreOption=[{name:this.nls.statisticsType.lengthLabel,value:"length"}]},_attachNodeEvents:function(){0===this._layerNameStore.data.length?(b.remove(this.noEditableLayersAvailable,"esriCTHidden"),b.add(this.btnAddStatisticsNodeWrapper,
"esriCTHidden"),b.add(this.statisticsLayerTableNode,"esriCTHidden")):(b.add(this.noEditableLayersAvailable,"esriCTHidden"),b.remove(this.btnAddStatisticsNodeWrapper,"esriCTHidden"),b.remove(this.statisticsLayerTableNode,"esriCTHidden"));this.own(r(this.btnAddStatisticsNode,"click",m.hitch(this,function(){this._layerNameStore.data.length&&(this._addStatisticsBtnClicked(),this.resetAddNewStatisticsDropdown())})))},_createStatisticsTable:function(){var a;this._statisticsLayerTable=new x({fields:[{name:"editable",
title:this.nls.statisticsSettings.selectDeselectAllTitle,type:"checkbox",editable:!1,width:this.showActionButtonsInRow?"16px":"0%",hidden:!this.showActionButtonsInRow},{name:"field",title:this.nls.common.layer,type:"empty",editable:!1,width:"30%"},{name:"field",title:this.nls.common.type,type:"empty",editable:!0,width:this.showActionButtonsInRow?"19%":"18%"},{name:"field",title:this.nls.statisticsSettings.fieldNameTitle,type:"empty",editable:!1,width:"22%"},{name:"field",title:this.nls.statisticsSettings.statisticsTitle,
type:"empty",editable:!1,width:this.showActionButtonsInRow?"55px":"20%"},{name:"actions",title:this.nls.common.actions,width:"10%",type:"actions",actions:["up","down","delete"],hidden:!this.showActionButtonsInColumn}],selectable:!1});this._statisticsLayerTable.placeAt(this.statisticsLayerTableNode);this._statisticsLayerTable.startup();(a=l(".esriCTAddLayerTableNode th .label")[0])&&b.add(a,"esriCTHidden")},_addButtonClick:function(){!0===this.showActionButtonsInRow?(b.remove(this.btnAddNode,"esriCTHidden"),
this.own(r(this.btnAddNode,"click",m.hitch(this,function(){this._layerNameStore.data.length&&(this._addStatisticsBtnClicked(),this._handleActionButtonVisibility(),this.resetAddNewStatisticsDropdown())})))):b.add(this.btnAddNode,"esriCTHidden")},_crossButtonClick:function(){b.remove(this.btnCrossNode,"esriCTHidden");this.own(r(this.btnCrossNode,"click",m.hitch(this,this._deleteLayerRow)))},_upButtonClick:function(){b.remove(this.btnUpNode,"esriCTHidden");this.own(r(this.btnUpNode,"click",m.hitch(this,
function(){var a,d;if(!b.contains(this.btnUpNode,"esriCTStatisticsUpIconDisable")){d=this._statisticsLayerTable.getRows();var c=this._statisticsLayerTable.getData();f.forEach(c,m.hitch(this,function(b,e){b.editable&&(a=d[e])}));this._statisticsLayerTable.onBeforeRowUp(a)&&(c=f.indexOf(d,a),0<c&&(c=d[c-1]))&&(k.place(a,c,"before"),this._statisticsLayerTable.updateUI(),this._statisticsLayerTable.emit("row-up",a))}})))},_downButtonClick:function(){b.remove(this.btnDownNode,"esriCTHidden");this.own(r(this.btnDownNode,
"click",m.hitch(this,function(){var a,d;if(!b.contains(this.btnDownNode,"esriCTStatisticsDownIconDisable")){d=this._statisticsLayerTable.getRows();var c=this._statisticsLayerTable.getData();f.forEach(c,m.hitch(this,function(b,e){b.editable&&(a=d[e])}));this._statisticsLayerTable.onBeforeRowDown(a)&&(c=f.indexOf(d,a),c<d.length-1&&(c=d[c+1]))&&(k.place(a,c,"after"),this._statisticsLayerTable.updateUI(),this._statisticsLayerTable.emit("row-down",a))}})))},_deleteLayerRow:function(){var a=this._statisticsLayerTable.getRows(),
d=this._statisticsLayerTable.getData();f.forEach(d,m.hitch(this,function(b,e){b.editable&&this._statisticsLayerTable.deleteRow(a[e])}));0===this._statisticsLayerTable.getRows().length&&(d=l("th .checkbox")[0],b.contains(d,"checked")&&b.remove(d,"checked"));this._handleActionButtonVisibility()},_checkEditCapabilities:function(a){var b;return(b=a&&a.capabilities?a.capabilities:null)&&-1!==b.indexOf("Delete")&&-1!==b.indexOf("Create")&&-1!==b.indexOf("Update")&&a.globalIdField?!0:!1},_addStatisticsBtnClicked:function(){var a;
this._addLayerRow();a=l(".simple-table-title .jimu-checkbox",this.domNode)[0];r(d.byNode(a),"change",m.hitch(this,function(){setTimeout(m.hitch(this,function(){this._handleActionButtonVisibility()}),0)}))},_handleActionButtonVisibility:function(){var a,c,k=0,q;a=this._statisticsLayerTable.getRows();q=l(".simple-table-title .jimu-checkbox",this.domNode)[0];q=d.byNode(q);f.some(this._statisticsLayerTable.getRows(),m.hitch(this,function(a){c=l(".jimu-checkbox",a)[0];d.byNode(c).checked&&k++}));0===k?
b.replace(this.btnCrossNode,"esriCTDeleteStatisticsIconDisable","esriCTDeleteStatisticsIcon"):b.replace(this.btnCrossNode,"esriCTDeleteStatisticsIcon","esriCTDeleteStatisticsIconDisable");a&&1===k?(b.replace(this.btnUpNode,"esriCTStatisticsUpIcon","esriCTStatisticsUpIconDisable"),b.replace(this.btnDownNode,"esriCTStatisticsDownIcon","esriCTStatisticsDownIconDisable")):(b.replace(this.btnUpNode,"esriCTStatisticsUpIconDisable","esriCTStatisticsUpIcon"),b.replace(this.btnDownNode,"esriCTStatisticsDownIconDisable",
"esriCTStatisticsDownIcon"));0===a.length?(q.set("status",!1),b.add(q.domNode,"jimu-state-disabled")):(q.set("status",!0),b.remove(q.domNode,"jimu-state-disabled"))},_addLayerRow:function(a){var b,e,c;b=this._statisticsLayerTable.addRow({});e=l(".simple-table-cell",b.tr);c=l(".simple-table-cell .jimu-checkbox",b.tr)[0];e&&(c&&r(d.byNode(c),"change",m.hitch(this,function(){this._handleActionButtonVisibility()})),b=b.tr,this._addLayerNameDropdown(e[1],b,a),this._addStatisticsDropdown(e[2],b,a),this._addLayerFieldDropdown(e[3],
b,a),this._addStatisticsLabelTextBox(e[4],b,a))},_onLayerNameChange:function(a,b,d){var e;this._layerNameStore.data.length&&(e=this._layerNameStore.data[this._layerNameStore.index[a]].geometryType,e=this._getStatisticsTypeStore(e),b.statisticsTypeDropdown.setStore(e),d&&d.type&&b.statisticsTypeDropdown.set("value",d.type),d=b.statisticsTypeDropdown.getValue(),a=this._layerNameStore.data[this._layerNameStore.index[a]].value,this._layerFieldStore[a]||this._createFieldStore(a),b.layerFieldDropdown.setStore(this._layerFieldStore[a]),
b.layerFieldDropdown.reset(),this._onStatisticsTypeChange(d,b))},_onStatisticsTypeChange:function(a,d,c){"count"===a||"length"===a||"area"===a?b.add(d.layerFieldDropdown.domNode,"esriCTHidden"):(b.remove(d.layerFieldDropdown.domNode,"esriCTHidden"),c&&c.field&&d.layerFieldDropdown.set("value",c.field));this._resetStatisticsTypeWidth(d)},_addLayerNameDropdown:function(a,b,d){a=h.create("div",{"class":"esriCTDropDownContainer"},a);b.layerNameDropDown=new c({name:"layerSelect",store:this._layerNameStore,
labelAttr:"name","class":"esriCTLayerNameDropdown"},a);d&&d.id&&b.layerNameDropDown.set("value",d.id);this.own(r(b.layerNameDropDown,"click",m.hitch(this,function(){this._resetLayerNameWidth(b)})));this.own(r(b.layerNameDropDown,"change",m.hitch(this,function(a){this._resetLayerNameWidth(b);this._onLayerNameChange(a,b,d)})));b.layerNameDropDown.startup()},_createLayerNameStore:function(){var b,d,c=[];b=[];c=[this.config.projectSettings.costingGeometryLayer||"",this.config.projectSettings.projectLayer||
"",this.config.projectSettings.pointLayerCentroid||""];this.config.layerSettings.length&&(d=this.config.layerSettings,f.forEach(d,m.hitch(this,function(a){c.push(a.id);var e=this._getFeatureLayerGeometryType(a.id);a.editable&&e&&b.push({name:a.title,value:a.id,geometryType:e})})));d=this.map.webMapResponse.itemInfo.itemData.operationalLayers;f.forEach(d,m.hitch(this,function(a){"ArcGISFeatureLayer"===a.layerType&&this._checkEditCapabilities(a.layerObject)&&-1===c.indexOf(a.id)&&b.push({name:a.title,
value:a.id,geometryType:a.resourceInfo.geometryType})}));this._layerNameStore=new a({idProperty:"value",data:b});this._updateLayerNameOptions()},_updateLayerNameOptions:function(){var a,c;a=l(".esriCTLayerNameDropdown",this.domNode);f.forEach(a,m.hitch(this,function(a){c=d.byNode(a).get("value");d.byNode(a).set("store",this._layerNameStore);d.byNode(a).set("value",c)}));0===this._layerNameStore.data.length?(b.remove(this.noEditableLayersAvailable,"esriCTHidden"),b.add(this.btnAddStatisticsNodeWrapper,
"esriCTHidden"),b.add(this.statisticsLayerTableNode,"esriCTHidden"),b.add(this.additionalProjectCostWrapper,"esriCTHidden")):(b.add(this.noEditableLayersAvailable,"esriCTHidden"),b.remove(this.btnAddStatisticsNodeWrapper,"esriCTHidden"),b.remove(this.statisticsLayerTableNode,"esriCTHidden"),b.remove(this.additionalProjectCostWrapper,"esriCTHidden"))},_getFeatureLayerGeometryType:function(a){var b=f.filter(this.map.webMapResponse.itemInfo.itemData.operationalLayers,m.hitch(this,function(b){return a===
b.id}));return b.length&&b[0].layerObject?b[0].layerObject.geometryType:null},_createStatisticsTypeStore:function(){this._pointLayerStatisticsStore||this._polygonLayerStatisticsStore||this._polylineLayerStatisticsStore||(this._createPointGeometryStatisticsStore(),this._createPolygonGeometryStatisticsStore(),this._createPolylineGeometryStatisticsStore())},_getStatisticsTypeStore:function(a){switch(a){case "esriGeometryPolygon":return this._polygonLayerStatisticsStore;case "esriGeometryPolyline":return this._polylineLayerStatisticsStore;
case "esriGeometryPoint":return this._pointLayerStatisticsStore}},_addStatisticsDropdown:function(a,b,d){var e;a=h.create("div",{"class":"esriCTDropDownContainer"},a);this._createStatisticsTypeStore();e=b.layerNameDropDown._getSelectedOptionsAttr().item.geometryType;e=this._getStatisticsTypeStore(e);b.statisticsTypeDropdown=new c({name:"statisticsTypeSelect",store:e,labelAttr:"name","class":"esriCTStatisticsTypeDropdown"},a);this.own(r(b.statisticsTypeDropdown,"click",m.hitch(this,function(){this._resetStatisticsTypeWidth(b)})));
this.own(r(b.statisticsTypeDropdown,"change",m.hitch(this,function(a){this._resetStatisticsTypeWidth(b);this._onStatisticsTypeChange(a,b,d)})));b.statisticsTypeDropdown.startup()},_createPointGeometryStatisticsStore:function(){this._pointLayerStatisticsStore=new a({idProperty:"value",data:this._commonStatisticsStoreOption})},_createPolygonGeometryStatisticsStore:function(){this._polygonLayerStatisticsStore=new a({idProperty:"value",data:this._commonStatisticsStoreOption.concat(this._polygonStatisticsStoreOption)})},
_createPolylineGeometryStatisticsStore:function(){this._polylineLayerStatisticsStore=new a({idProperty:"value",data:this._commonStatisticsStoreOption.concat(this._polylineStatisticsStoreOption)})},_createFieldStore:function(b){var d,e;d=[];e=["esriFieldTypeDouble","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSmallFloat"];this._layerFieldStore[b]||(f.forEach(this.map._layers[b].fields,m.hitch(this,function(a){-1<e.indexOf(a.type)&&-1===this._shapeFields.indexOf(a.name.toLowerCase())&&
d.push({name:a.alias||a.name,value:a.name})})),0===d.length&&d.push({name:"\x26nbsp",value:null}),this._layerFieldStore[b]=new a({idProperty:"value",data:d}))},_addLayerFieldDropdown:function(a,b){var d;a=h.create("div",{"class":"esriCTDropDownContainer"},a);d=b.layerNameDropDown._getSelectedOptionsAttr().value;this._createFieldStore(d);b.layerFieldDropdown=new c({name:"layerFieldDropdown",store:this._layerFieldStore[d],labelAttr:"name","class":"esriCTStatisticsFieldDropdown"},a);this.own(r(b.layerFieldDropdown,
"click",m.hitch(this,function(){this._resetLayerFieldWidth(b)})));this.own(r(b.layerFieldDropdown,"change",m.hitch(this,function(){this._resetLayerFieldWidth(b)})));b.layerFieldDropdown.startup();a=b.statisticsTypeDropdown.getValue();this._onStatisticsTypeChange(a,b)},_addStatisticsLabelTextBox:function(a,b,d){a=h.create("div",{"class":"esriCTTextBoxContainer"},a);b.statisticsLabelTextBox=new p({"class":"esriCTLayerLabelTextBox"},a);d&&d.label&&b.statisticsLabelTextBox.set("value",d.label);b.statisticsLabelTextBox.startup()},
_updateStatisticsTable:function(a){var b,d,c;a.layerId?a.editable?d=a.layerId:c=a.layerId:(d=a.lastSelectedId,this.layerInfosObj&&(b=this.layerInfosObj.getLayerInfoById(d))&&b.layerObject&&(this._checkEditCapabilities(b.layerObject)||(d=null)),c=a.currentSelectedLayerId);c&&(a=this._statisticsLayerTable.getRows(),f.forEach(a,m.hitch(this,function(a){a.layerNameDropDown&&a.layerNameDropDown.get("value")===c&&this._statisticsLayerTable.deleteRow(a)})),this._layerNameStore.remove(c));d&&""!==d&&(b=this.layerInfosObj.getLayerInfoById(d))&&
b.layerObject&&(b=b.layerObject,this._layerNameStore.put({name:b.name,value:d,geometryType:b.geometryType}));this._updateLayerNameOptions()},resetAddNewStatisticsDropdown:function(){var a,b,d,c,k;if(a=l(".simple-table-field.field",this._statisticsLayerTable.domNode))a[0]&&(b=u.getComputedStyle(a[0])),a[1]&&(d=u.getComputedStyle(a[1])),a[2]&&(c=u.getComputedStyle(a[2]));a=l(".esriCTLayerNameDropdown",this._statisticsLayerTable.domNode);f.forEach(a,m.hitch(this,function(a){(a=l(".dijitReset.dijitInline.dijitSelectLabel.dijitValidationTextBoxLabel",
a))&&a[0]&&(k=this.showActionButtonsInColumn?59:30,a[0].style.width=parseInt(b.width,10)-k+"px")}));a=l(".esriCTStatisticsTypeDropdown",this._statisticsLayerTable.domNode);f.forEach(a,m.hitch(this,function(a){(a=l(".dijitReset.dijitInline.dijitSelectLabel.dijitValidationTextBoxLabel",a))&&a[0]&&(k=this.showActionButtonsInColumn?59:30,a[0].style.width=parseInt(d.width,10)-k+"px")}));a=l(".esriCTStatisticsFieldDropdown",this._statisticsLayerTable.domNode);f.forEach(a,m.hitch(this,function(a){(a=l(".dijitReset.dijitInline.dijitSelectLabel.dijitValidationTextBoxLabel",
a))&&a[0]&&(k=this.showActionButtonsInColumn?59:30,a[0].style.width=parseInt(c.width,10)-k+"px")}))},_resetLayerNameWidth:function(a){var b,d;(b=l(".simple-table-field.field",this._statisticsLayerTable.domNode))&&b[0]&&(d=u.getComputedStyle(b[0]));a=l(".dijitReset.dijitInline.dijitSelectLabel.dijitValidationTextBoxLabel",a.layerNameDropDown.domNode);b=this.showActionButtonsInColumn?59:30;a&&a[0]&&(a[0].style.width=parseInt(d.width,10)-b+"px")},_resetStatisticsTypeWidth:function(a){var b,d;(d=l(".simple-table-field.field",
this._statisticsLayerTable.domNode))&&d[1]&&(b=u.getComputedStyle(d[1]));a=l(".dijitReset.dijitInline.dijitSelectLabel.dijitValidationTextBoxLabel",a.statisticsTypeDropdown.domNode);d=this.showActionButtonsInColumn?59:30;a&&a[0]&&(a[0].style.width=parseInt(b.width,10)-d+"px")},_resetLayerFieldWidth:function(a){var b,d;(b=l(".simple-table-field.field",this._statisticsLayerTable.domNode))&&b[2]&&(d=u.getComputedStyle(b[2]));a=l(".dijitReset.dijitInline.dijitSelectLabel.dijitValidationTextBoxLabel",
a.layerFieldDropdown.domNode);b=this.showActionButtonsInColumn?59:30;a&&a[0]&&(a[0].style.width=parseInt(d.width,10)-b+"px")}})})},"widgets/CostAnalysis/setting/ProjectCost":function(){define("dojo/_base/declare jimu/BaseWidget dojo/Evented dijit/_WidgetsInTemplateMixin dojo/text!./ProjectCost.html dojo/_base/lang dojo/on jimu/dijit/SimpleTable dojo/query dijit/form/ValidationTextBox dojo/dom-construct dijit/form/Select dojo/_base/array dojo/store/Memory".split(" "),function(w,v,x,r,f,l,h,c,p,g,t,
m,a,b){return w([v,x,r],{templateString:f,baseClass:"jimu-widget-cost-analysis-project-cost-settings",_costFieldStore:null,postCreate:function(){this.inherited(arguments);this._handleClickEvents()},_setConfig:function(){this.config&&this.config.projectCostSettings&&0<this.config.projectCostSettings.length&&a.forEach(this.config.projectCostSettings,l.hitch(this,function(a){this._addProjectCostLayerRow(a)}))},startup:function(){this.inherited(arguments);this._createProjectCostFieldTable();this._createProjectCostTypeFieldStore();
this._setConfig()},getConfig:function(){var b,c;b=this._projectCostTable.getRows();c=[];a.some(b,l.hitch(this,function(a){c.push({label:a.projectCostLabelTextBox.getValue(),type:a.projectCostTypeDropdown.getValue(),value:a.projectCostValueTextBox.getValue()})}));return c},validateProjectCostData:function(){var a,b;a=this._projectCostTable.getRows();for(var c in a){b=a[c];if(!b.projectCostLabelTextBox.isValid())return this._setErrorMessage(b.projectCostLabelTextBox,this.nls.projectCostSettings.invalidProjectCostMessage),
{isValid:!1};if(!b.projectCostValueTextBox.isValid())return this._setErrorMessage(b.projectCostValueTextBox,this.nls.projectCostSettings.invalidProjectCostMessage),{isValid:!1}}return{isValid:!0}},_setErrorMessage:function(a,b){a.set("state","Error");a.set("invalidMessage",b);a.focus();a.isValid()},_handleClickEvents:function(){this.own(h(this.btnAddProjectCostNode,"click",l.hitch(this,function(){this._addProjectCostBtnClicked()})));this.own(h(this.btnCrossNode,"click",l.hitch(this,function(){this._deleteLayerRow()})))},
_createProjectCostFieldTable:function(){this._projectCostTable=new c({fields:[{name:"editable",title:this.nls.common.label,type:"empty",editable:!1,width:"35%"},{name:"field",title:this.nls.common.type,type:"empty",editable:!1,width:"20%"},{name:"field",title:this.nls.projectCostSettings.additionalCostValueColumnHeader,type:"empty",editable:!0,width:"35%"},{name:"actions",title:this.nls.common.actions,width:"10%",type:"actions",actions:["up","down","delete"]}],selectable:!1,autoHeight:!0});this._projectCostTable.placeAt(this.projectCostTableNode);
this._projectCostTable.startup()},_addProjectCostBtnClicked:function(){this._addProjectCostLayerRow()},_addProjectCostLayerRow:function(a){var b,d;b=this._projectCostTable.addRow({});if(d=p(".simple-table-cell",b.tr))b=b.tr,this._addProjectCostLabelTextBox(d[0],b,a),this._addProjectCostTypeDropdown(d[1],b,a),this._addProjectCostValueTextBox(d[2],b,a)},_addProjectCostLabelTextBox:function(a,b,c){a=t.create("div",{"class":"esriCTTextBoxContainer"},a);b.projectCostLabelTextBox=new g({"class":"esriCTProjectCostLabelTextbox esriCTAddProjectCostTableNode",
invalidMessage:"Invalid Entry for project cost"},a);b.projectCostLabelTextBox.startup();c&&c.label&&b.projectCostLabelTextBox.set("value",c.label);b.projectCostLabelTextBox.validator=l.hitch(this,this._validateProjectCostLabelFields)},_validateProjectCostLabelFields:function(a){return""===l.trim(a)?!1:!0},_addProjectCostTypeDropdown:function(a,b,c){a=t.create("div",{"class":"esriCTProjectCostTypeDropDownContainer esriCTAddProjectCostTableNode"},a);b.projectCostTypeDropdown=new m({name:"layerSelect",
store:this._projectCostFieldStore,labelAttr:"name","class":"esriCTProjectCostTypeDropdown"},a);c&&c.type&&b.projectCostTypeDropdown.set("value",c.type);b.projectCostTypeDropdown.startup()},_addProjectCostValueTextBox:function(a,b,c){a=t.create("div",{"class":"esriCTProjectCostTextBoxContainer esriCTAddProjectCostTableNode"},a);b.projectCostValueTextBox=new g({"class":"esriCTProjectCostLabelTextbox",trim:!0,invalidMessage:"Invalid Entry for project cost"},a);b.projectCostValueTextBox.startup();c&&
c.value&&b.projectCostValueTextBox.set("value",c.value);b.projectCostValueTextBox.validator=l.hitch(this,this._validateProjectCostValueFields)},_validateProjectCostValueFields:function(a){a=Number(a);return""===a||isNaN(a)||"0"===a||0===a?!1:!0},_deleteLayerRow:function(){var b=this._projectCostTable.getRows(),c=this._projectCostTable.getData();a.forEach(c,l.hitch(this,function(a,c){a.editable&&this._projectCostTable.deleteRow(b[c])}))},_createProjectCostTypeFieldStore:function(){var a;a=[];a.push({name:"+",
value:"+"});a.push({name:"*",value:"*"});a.push({name:"-",value:"_"});a.push({name:"%",value:"%"});this._projectCostFieldStore=new b({idProperty:"value",data:a})}})})},"widgets/CostAnalysis/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/CostAnalysis/setting/GeneralSettings.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"esriCTFieldContainer esriCTFullWidth"\x3e\r\n    \x3cdiv class\x3d"esriCTGeneralSettingsLabel esriCTEllipsis esriCTVerticalCenterAlignLabel" title\x3d"${nls.generalSettings.measurementUnitLabel}"\x3e${nls.generalSettings.measurementUnitLabel}:\x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTDropDownContainer"\x3e\r\n      \x3cselect class\x3d"esriCTFullWidth" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"measurementUnitInputNode"\x3e\r\n        \x3coption value\x3d"feet"\x3e${nls.units.feet.label}\x3c/option\x3e\r\n        \x3coption value\x3d"meters"\x3e${nls.units.meters.label}\x3c/option\x3e\r\n        \x3coption value\x3d"miles"\x3e${nls.units.miles.label}\x3c/option\x3e\r\n        \x3coption value\x3d"yards"\x3e${nls.units.yards.label}\x3c/option\x3e\r\n        \x3coption value\x3d"kilometers"\x3e${nls.units.kilometers.label}\x3c/option\x3e\r\n      \x3c/select\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"esriCTFieldContainer esriCTFullWidth"\x3e\r\n    \x3cdiv class\x3d"esriCTGeneralSettingsLabel esriCTEllipsis esriCTVerticalCenterAlignLabel" title\x3d"${nls.generalSettings.currencyLabel}"\x3e${nls.generalSettings.currencyLabel}:\x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTDropDownContainer"\x3e\r\n      \x3cdiv class\x3d"esriCTFullWidth" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"maxLength:\'3\'" data-dojo-attach-point\x3d"currencyInputNode" trim\x3d"true"\r\n        required\x3d"true"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"esriCTFieldContainer esriCTFullWidth"\x3e\r\n    \x3cdiv class\x3d"esriCTGeneralSettingsLabel esriCTEllipsis esriCTVerticalCenterAlignLabel" title\x3d"${nls.generalSettings.roundCostLabel}"\x3e${nls.generalSettings.roundCostLabel}:\x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTDropDownContainer"\x3e\r\n      \x3cselect class\x3d"esriCTFullWidth" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"roundCostInputNode"\x3e\r\n        \x3coption value\x3d"twoDecimalPoint"\x3e${nls.generalSettings.roundCostValues.twoDecimalPoint}\x3c/option\x3e\r\n        \x3coption value\x3d"nearestWholeNumber"\x3e${nls.generalSettings.roundCostValues.nearestWholeNumber}\x3c/option\x3e\r\n        \x3coption value\x3d"nearestTen"\x3e${nls.generalSettings.roundCostValues.nearestTen}\x3c/option\x3e\r\n        \x3coption value\x3d"nearestHundred"\x3e${nls.generalSettings.roundCostValues.nearestHundred}\x3c/option\x3e\r\n        \x3coption value\x3d"nearestThousand"\x3e${nls.generalSettings.roundCostValues.nearestThousand}\x3c/option\x3e\r\n        \x3coption value\x3d"nearestTenThousands"\x3e${nls.generalSettings.roundCostValues.nearestTenThousands}\x3c/option\x3e\r\n      \x3c/select\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cfieldset class\x3d"esriCTProjectOutputSettingsFieldset"\x3e\r\n    \x3clegend class\x3d"esriCTProjectOutputSettingsLegend" title\x3d"${nls.generalSettings.projectOutputSettings}"\x3e\r\n      ${nls.generalSettings.projectOutputSettings} \x3c/legend\x3e\r\n    \x3cdiv class\x3d"esriCTFullWidth esriCTFullHeight esriCTProjectSettingsContainer"\x3e\r\n      \x3cdiv class\x3d"esriCTProjectSettingsOutputLeftContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTProjectAreaTypeContainer esriCTVerticalCenterAlignLabel esriCTEllipsis" title\x3d"${nls.generalSettings.typeOfProjectAreaLabel}"\x3e${nls.generalSettings.typeOfProjectAreaLabel}:\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTProjectAreaTypeInputContainer"\x3e\r\n          \x3cdiv class\x3d""\x3e\r\n            \x3cselect class\x3d"esriCTFullWidth" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"projectAreaTypeInputNode"\x3e\r\n              \x3coption value\x3d"outline"\x3e${nls.generalSettings.projectAreaType.outline}\x3c/option\x3e\r\n              \x3coption value\x3d"buffer"\x3e${nls.generalSettings.projectAreaType.buffer}\x3c/option\x3e\r\n            \x3c/select\x3e\r\n          \x3c/div\x3e\r\n\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTProjectSettingsOutputRightContainer esriCTHidden" data-dojo-attach-point\x3d"projectSettingsOutputRightContainerNode"\x3e\r\n        \x3cdiv class\x3d"esriCTBufferDistanceLabelContainer"\x3e\r\n          \x3cdiv class\x3d"esriCTBufferDistanceLabel esriCTVerticalCenterAlignLabel esriCTEllipsis" title\x3d"${nls.generalSettings.bufferDistanceLabel}"\x3e${nls.generalSettings.bufferDistanceLabel}:\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTBufferDistanceInputContainer"\x3e\r\n          \x3cdiv class\x3d"esriCTFullWidth" data-dojo-type\x3d"dijit/form/NumberTextBox" disabled\x3dtrue data-dojo-attach-point\x3d"bufferDistanceInputNode"\r\n            trim\x3d"true" required\x3d"true" data-dojo-props\x3d""\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTProjectMeasurementUnitContainer"\x3e\r\n          \x3cdiv class\x3d"esriCTVerticalCenterAlignLabel esriCTEllipsis esriCTBufferDistanceUnit" data-dojo-attach-point\x3d"bufferDistanceUnit"\x3e${nls.units.feet.label}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/fieldset\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/ProjectSettings.html":'\x3cdiv\x3e\r\n\t\x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n\t\t\x3clegend class\x3d"esriCTFieldSetLegend"\x3e\r\n\t\t\t${nls.projectSettings.costingGeometrySectionTitle}\r\n\t\t\x3c/legend\x3e\r\n\t\t\x3cdiv class\x3d"esriCTNote esriCTFullWidth"\x3e${nls.projectSettings.costingGeometrySectionNote}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"esriCTRowContainer esriCTFullWidth"\x3e\r\n\t\t\t\x3c!--Costing Geometry Layer Label--\x3e\r\n\t\t\t\x3cdiv title\x3d"${nls.projectSettings.costingGeometryLayerLabel}" class\x3d"esriCTLabelContainer esriCTEllipsis"\x3e\r\n\t\t\t\t${nls.projectSettings.costingGeometryLayerLabel}:\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c!--Costing Geometry Later Dropdown--\x3e\r\n\t\t\t\x3cselect class\x3d"esriCTDropDownContainer" data-dojo-attach-point\x3d"costingGeometryLayerDropDown" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n\t\t\x3c/select\x3e\r\n\t\t\x3cdiv class\x3d"esriCTHelpIcon" data-dojo-attach-point\x3d"costingGeometryHelp"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"esriCTRowContainer esriCTFullWidth"\x3e\r\n\t\t\t\x3c!--Field to Label Geography Label--\x3e\r\n\t\t\t\x3cdiv title\x3d"${nls.projectSettings.fieldLabelGeography}" class\x3d"esriCTLabelContainer esriCTEllipsis"\x3e\r\n\t\t\t\t${nls.projectSettings.fieldLabelGeography}:\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c!--Field to Label Geography Dropdown--\x3e\r\n\t\t\t\x3cselect class\x3d"esriCTDropDownContainer" data-dojo-attach-point\x3d"fieldToLabelGeography" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n\t\t\x3c/select\x3e\r\n\t\t\x3cdiv class\x3d"esriCTHelpIcon" data-dojo-attach-point\x3d"fieldToLabelGeographyHelp"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/fieldset\x3e\r\n\t\x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n\t\t\x3clegend class\x3d"esriCTFieldSetLegend"\x3e\r\n\t\t\t${nls.projectSettings.projectTableSectionTitle}\r\n\t\t\x3c/legend\x3e\r\n\t\t\x3cdiv class\x3d"esriCTNote esriCTFullWidth"\x3e${nls.projectSettings.projectTableSectionNote}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"esriCTRowContainer esriCTFullWidth"\x3e\r\n\t\t\t\x3c!--Project Assets Table Label--\x3e\r\n\t\t\t\x3cdiv title\x3d"${nls.projectSettings.projectAssetsTableLabel}" class\x3d"esriCTLabelContainer esriCTEllipsis"\x3e\r\n\t\t\t\t${nls.projectSettings.projectAssetsTableLabel}:\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c!--Project Assets Table Dropdown--\x3e\r\n\t\t\t\x3cselect class\x3d"esriCTDropDownContainer" data-dojo-attach-point\x3d"projectAssetsTable" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n\t\t\x3c/select\x3e\r\n\t\t\t\x3cdiv class\x3d"esriCTHelpIcon" data-dojo-attach-point\x3d"projectAssetsTableHelp"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"esriCTRowContainer esriCTFullWidth"\x3e\r\n\t\t\t\x3c!--Project Multiplier Additional Cost Table Label--\x3e\r\n\t\t\t\x3cdiv title\x3d"${nls.projectSettings.projectMultiplierTableLabel}" class\x3d"esriCTLabelContainer esriCTEllipsis"\x3e\r\n\t\t\t\t${nls.projectSettings.projectMultiplierTableLabel}:\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c!--Project Multiplier Additional Cost Table Dropdown--\x3e\r\n\t\t\t\x3cselect class\x3d"esriCTDropDownContainer" data-dojo-attach-point\x3d"projectMultiplierTable" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n\t\t\x3c/select\x3e\r\n\t\t\t\x3cdiv class\x3d"esriCTHelpIcon" data-dojo-attach-point\x3d"projectMultiplierTableHelp"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"esriCTRowContainer esriCTFullWidth"\x3e\r\n\t\t\t\x3c!--Project Layer Label--\x3e\r\n\t\t\t\x3cdiv title\x3d"${nls.projectSettings.projectLayerLabel}" class\x3d"esriCTLabelContainer esriCTEllipsis"\x3e\r\n\t\t\t\t${nls.projectSettings.projectLayerLabel}:\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c!--Project Layer Dropdown--\x3e\r\n\t\t\t\x3cselect class\x3d"esriCTDropDownContainer esriCTProjectLayerDropdown" data-dojo-attach-point\x3d"projectLayerDropDown" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n\t\t\x3c/select\x3e\r\n\t\t\t\x3cdiv class\x3d"esriCTHelpIcon" data-dojo-attach-point\x3d"projectLayerHelp"\x3e\x3c/div\x3e\r\n\t\t\t\x3c!--Configure Fields Settings--\x3e\r\n\t\t\t\x3cdiv class\x3d"esriCTConfigureFieldsContainer"\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3c!-- Point layer centroid starts --\x3e\r\n\t\t\x3cdiv class\x3d"esriCTRowContainer esriCTFullWidth"\x3e\r\n\t\t\t\x3cdiv title\x3d"${nls.projectSettings.pointLayerCentroidLabel}" class\x3d"esriCTLabelContainer esriCTEllipsis"\x3e\r\n\t\t\t\t${nls.projectSettings.pointLayerCentroidLabel}:\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cselect class\x3d"esriCTDropDownContainer" disabled\x3dtrue data-dojo-attach-point\x3d"pointLayerCentroidDropDown"\r\n\t\t\tdata-dojo-type\x3d"dijit/form/Select"\x3e\r\n\t\t\t\x3c/select\x3e\r\n\t\t\t\x3cdiv class\x3d"esriCTHelpIcon" data-dojo-attach-point\x3d"pointLayerCentroidHelp"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3c!-- Point layer centroid ends --\x3e\r\n\t\t\x3c!--Configured Fields Table--\x3e\r\n\t\t\x3cdiv class\x3d"esriCTConfiguredFieldsTable esriCTHidden" data-dojo-attach-point\x3d"configuredFieldsTable"\x3e\x3c/div\x3e\r\n\t\x3c/fieldset\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/CostAnalysis/setting/LayerSettings.html":'\x3cdiv class\x3d"esriCTTabNode"\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"layerSettingsMainContainer"\x3e\r\n    \x3cdiv class\x3d"esriCTLayerSettingsTableNode" data-dojo-attach-point\x3d"layerSettingsTableNode"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTHidden esriCTNoAssetLayersAvailable" data-dojo-attach-point\x3d"noAssetLayersAvailable"\x3e\r\n      ${nls.layerSettings.noAssetLayersAvailable}\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/AttributeSettings.html":'\x3cdiv class\x3d"esriCTMainAttributeSettingsContainer"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"attributeSettingsAddFields" \r\n                class\x3d"esriCTBtnAddField esriCTEllipsis"\x3e\r\n                    \x3cspan class\x3d"esriCTBtnAddIcon"\x3e\x3c/span\x3e\r\n                    \x3cspan class\x3d"esriCTBtnAddLabel esriCTEllipsis"\x3e${nls.layerSettings.addFieldLabelTitle}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv\x3e\r\n        \x3cdiv class\x3d"esriCTAttributeSettingsTable" data-dojo-attach-point\x3d"attributeSettingsTableNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/CostingInfo.html":'\x3cdiv class\x3d"esriCTTabNode"\x3e\r\n    \x3c!--Add Layers section --\x3e\r\n    \x3cdiv class\x3d"esriCTTabContainer row"\x3e\r\n        \x3cdiv class\x3d"esriCTManageScenarioButtonContainer"\x3e\r\n            \x3cdiv class\x3d"esriCTMangeScenarios"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"btnManageScenarios" class\x3d"esriCTBtnAddSection esriCTEllipsis"\x3e\r\n                    \x3cspan class\x3d"esriCTBtnAddIcon"\x3e\x3c/span\x3e\r\n                    \x3cspan class\x3d"esriCTBtnAddLabel esriCTEllipsis"\x3e${nls.costingInfo.manageScenariosTitle}\x3c/span\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHidden esriCTNoEditableLayersAvailable" data-dojo-attach-point\x3d"noEditableLayersAvailable"\x3e\r\n            ${nls.costingInfo.noEditableLayersAvailable}\r\n        \x3c/div\x3e\r\n        \x3c!-- Update cost equation checkbox parent node --\x3e\r\n        \x3cdiv class\x3d"esriCTUpdateCostCheckBoxParentContainer esriCTHidden" data-dojo-attach-point\x3d"updateCostEquationChkContainer"\x3e\r\n            \x3c!-- checkbox container --\x3e\r\n            \x3cdiv class\x3d"esriCTUpdateCheckBoxContainer"\x3e\r\n                \x3c!-- checkbox --\x3e\r\n                \x3cinput id\x3d"esrict-update-costequation-check" data-dojo-attach-point\x3d"updateCostEquationCheckBox"\r\n                    data-dojo-type\x3d"dijit/form/CheckBox" type\x3d"checkbox" checked\x3d"false" /\x3e\r\n                \x3cspan\x3e${nls.costingInfo.updateProjectCostCheckboxLabel}\x3c/span\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTUpdateEquationHint esriCTNote"\x3e${nls.costingInfo.updateProjectCostEquationHint}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"costingTemplateContainer"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/ManageScenarios.html":'\x3cdiv class\x3d"esriCTMainConfigurationContainer"\x3e\r\n    \x3cdiv\x3e\r\n        \x3cdiv class\x3d"esriCTPopupFields esriCTEllipsis"\x3e ${nls.costingInfo.scenarioNameLabel}\x3c/div\x3e\r\n        \x3cdiv style\x3d"width:180px" data-dojo-attach-point\x3d"scenarioNameNode" required\x3d"true" data-dojo-type\x3d"dijit/form/ValidationTextBox"\x3e\x3c/div\x3e\r\n        \x3cdiv style\x3d"width:120px" class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"addBtnNode" title\x3d"${nls.costingInfo.addBtnLabel}"\x3e${nls.costingInfo.addBtnLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv\x3e\r\n        \x3cdiv class\x3d"esriCTAddScenarioNameTable" data-dojo-attach-point\x3d"addScenarioNameTableNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/CostingTemplate.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"esriCTLayerNameContainer"\x3e\r\n      \x3cdiv class\x3d"esriCTLayerLabel esriCTEllipsis" data-dojo-attach-point\x3d"layerName"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"btnCostingTemplateNode" class\x3d"esriCTBtnAddSection esriCTEllipsis"\x3e\r\n        \x3cspan class\x3d"esriCTBtnAddIcon"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"esriCTBtnAddLabel esriCTEllipsis"\x3e ${nls.costingInfo.addCostingTemplateLabel}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"esriCTAddLayerTableNode" data-dojo-attach-point\x3d"addLayerTableNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/EditCostEquation.html":'\x3cdiv class\x3d"esriCTMainConfigurationContainer"\x3e\r\n  \x3cdiv\x3e\r\n    \x3cdiv class\x3d"esriCTPopupFields esriCTEllipsis"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv\x3e\r\n    \x3cdiv\x3e\r\n      \x3cdiv class\x3d"esriCTFieldContainer esriCTFullWidth"\x3e\r\n        \x3cdiv class\x3d"esriCTEditCostEquationLabel esriCTEllipsis esriCTVerticalCenterAlignLabel"\x3e\r\n          ${nls.costingInfo.geographyTitle}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTCostEquationFieldContainer"\x3e\r\n          \x3cdiv class\x3d"esriCTFullWidth" data-dojo-type\x3d"dijit/form/TextBox" disabled\x3dtrue data-dojo-attach-point\x3d"geographyValue"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTFieldContainer esriCTFullWidth"\x3e\r\n        \x3cdiv class\x3d"esriCTEditCostEquationLabel esriCTEllipsis esriCTVerticalCenterAlignLabel"\x3e\r\n          ${nls.costingInfo.scenarioTitle}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTCostEquationFieldContainer"\x3e\r\n          \x3cdiv class\x3d"esriCTFullWidth" data-dojo-type\x3d"dijit/form/TextBox" disabled\x3dtrue data-dojo-attach-point\x3d"scenarioValue"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTFieldContainer esriCTFullWidth"\x3e\r\n        \x3cdiv class\x3d"esriCTEditCostEquationLabel esriCTEllipsis esriCTVerticalCenterAlignLabel "\x3e\r\n          ${nls.costingInfo.costEquationTitle}\x3c/div\x3e\r\n          \x3cdiv class\x3d"esriCTFullWidth esriCTCostEquationInput" spellcheck\x3d"false" data-dojo-type\x3d"dijit/form/Textarea" data-dojo-attach-point\x3d"costEquationValue"\r\n            required\x3d"true"\x3e\r\n          \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTFullWidth"\x3e\r\n      \x3cdiv class\x3d"esriCTHint" data-dojo-attach-point\x3d"costEquationHint"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/StatisticsSettings.html":'\x3cdiv class\x3d"esriCTTabNode"\x3e\r\n    \x3cdiv class\x3d"esriCTTabContainer row"\x3e\r\n        \x3cdiv\x3e\r\n            \x3c!--Add New Statistics button--\x3e\r\n            \x3cdiv class\x3d"esriCTStatisticsContainer" data-dojo-attach-point\x3d"btnAddStatisticsNodeWrapper"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"btnAddStatisticsNode" class\x3d"esriCTBtnStatisticsAddSection"\x3e\r\n                    \x3cspan class\x3d"esriCTBtnAddStatisticsIcon"\x3e\x3c/span\x3e\r\n                    \x3cspan class\x3d"esriCTBtnStatisticsAddLabel"\x3e ${nls.statisticsSettings.addStatisticsLabel}\x3c/span\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTAddLayerTableNode" data-dojo-attach-point\x3d"statisticsLayerTableNode"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTHidden esriCTNoEditableLayersAvailable" data-dojo-attach-point\x3d"noEditableLayersAvailable"\x3e\r\n                ${nls.costingInfo.noEditableLayersAvailable}\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"additionalProjectCostWrapper"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Add/delete/reorder buttons--\x3e\r\n    \x3cdiv class\x3d"esriCTStatisticsButtonParentDiv"\x3e\r\n        \x3cdiv class\x3d"esriCTAddStatisticsIcon esriCTStatisticsButtons" data-dojo-attach-point\x3d"btnAddNode" title\x3d"${nls.statisticsSettings.addNewStatisticsText}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDeleteStatisticsIcon esriCTStatisticsButtons" data-dojo-attach-point\x3d"btnCrossNode"\r\n            title\x3d"${nls.statisticsSettings.deleteStatisticsText}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTStatisticsUpIcon esriCTStatisticsButtons" data-dojo-attach-point\x3d"btnUpNode" title\x3d"${nls.statisticsSettings.moveStatisticsUpText}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTStatisticsDownIcon esriCTStatisticsButtons" data-dojo-attach-point\x3d"btnDownNode" title\x3d"${nls.statisticsSettings.moveStatisticsDownText}"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/ProjectCost.html":'\x3cdiv\x3e\r\n    \x3c!--Add Addtional Project cost button--\x3e\r\n    \x3cdiv class\x3d"esriCTProjectCostContainer" data-dojo-attach-point\x3d"btnAddProjectCostNodeWrapper"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"btnAddProjectCostNode" class\x3d"esriCTBtnProjectCostAddSection"\x3e\r\n            \x3cspan class\x3d"esriCTBtnAddProjectCostIcon"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"esriCTBtnProjectCostAddLabel"\x3e ${nls.projectCostSettings.addProjectCostLabel} \x3c/span\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTProjectCostTableWrapper" data-dojo-attach-point\x3d"projectCostTableWrapper"\x3e\r\n        \x3cdiv class\x3d"esriCTProjectCostTableNode" data-dojo-attach-point\x3d"projectCostTableNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Add/delete/reorder buttons--\x3e\r\n    \x3cdiv class\x3d"esriCTStatisticsButtonParentDiv"\x3e\r\n        \x3cdiv class\x3d"esriCTAddStatisticsIcon esriCTStatisticsButtons" data-dojo-attach-point\x3d"btnAddNode"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDeleteStatisticsIcon esriCTStatisticsButtons" data-dojo-attach-point\x3d"btnCrossNode"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTStatisticsUpIcon esriCTStatisticsButtons" data-dojo-attach-point\x3d"btnUpNode"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTStatisticsDownIcon esriCTStatisticsButtons" data-dojo-attach-point\x3d"btnDownNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/Setting.html":'\x3cdiv style\x3d"width: 100%;height: 100%;"\x3e\r\n\t\x3cdiv class\x3d"esriCTMainConfigurationContainer"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"configurationTabParentContainer"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"generalSettingsNode" class\x3d"esriCTTabNode"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"projectSettingsNode" class\x3d"esriCTTabNode"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"layerSettingsNode" class\x3d"esriCTTabNode"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"costingInfoNode" class\x3d"esriCTTabNode"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"statisticsSettingsNode" class\x3d"esriCTTabNode"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/css/style.css":".jimu-widget-cost-analysis-general-settings .esriCTFieldContainer {float: left; padding: 0px 0px 20px 0px;}.jimu-widget-cost-analysis-general-settings .esriCTDropDownContainer {width: 75%; float: right;}.jimu-widget-cost-analysis-general-settings .esriCTGeneralSettingsLabel {width: 25%; float: left; padding-right: 5px;}.jimu-widget-cost-analysis-general-settings .esriCTProjectOutputSettingsFieldset {margin: 20px 0px 0px 0px; border: 1px solid #D2DAE2;}.jimu-widget-cost-analysis-general-settings .esriCTProjectOutputSettingsLegend {margin-left: 10px; font-weight: bold;}.jimu-widget-cost-analysis-general-settings .esriCTProjectFieldContainer {float: left;}.jimu-widget-cost-analysis-general-settings .esriCTBufferDistanceLabel {float: right; width: 100%; text-align: center; padding-left: 5px; max-width: 214px;}.jimu-widget-cost-analysis-general-settings .esriCTVerticalCenterAlignLabel {line-height: 30px;}.jimu-widget-cost-analysis-general-settings .esriCTProjectSettingsContainer {overflow: hidden; padding: 15px;}.jimu-widget-cost-analysis-general-settings .esriCTProjectAreaTypeContainer {float: left; width: 48%; max-width: 214px; padding-right: 5px;}.jimu-widget-cost-analysis-general-settings .esriCTProjectAreaTypeInputContainer {width: 52%; float: left;}.jimu-widget-cost-analysis-general-settings .esriCTBufferDistanceLabelContainer {float: left; width: 50%; padding-right: 5px;}.jimu-widget-cost-analysis-general-settings .esriCTBufferDistanceInputContainer {float: left; width: 20%;}.jimu-widget-cost-analysis-general-settings .esriCTProjectMeasurementUnitContainer {width: 30%; float: left; padding-left: 5px;}.jimu-widget-cost-analysis-general-settings .esriCTProjectSettingsOutputRightContainer {float: right; width: 50%}.jimu-widget-cost-analysis-general-settings .esriCTProjectSettingsOutputLeftContainer {float: left; width: 50%;}.jimu-widget-cost-analysis-general-settings .esriCTBufferDistanceUnit {max-width: 130px;}.esriRtl .jimu-widget-cost-analysis-settings .esriCTTabNode {padding-left: 20px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTFieldContainer {float: right; padding: 0px 0px 20px 0px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTTabNode {padding-left: 20px; padding-right: 0px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTGeneralSettingsLabel {float: right; padding-right: 0px; padding-left: 5px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTProjectSettingsOutputLeftContainer {float: right;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTProjectSettingsOutputRightContainer {float: left;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTProjectAreaTypeContainer {float: right; padding-right: 0px; padding-left: 5px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTBufferDistanceLabelContainer {float: right; padding-right: 0px; padding-left: 5px; text-align: center;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTBufferDistanceInputContainer {float: right;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTProjectMeasurementUnitContainer {float: right; padding-left: 0px; padding-right: 5px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTProjectOutputSettingsLegend {margin-left: 0px; margin-right: 10px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTBufferDistanceLabel {padding-right: 5px; padding-left: 0px;}.jimu-widget-cost-analysis-project-settings {width: 100%; float: left;}.jimu-widget-cost-analysis-project-settings .esriCTFieldSet {height: auto; width: 100%; margin-bottom: 10px; padding: 20px 20px 0 20px; border: 1px solid #D2DAE2;}.jimu-widget-cost-analysis-project-settings .esriCTFieldSetLegend {font-weight: bold;}.jimu-widget-cost-analysis-project-settings .esriCTNote,.jimu-widget-cost-analysis-costing-info .esriCTNote {padding-bottom: 20px; font-size: 12px; color: #a0acbf; font-style: oblique;}.jimu-widget-cost-analysis-project-settings .esriCTHelpIcon {height: 30px; width: 20px; background-repeat: no-repeat; background-position: center center; background-image: url(images/help.png); display: inline-block; vertical-align: top; margin: 0 5px; cursor: pointer;}.jimu-widget-cost-analysis-project-settings .esriCTRowContainer {margin-bottom: 20px; float: left;}.jimu-widget-cost-analysis-project-settings .esriCTLabelContainer {width: 30%; float: left; line-height: 30px; padding: 0 10px 0 0;}.jimu-widget-cost-analysis-project-settings .esriCTDropDownContainer {width: calc( 70% - 30px); float: left; box-sizing: border-box;}.jimu-widget-cost-analysis-project-settings .esriCTConfigureFieldsContainer {width: 35%; float: left; padding: 0 10px;}.jimu-widget-cost-analysis-project-settings .esriCTConfigureFieldsLabel {width: calc(100% - 36px); line-height: 30px; text-align: right; padding: 0 0 0 10px; float: right;}.jimu-widget-cost-analysis-project-settings .esriCTConfigureFieldsCheckBox {margin: 5px 10px; float: right;}.jimu-widget-cost-analysis-project-settings .esriCTConfiguredFieldsTable {width: 70%; float: right; margin-bottom: 20px;}.claro .jimu-widget-cost-analysis-project-settings .esriCTConfiguredFieldsTable .dijitSelect {height: 27px; margin-top: 1px; width: 99%; float: left;}.jimu-widget-cost-analysis-project-settings .esriCTProjectSettingsFieldsDropdown .dijitSelectLabel {text-align: left; overflow: hidden; width: 280px; float: left;}.claro .jimu-widget-cost-analysis-project-settings .dijitSelect .dijitInputField {overflow: hidden;}.jimu-widget-cost-analysis-project-settings .esriCTProjectLayerDropdown .dijitSelectLabel {text-align: left;}.esriRtl .jimu-widget-cost-analysis-project-settings .esriCTLabelContainer {float: right; padding: 0 0 0 10px;}.esriRtl .jimu-widget-cost-analysis-project-settings .esriCTDropDownContainer {float: right;}.esriRtl .jimu-widget-cost-analysis-project-settings .esriCTConfigureFieldsContainer {float: left;}.esriRtl .jimu-widget-cost-analysis-project-settings .esriCTConfigureFieldsCheckBox {float: left;}.esriRtl .jimu-widget-cost-analysis-project-settings .esriCTConfigureFieldsLabel {float: left; padding: 0 10px 0 0; text-align: left;}.esriRtl .jimu-widget-cost-analysis-project-settings .esriCTConfiguredFieldsTable {float: left;}.esriRtl .jimu-widget-cost-analysis-project-settings .esriCTProjectLayerDropdown .dijitSelectLabel, .esriRtl .jimu-widget-cost-analysis-project-settings .esriCTProjectSettingsFieldsDropdown .dijitSelectLabel {text-align: right;}.claro .jimu-widget-cost-analysis-layer-settings .esriCTLayerSettingsTableNode .dijitSelect {width: 99%; height: 27px; float: left;}.jimu-widget-cost-analysis-layer-settings .esriCTLayerSettingsFieldsDropdown .dijitSelectLabel {text-align: left; overflow: hidden; width: 213px;}.jimu-widget-cost-analysis-layer-settings .esriCTNoAssetLayersAvailable {color: red; font-style: italic; margin: 0 10px;}.jimu-widget-cost-analysis-layer-settings .esriCTDropDownContainer {float: left;}.jimu-widget-cost-analysis-layer-settings .esriCTFieldError {float: left; margin-left: 8px; line-height: 0; margin-top: 4px; cursor: pointer;}.jimu-widget-cost-analysis-layer-settings .esriCTAttributeSettingIcon {height: 16px; width: 16px; background-repeat: no-repeat; margin:auto; background-position: center center; background-image: url(images/attribute_settings.png);}.jimu-widget-cost-analysis-layer-settings .esriCTAttributeSettingDisableIcon {height: 16px; width: 16px; background-repeat: no-repeat; margin:auto; background-position: center center; background-image: url(images/attribute_settings_disable.png);}.esriRtl .jimu-widget-cost-analysis-layer-settings .esriCTFieldError {float: right; margin-right: 8px;}.esriRtl .claro .jimu-widget-cost-analysis-layer-settings .esriCTLayerSettingsTableNode .dijitSelect {float: right;}.esriRtl .jimu-widget-cost-analysis-layer-settings .esriCTLayerSettingsFieldsDropdown .dijitSelectLabel {text-align: right;}.jimu-widget-cost-analysis-costing-info .esriCTLayerLabel {padding-left: 0px; float: left; text-align: center; vertical-align: middle; padding-right: 10px; max-width: 60%;}.jimu-widget-cost-analysis-costing-info .esriCTBtnAddSection {display: inline-block; overflow: hidden; height: 20px; cursor: pointer; font-size: 13px; color: #538ec8;}.jimu-widget-cost-analysis-costing-info .esriCTBtnAddIcon {height: 100%; width: 14px; background-repeat: no-repeat; background-position: center center; background-image: url(images/add.png); display: inline-block; vertical-align: top;}.jimu-widget-cost-analysis-costing-info .esriCTBtnAddLabel {line-height: 20px;}.jimu-widget-cost-analysis-costing-info .esriCTTabContainer {width: 100%; float: left; margin-bottom: 20px;}.jimu-widget-cost-analysis-costing-info .esriCTMangeScenarios {float: right;}.jimu-widget-cost-analysis-costing-info .esriCTLayerNameContainer {float: left; width: 100%;}.jimu-widget-cost-analysis-costing-info .esriCTManageScenarioButtonContainer {float: right; width: 50%;}.jimu-widget-cost-analysis-costing-info .esriCTLayerTableWrapper {padding-bottom: 20px;}.jimu-widget-cost-analysis-costing-info .esriCTUpdateCostCheckBoxParentContainer {clear: both; width: 100%;}.jimu-widget-cost-analysis-costing-info .esriCTUpdateCheckBoxContainer {width: 100%; padding: 10px 0px 10px 0px;}.jimu-widget-cost-analysis-costing-info .esriCTUpdateEquationHint {width: 100%; padding: 0px 0px 10px 0px; float: left;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTUpdateEquationHint {float: right;}.claro .jimu-widget-cost-analysis-costing-info .esriCTAddLayerTableNode .dijitSelect,.claro .jimu-widget-cost-analysis-costing-info .esriCTAddProjectCostTableNode .dijitSelect {width: 100%; height: 28px; float: left;}.claro .jimu-widget-cost-analysis-costing-info .esriCTAddLayerTableNode .dijitTextBox .dijitInputInner,.claro .jimu-widget-cost-analysis-costing-info .esriCTAddProjectCostTableNode .dijitTextBox .dijitInputInner {height: 20px; float: left;}.claro .jimu-widget-cost-analysis-costing-info .esriCTAddLayerTableNode .dijitTextBox,.claro .jimu-widget-cost-analysis-costing-info .esriCTAddProjectCostTableNode .dijitTextBox {height: 26px; float: left;}.jimu-widget-cost-analysis-costing-info .esriCTHelpIcon {height: 36px; width: 20px; background-repeat: no-repeat; background-position: center center; background-image: url(images/help.png); display: inline-block; vertical-align: top; position: absolute; right: 5px;}.jimu-widget-cost-analysis-costing-info .esriCTDropDownContainer {float: left;}.jimu-widget-cost-analysis-edit-equation .esriCTFieldContainer {overflow: hidden; padding: 0px 0px 5px 0px;}.jimu-widget-cost-analysis-edit-equation .esriCTEditCostEquationLabel {width: 40%; float: left; padding-right: 5px;}.jimu-widget-cost-analysis-edit-equation .esriCTVerticalCenterAlignLabel {line-height: 30px;}.jimu-widget-cost-analysis-edit-equation .esriCTCostEquationFieldContainer {width: 60%; float: right;}.jimu-widget-cost-analysis-edit-equation .esriCTFullWidth {width: 100%;}.jimu-widget-cost-analysis-edit-equation .esriCTCostEquationInput {height: 70px !important;}.jimu-widget-cost-analysis-edit-equation .esriCTCostEquationError {border-color: red !important;}.jimu-widget-cost-analysis-edit-equation .esriCTHint {margin: 5px 5px 10px 0px; float: right; font-size: 12px; color: #a0acbf; font-style: oblique;}.jimu-widget-cost-analysis-costing-info .esriCTCostingTemplateFeatureTemplate .dijitSelectLabel {text-align: left; overflow: hidden; width: 140px;}.jimu-widget-cost-analysis-costing-info .esriCTCostingTemplateGeography .dijitSelectLabel {text-align: left; overflow: hidden; width: 140px;}.jimu-widget-cost-analysis-costing-info .esriCTCostingInfoScenarioOptions .dijitSelectLabel {text-align: left; overflow: hidden; width: 140px;}.claro .jimu-widget-cost-analysis-costing-info .esriCTAddLayerTableNode .dijitSelect {width: 99%;}.jimu-widget-cost-analysis-costing-info .jimu-icon-copy {background-image: url(images/copy.png); background-repeat: no-repeat; background-position: center center; width: 16px; height: 16px; padding-left: 10px; padding-right: 10px;}.jimu-widget-cost-analysis-manage-scenarios .title-label, .jimu-widget-cost-analysis-edit-equation .title-label {width: calc(100% - 30px); overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-cost-analysis-manage-scenarios .esriCTMainConfigurationContainer {width: 100%; height: 100%; color: #596679; font-size: 14px; overflow: hidden;}.jimu-widget-cost-analysis-manage-scenarios .esriCTPopupFields {width: 28%; float: left; line-height: 30px; padding-right: 5px;}.jimu-widget-cost-analysis-manage-scenarios .esriCTAddScenarioNameTable {margin-top: 10px;}.jimu-widget-cost-analysis-manage-scenarios .jimu-simple-table {max-height: 240px !important;}.jimu-widget-cost-analysis-costing-info .esriCTNoEditableLayersAvailable {color: red; font-style: italic; margin: 0 10px;}.jimu-widget-cost-analysis-costing-info .esriCTAddLayerTableNode .jimu-simple-table .simple-table-field {position: relative; padding-right: 25px;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTLayerNameContainer {float: right;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTMangeScenarios {float: left;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTLayerLabel {padding-right: 0px; float: right; padding-left: 10px;}.esriRtl .jimu-widget-cost-analysis-manage-scenarios .esriCTPopupFields {float: right; padding-right: 0px; padding-left: 5px;}.esriRtl .jimu-widget-cost-analysis-edit-equation .esriCTEditCostEquationLabel {float: right; padding-left: 5px; padding-right: 0px;}.esriRtl .jimu-widget-cost-analysis-edit-equation .esriCTCostEquationFieldContainer {float: left;}.esriRtl .jimu-widget-cost-analysis-costing-template .esriCTCancelDialogPopup {float: left;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTCostingTemplateFeatureTemplate .dijitSelectLabel {text-align: right;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTCostingTemplateGeography .dijitSelectLabel {text-align: right;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTCostingInfoScenarioOptions .dijitSelectLabel {text-align: right;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTHelpIcon {right: auto; left: 5px;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTManageScenarioButtonContainer {float: left;}.jimu-widget-cost-analysis-statistics-settings .esriCTBtnStatisticsAddSection,.jimu-widget-cost-analysis-statistics-settings .esriCTBtnProjectCostAddSection {display: inline-block; overflow: hidden; height: 20px; cursor: pointer; font-size: 13px; color: #538ec8;}.jimu-widget-cost-analysis-statistics-settings .esriCTHidden {display: none;}.jimu-widget-cost-analysis-statistics-settings .esriCTNoEditableLayersAvailable {color: red; font-style: italic; margin: 0 10px;}.jimu-widget-cost-analysis-statistics-settings .esriCTBtnAddStatisticsIcon,.jimu-widget-cost-analysis-statistics-settings .esriCTBtnAddProjectCostIcon {height: 100%; width: 14px; background-repeat: no-repeat; background-position: center center; background-image: url(images/add.png); display: inline-block; vertical-align: top;}.jimu-widget-cost-analysis-statistics-settings .esriCTBtnStatisticsAddLabel,.jimu-widget-cost-analysis-statistics-settings .esriCTBtnProjectCostAddLabel {line-height: 20px;}.jimu-widget-cost-analysis-statistics-settings .esriCTTabContainer {width: 100%; float: left; margin-bottom: 20px;}.jimu-widget-cost-analysis-statistics-settings .esriCTLayerLabelTextBox {width: 100%; height: 29px; float: left;}.jimu-widget-cost-analysis-statistics-settings .esriCTStatisticsContainer,.jimu-widget-cost-analysis-statistics-settings .esriCTProjectCostContainer {float: left; width: 40%;}.jimu-widget-cost-analysis-statistics-settings .esriCTDropDownContainer {width: 75%; float: right;}.jimu-widget-cost-analysis-statistics-settings .esriCTLayerNameDropdown .dijitSelectLabel {text-align: left; overflow: hidden; width: 213px;}.jimu-widget-cost-analysis-statistics-settings .esriCTStatisticsTypeDropdown .dijitSelectLabel {text-align: left; overflow: hidden; width: 104px;}.jimu-widget-cost-analysis-statistics-settings .esriCTStatisticsFieldDropdown .dijitSelectLabel {text-align: left; overflow: hidden; width: 140px;}.jimu-widget-cost-analysis-statistics-settings .esriCTProjectCostContainer {margin-top: 10px;}.claro .jimu-widget-cost-analysis-statistics-settings .esriCTAddLayerTableNode .dijitSelect {height: 28px; min-width: 100%; float: left;}.esriRtl .jimu-widget-cost-analysis-statistics-settings .esriCTStatisticsContainer,.esriRtl .jimu-widget-cost-analysis-statistics-settings .esriCTProjectCostContainer {float: right;}.esriRtl .claro .jimu-widget-cost-analysis-statistics-settings .esriCTAddLayerTableNode .dijitSelect {height: 28px; min-width: 100%;}.esriRtl .jimu-widget-cost-analysis-statistics-settings .esriCTLayerNameDropdown .dijitSelectLabel {text-align: right; width: 201px;}.esriRtl .jimu-widget-cost-analysis-statistics-settings .esriCTStatisticsTypeDropdown .dijitSelectLabel {text-align: right; width: 96px;}.esriRtl .jimu-widget-cost-analysis-statistics-settings .esriCTStatisticsFieldDropdown .dijitSelectLabel {text-align: right; width: 131px;}.jimu-widget-cost-analysis-project-cost-settings .esriCTProjectCostLabelTextbox {width: 100%; height: 28px;}.jimu-widget-cost-analysis-project-cost-settings .esriCTProjectCostTypeDropdown {width: 100%;}.claro .jimu-widget-cost-analysis-project-cost-settings .esriCTProjectCostTableWrapper .dijitSelect {height: 26px; margin-top: -4px;} .claro .jimu-widget-cost-analysis-project-cost-settings .esriCTProjectCostTableWrapper .dijitTextBox {height: 26px; margin-top: -4px;}.jimu-widget-cost-analysis-attribute-settings .esriCTBtnAddField {display: inline-block; overflow: hidden; height: 20px; cursor: pointer; font-size: 13px; color: #538ec8;}.jimu-widget-cost-analysis-attribute-settings .esriCTBtnAddIcon {height: 100%; width: 14px; background-repeat: no-repeat; background-position: center center; background-image: url(images/add.png); display: inline-block; vertical-align: top;}.jimu-widget-cost-analysis-attribute-settings .esriCTBtnAddLabel {line-height: 20px;}.jimu-widget-cost-analysis-attribute-settings .esriCTDropDownContainer {width: 75%; float: right;}.claro .jimu-widget-cost-analysis-attribute-settings .esriCTAttributeSettingsTable .dijitSelect {height: 28px; min-width: 100%; float: left;}.jimu-widget-cost-analysis-attribute-settings .esriCTLayerAttributeDropdown .dijitSelectLabel {text-align: left; overflow: hidden; width: 145px; font-size: 14px;}.jimu-widget-cost-analysis-attribute-settings .esriCTDisabled {cursor: default; color: #a0acbf; opacity: 0.6;} .jimu-widget-cost-analysis-attribute-settings .esriCTFieldChooserDropdown {height: 26px; width: 100%; float: left;}.esriRtl.jimu-widget-cost-analysis-attribute-settings .esriCTDropDownContainer {float: left;}.esriRtl .jimu-widget-cost-analysis-attribute-settings .esriCTLayerAttributeDropdown .dijitSelectLabel{text-align: right;}.jimu-widget-cost-analysis-settings .jimu-tab3 {height: 100%; overflow: hidden;}.jimu-widget-cost-analysis-settings .jimu-viewstack {height: calc(100% - 45px); overflow: auto;}.jimu-widget-cost-analysis-settings .esriCTTabNode {padding-right: 20px; margin-top: 20px; height: calc(100% - 20px);}.jimu-widget-cost-analysis-settings .esriCTFullWidth {width: 100%;}.jimu-widget-cost-analysis-settings .esriCTFullHeight {height: 100%;}.jimu-widget-cost-analysis-settings .esriCTEllipsis, .jimu-widget-cost-analysis-manage-scenarios .esriCTEllipsis {overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-cost-analysis-settings .esriCTMainConfigurationContainer {width: 100%; height: 100%; color: #596679; font-size: 14px;}.jimu-widget-cost-analysis-settings .esriCTHidden {display: none;}.jimu-widget-cost-analysis-costing-template .esriCTCancelDialogPopup {width: 13px; height: 12px; padding-right: 5px; text-align: right; cursor: pointer; float: right; background-repeat: no-repeat; background-position: center center; background-image: url(images/close.png);}.jimu-widget-cost-analysis-costing-template .esriCTDialogText {padding: 5px;}.jimu-btn {line-height: 30px !important;}input[type\x3dtext]::-ms-clear {display: none;}",
"*now":function(w){w(['dojo/i18n!*preload*widgets/CostAnalysis/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare jimu/BaseWidgetSetting dojo/Evented jimu/dijit/TabContainer3 ./GeneralSettings ./ProjectSettings ./LayerSettings ./CostingInfo ./StatisticsSettings dojo/_base/lang dojo/_base/array dojo/on jimu/dijit/Message jimu/LayerInfos/LayerInfos ../utils".split(" "),function(w,v,x,r,f,l,h,c,p,g,t,m,a,b,d){return w([v,x],{baseClass:"jimu-widget-cost-analysis-settings",_configurationTabParentContainer:null,_generalSettingsTab:null,_projectSettingsTab:null,_layerSettingsTab:null,_costingInfoTab:null,
_statisticsSettingsTab:null,_layerInfosObj:null,postMixInProperties:function(){this.nls.units={feet:{label:window.jimuNls.units.feet,abbreviation:window.jimuNls.units.feetAbbr},meters:{label:window.jimuNls.units.meters,abbreviation:window.jimuNls.units.metersAbbr},miles:{label:window.jimuNls.units.miles,abbreviation:window.jimuNls.units.milesAbbr},yards:{label:window.jimuNls.units.yards,abbreviation:window.jimuNls.units.yardsAbbr},kilometers:{label:window.jimuNls.units.kilometers,abbreviation:window.jimuNls.units.kilometersAbbr}}},
postCreate:function(){b.getInstance(this.map,this.map.webMapResponse.itemInfo).then(g.hitch(this,function(a){this._layerInfosObj=a}));this._updateConfigData();this._initConfiguration();this.setConfig(this.config)},_updateConfigData:function(){if(this.config.projectSettings.projectLayer)var a=this._layerInfosObj.getLayerInfoById(this.config.projectSettings.projectLayer).layerObject;t.forEach(this.config.layerSettings,g.hitch(this,function(b){b.selectedField&&(b.hasOwnProperty("attributeSetting")||
(b.attributeSetting=[]),b.attributeSetting.push({layerField:b.selectedField,projectField:a.globalIdField}),delete b.selectedField)}))},setConfig:function(){this._layerSettingsTab.setConfig()},getConfig:function(){var a;a=this._generalSettingsTab.validate();if(a.isValid)this.config.generalSettings=this._generalSettingsTab.getConfig();else return this._showMessage(a.errorMessage),d.switchToTab(this._configurationTabParentContainer,this.nls.generalSettings.tabTitle),!1;a=this._projectSettingsTab.validate();
if(a.isValid)this.config.projectSettings=this._projectSettingsTab.getConfig();else return this._showMessage(a.errorMessage),d.switchToTab(this._configurationTabParentContainer,this.nls.projectSettings.tabTitle),!1;this.config.layerSettings=this._layerSettingsTab.getConfig();a=this._costingInfoTab.validate();if(a.isValid)this.config.costingInfoSettings=this._costingInfoTab.getConfig().costingInfoData,this.config.scenarios=this._costingInfoTab.getConfig().scenarios,this.config.updateCostEquationCheckBoxStatus=
this._costingInfoTab.getConfig().updateCostEquationCheckBoxStatus;else return this._showMessage(a.errorMessage),d.switchToTab(this._configurationTabParentContainer,this.nls.costingInfo.tabTitle),!1;this.config.statisticsSettings=this._statisticsSettingsTab.getConfig();if(this._statisticsSettingsTab.additionalProjectCostObj.validateProjectCostData().isValid)this.config.projectCostSettings=this._statisticsSettingsTab.additionalProjectCostObj.getConfig();else return this._showMessage(this.nls.projectCostSettings.invalidProjectCostMessage),
d.switchToTab(this._configurationTabParentContainer,this.nls.statisticsSettings.tabTitle),!1;return this.config},_initConfiguration:function(){this._initTabs();this._initGeneralSettings();this._initProjectSettings();this._initLayerSettings();this._initCostingInfo();this._initStatisticsSettings()},_initTabs:function(){this._configurationTabParentContainer=new r({tabs:[{title:this.nls.generalSettings.tabTitle,content:this.generalSettingsNode},{title:this.nls.projectSettings.tabTitle,content:this.projectSettingsNode},
{title:this.nls.layerSettings.tabTitle,content:this.layerSettingsNode},{title:this.nls.costingInfo.tabTitle,content:this.costingInfoNode},{title:this.nls.statisticsSettings.tabTitle,content:this.statisticsSettingsNode}]},this.configurationTabParentContainer);this.own(m(this._configurationTabParentContainer,"tabChanged",g.hitch(this,function(a){this._configurationTabParentContainer.containerNode.scrollTop=0;if(a===this.nls.costingInfo.tabTitle){a=this._projectSettingsTab.projectMultiplierTable.value;
var b=this._projectSettingsTab.projectAssetsTable.value;""!==this._projectSettingsTab.projectLayerDropDown.value&&""!==a&&""!==b?this._costingInfoTab.disableUpdateCostEquationChk(!1):this._costingInfoTab.disableUpdateCostEquationChk(!0)}})));this._configurationTabParentContainer.startup()},_initGeneralSettings:function(){this._generalSettingsTab=new f({nls:this.nls,map:this.map,config:this.config});this._generalSettingsTab.placeAt(this.generalSettingsNode)},_initProjectSettings:function(){this._projectSettingsTab=
new l({nls:this.nls,map:this.map,config:this.config.projectSettings,layerInfosObj:this._layerInfosObj,appUtils:d});this._projectSettingsTab.placeAt(this.projectSettingsNode);this._projectSettingsTab.on("onLayerSelected",g.hitch(this,function(a){this._layerSettingsTab&&(this._layerSettingsTab.updateLayerSettingsTable(a),this._costingInfoTab._updateCostingInfoTable(a),this._statisticsSettingsTab._updateStatisticsTable(a))}));this._projectSettingsTab.on("onDuplicateLayerSelect",g.hitch(this,function(a){this._showMessage(a)}));
this._projectSettingsTab.on("onProjectLayerSelected",g.hitch(this,function(a){this.projectLayerId=a;this._layerSettingsTab&&(this._layerSettingsTab.projectLayer=a,this._layerSettingsTab.updateAttributeButtonState(a))}));this._projectSettingsTab.on("onGeographyFieldChange",g.hitch(this,function(a,b){if(this._costingInfoTab)if(b&&""!==b)this._costingInfoTab.getGeographyOptions(a,b).then(g.hitch(this,function(a){this._costingInfoTab.onGeographyFieldUpdate(a)}));else this._costingInfoTab.onGeographyFieldUpdate([{label:this.nls.costingInfo.noneValue,
value:""}])}))},_initLayerSettings:function(){this._layerSettingsTab=new h({nls:this.nls,map:this.map,config:this.config,layerInfosObj:this._layerInfosObj});this._layerSettingsTab.placeAt(this.layerSettingsNode);m(this._layerSettingsTab,"onLayerSettingUpdate",g.hitch(this,function(a){this._costingInfoTab._updateCostingInfoTable(a);this._statisticsSettingsTab._updateStatisticsTable(a)}))},_initCostingInfo:function(){this._costingInfoTab=new c({nls:this.nls,map:this.map,config:this.config,layerInfosObj:this._layerInfosObj});
this._costingInfoTab.placeAt(this.costingInfoNode)},_initStatisticsSettings:function(){this._statisticsSettingsTab=new p({nls:this.nls,map:this.map,config:this.config,layerInfosObj:this._layerInfosObj,showActionButtonsInColumn:!0,showActionButtonsInRow:!1});this._statisticsSettingsTab.placeAt(this.statisticsSettingsNode)},_showMessage:function(b){(new a({message:b})).message=b}})});