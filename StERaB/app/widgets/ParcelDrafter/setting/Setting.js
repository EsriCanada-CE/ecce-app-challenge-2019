// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/ParcelDrafter/setting/SymbolChooserPopup":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/on dojo/text!./SymbolChooserPopup.html jimu/dijit/SymbolChooser jimu/dijit/Popup dojo/domReady!".split(" "),function(e,a,b,c,d,f,k,n,t,m){return e([a,b],{templateString:n,baseClass:"jimu-widget-ParcelDrafter-setting",postCreate:function(){this.own(k(this.okButton,"click",c.hitch(this,this._onOKButtonClicked)));
this._initSymbolChooser();this._createSymbolChooserPopup()},_initSymbolChooser:function(){this.symbolChooser=new t(this.symbolParams,f.create("div",{},this.symbolData));this.symbolChooser.startup()},_createSymbolChooserPopup:function(){this.popup=new m({titleLabel:this.symbolChooserTitle,width:420,height:400,content:this.domNode})},_onOKButtonClicked:function(){if(!d.contains(this.okButton,"jimu-state-disabled"))this.onOkClick()},onOkClick:function(a){return a}})})},"widgets/ParcelDrafter/setting/LayerChooser":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/lang dojo/on dojo/text!./LayerChooser.html jimu/dijit/LayerChooserFromMap jimu/dijit/LayerChooserFromMapWithDropbox dojo/dom-class jimu/utils dojo/Deferred esri/request dojo/promise/all jimu/dijit/Message jimu/dijit/Popup dojo/dom-construct dojo/domReady!".split(" "),
function(e,a,b,c,d,f,k,n,t,m,l,h,r,p,x,q,v){return e([a,b],{baseClass:"jimu-widget-ParcelDrafter-setting",templateString:k,selectedLayerDetails:[],relatedLayerInfo:[],relatedLayerTypes:[],chooseRelatedLayers:!1,_layerChooserFromMap:null,startup:function(){this.inherited(arguments)},postCreate:function(){this.selectedLayerDetails=[];this.relatedLayerInfo=[];this.relatedLayerTypes&&0!==this.relatedLayerTypes.length||(this.relatedLayerTypes=["point","polyline","polygon"]);this._initPopup();this._initLayerSelector()},
_initPopup:function(){this.okButton=v.create("button",{title:this.nls.common.ok});this.okButton.label=this.nls.common.ok;this.okButton.onClick=d.hitch(this,function(){this.multiple&&this._getSelectedLayers();this.chooseRelatedLayers&&0<this.relatedLayerInfo.length&&this.selectedLayerDetails.push(this.relatedLayerInfo[this.relatedLayerSelector.value]);this.onOKButtonClicked(this.selectedLayerDetails);this.popup.close()});this.cancelButton=v.create("button",{title:this.nls.common.cancel});this.cancelButton.label=
this.nls.common.cancel;this.cancelButton.onClick=d.hitch(this,function(a){this.onCancelClick(a);this.popup.close()});this.popup=new q({titleLabel:this.title,content:this.domNode,width:830,autoHeight:!0,buttons:[this.okButton,this.cancelButton]});this.popup.disableButton(0)},_initLayerSelector:function(){var a;a={multiple:this.multiple,createMapResponse:this.map.webMapResponse,showLayerTypes:this.showLayerTypes,filter:this._createFiltersForLayerSelector()};this.multiple?this._layerChooserFromMap=new n(a):
(a=new n(a),this._layerChooserFromMap=new t({layerChooser:a}));this.chooseRelatedLayers?this._layerChooserFromMap.placeAt(this.relatedLayerChooserDiv):(m.add(this.relatedLayerChooser,"esriCTHidden"),this._layerChooserFromMap.placeAt(this.singleLayerChooser));this._layerChooserFromMap.startup();this.multiple?this._layerChooserFromMap._onTreeClick=d.hitch(this,function(){this._layerChooserFromMap.getSelectedItems().length?this.popup.enableButton(0):this.popup.disableButton(0)}):this.own(f(this._layerChooserFromMap,
"selection-change",d.hitch(this,function(a){this._setSelectedLayerDetails(a)})))},_createFiltersForLayerSelector:function(){var a,b;a=n.createFeaturelayerFilter(this.types?this.types:["point","polyline","polygon"],!1,!1);b=n.createImageServiceLayerFilter(!0);return n.orCombineFilters([a,b])},_setSelectedLayerDetails:function(a){var b;b={};this.selectedLayerDetails=[];b.id=a[0].id;b.url=a[0].url;b.geometryType=a[0].geometryType;b.layerId=a[0].layerId;b.baseURL=a[0].url.substr(0,a[0].url.lastIndexOf("/")+
1);a[0].relationships&&(b.relationships=a[0].relationships);this.selectedLayerDetails.push(b);this.chooseRelatedLayers?this._createRelatedLayerOptions(this.selectedLayerDetails[0]):this.popup.enableButton(0)},_getSelectedLayers:function(){var a,b,c,d;this.selectedLayerDetails=[];b=this._layerChooserFromMap.getSelectedItems();if(0<b.length)for(this.popup.enableButton(0),a=0;a<b.length;a++)d={url:b[a].layerInfo.layerObject.url,geometryType:b[a].layerInfo.layerObject.geometryType,id:b[a].layerInfo.layerObject.id},
d.layerId=b[a].layerId?b[a].layerId:d.url.substr(d.url.lastIndexOf("/")+1,d.url.length),c=d.url.substr(0,d.url.lastIndexOf("/")+1),d.baseURL=c,this.selectedLayerDetails.push(d)},_getLayerDetailsFromMap:function(a,b){var e=[],f;this.map&&this.map.webMapResponse&&this.map.webMapResponse.itemInfo&&this.map.webMapResponse.itemInfo.itemData&&this.map.webMapResponse.itemInfo.itemData.operationalLayers&&c.forEach(this.map.webMapResponse.itemInfo.itemData.operationalLayers,d.hitch(this,function(h){f={};h.layerObject&&
("ArcGISMapServiceLayer"===h.layerType||"ArcGISTiledMapServiceLayer"===h.layerType?a.substring(0,a.length-1)===h.url&&(c.forEach(h.resourceInfo.layers,d.hitch(this,function(a){a.id===parseInt(b,10)&&(f.title=a.name,e.push(f))})),c.forEach(h.layers,d.hitch(this,function(a){a.id===parseInt(b,10)&&(a.name&&(f.title=a.name),f.id=h.id,e.push(f))}))):h.url.replace(/.*?:\/\//g,"").toLowerCase()===(a+b).replace(/.*?:\/\//g,"").toLowerCase()&&(f.id=h.id,f.title=h.title,e.push(f)))}));return e},_createRelatedLayerOptions:function(a){var b=
[],e;if(a&&a.relationships&&0<a.relationships.length){this.relatedLayerInfo=[];e=[];var f=a.baseURL;c.forEach(a.relationships,d.hitch(this,function(a){var b=new h;e.push(b);r({url:f+a.relatedTableId,content:{f:"json"},handleAs:"json"}).then(d.hitch(this,function(a){b.resolve(a)}),d.hitch(this,function(){b.resolve()}))}));p(e).then(d.hitch(this,function(c){var g,e,h,z,r;for(h=0;h<c.length;h++)if(c[h]&&(g=l.getTypeByGeometryType(c[h].geometryType),-1<this.relatedLayerTypes.indexOf(g)))for(g={url:f+
c[h].id,baseURL:f,relationShipId:a.relationships[h].id,layerId:c[h].id,geometryType:c[h].geometryType,title:c[h].name},c[h].fields&&(g.fields=d.clone(c[h].fields)),r=this._getLayerDetailsFromMap(f,c[h].id),z=0;z<r.length;z++)e=d.clone(g),d.mixin(e,r[z]),e.title&&(this.relatedLayerInfo[b.length]=e,b.push({label:this.relatedLayerInfo[b.length].title,value:b.length}));0<b.length?(this.relatedLayerSelector.options.length=0,b[0].selected=!0,this.relatedLayerSelector.addOption(b),this.popup.enableButton(0)):
this._resetRelatedLayerSelector()}),d.hitch(this,function(){this._resetRelatedLayerSelector()}))}else this._resetRelatedLayerSelector()},_resetRelatedLayerSelector:function(){this.relatedLayerSelector.value="";this.relatedLayerSelector.options.length=0;this.relatedLayerSelector.addOption({value:"",label:"",selected:!0});this.popup.disableButton(0);this._showMessage(this.nls.layerSelector.selectedLayerNotHavingRelatedLayer)},onOKButtonClicked:function(){return this.selectedLayerDetails},onCancelClick:function(a){return a},
_showMessage:function(a){(new x({message:a,buttons:[{label:this.nls.common.ok}]})).message=a}})})},"jimu/dijit/LayerChooserFromMap":function(){define("dojo/on dojo/Evented dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/store/Memory dojo/Deferred dojo/store/Observable dijit/tree/ObjectStoreModel dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/utils jimu/dijit/_Tree jimu/LayerInfos/LayerInfos jimu/dijit/LoadingIndicator".split(" "),
function(e,a,b,c,d,f,k,n,t,m,l,h,r,p,x,q,v,B){var u=b([c,d,f,a],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_treeClass:"layer-chooser-tree",createMapResponse:null,multiple:!1,onlyShowVisible:!1,
updateWhenLayerInfosIsShowInMapChanged:!1,onlyShowWebMapLayers:!1,displayTooltipForTreeNode:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){this.inherited(arguments);r.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");this.multiple=!!this.multiple;this.shelter=new B({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this._createTree();this.basicFilter=h.hitch(this,this.basicFilter);this.filter=u.andCombineFilters([this.basicFilter,
this.filter]);this.createMapResponse&&this.setCreateMapResponse(this.createMapResponse)},basicFilter:function(a){var b=new n;this.onlyShowVisible?b.resolve(a.isShowInMap()):b.resolve(!0);return b},filter:function(a){a=new n;a.resolve(!0);return a},getSelectedItems:function(){var a=this.tree.getSelectedItems();return p.map(a,h.hitch(this,function(a){return this.getHandledItem(a)}))},getAllItems:function(){var a=this.tree.getAllItems(),b=[];p.forEach(a,h.hitch(this,function(a){"root"!==a.id&&(a=this.getHandledItem(a),
b.push(a))}));return b},getHandledItem:function(a){return{name:a.name,layerInfo:a.layerInfo}},_isLeafItem:function(a){return a.isLeaf},setCreateMapResponse:function(a){this.createMapResponse=a;v.getInstance(this.createMapResponse.map,this.createMapResponse.itemInfo).then(h.hitch(this,function(a){this.layerInfosObj=a;this.own(e(this.layerInfosObj,"layerInfosChanged",h.hitch(this,this._onLayerInfosChanged)));this.updateWhenLayerInfosIsShowInMapChanged&&this.own(e(this.layerInfosObj,"layerInfosIsShowInMapChanged",
h.hitch(this,this._onLayerInfosIsShowInMapChanged)));this._buildTree(this.layerInfosObj)}))},_onLayerInfosChanged:function(a,b){this._buildTree(this.layerInfosObj);this.emit("update")},_onLayerInfosIsShowInMapChanged:function(a){this._buildTree(this.layerInfosObj);this.emit("update")},_buildTree:function(a){this._clear();r.setStyle(this.errorTipSection,"display","block");var b=[];this.onlyShowWebMapLayers?(b=a.getLayerInfoArrayOfWebmap(),b=b.concat(a.getTableInfoArrayOfWebmap())):(b=a.getLayerInfoArray(),
b=b.concat(a.getTableInfoArray()));0!==b.length&&(r.setStyle(this.errorTipSection,"display","none"),p.forEach(b,h.hitch(this,function(a){this._addDirectLayerInfo(a)})))},_addDirectLayerInfo:function(a){a&&a.getLayerObject().then(h.hitch(this,function(){this._addItem("root",a)}),h.hitch(this,function(a){console.error(a)}))},_clear:function(){var a=this._store.query({parent:"root"});p.forEach(a,h.hitch(this,function(a){a&&"root"!==a.id&&this._store.remove(a.id)}))},_addItem:function(a,b){var c=null,
g=b.getLayerType(),d=this.filter(b);l({layerType:g,valid:d}).then(h.hitch(this,function(g){if(g.valid){var d=h.hitch(this,function(d,e){this._id++;c={name:b.title||"",parent:a,layerInfo:b,type:g.layerType,layerClass:b.layerObject.declaredClass,id:this._id.toString(),isLeaf:d,hasChildren:e};this._store.add(c)}),e=b.getSubLayers(),f=0===e.length;f?d(f,!1):(e=p.map(e,h.hitch(this,function(a){return this.filter(a)})),l(e).then(h.hitch(this,function(a){(a=p.some(a,function(a){return a}))&&d(f,a)})))}}))},
_getRootItem:function(){return{id:"root",name:"Map Root",type:"root",isLeaf:!1,hasChildren:!0}},_createTree:function(){var a=this._getRootItem(),a=new k({data:[a],getChildren:function(a){return this.query({parent:a.id})}});this._store=new t(a);a=new m({store:this._store,query:{id:"root"},mayHaveChildren:h.hitch(this,this._mayHaveChildren)});this.tree=new q({multiple:this.multiple,model:a,showRoot:!1,isLeafItem:h.hitch(this,this._isLeafItem),style:{width:"100%"},onOpen:h.hitch(this,function(a,b){"root"!==
a.id&&this._onTreeOpen(a,b)}),onClick:h.hitch(this,function(a,b,g){this._onTreeClick(a,b,g);this.emit("tree-click",a,b,g)}),getIconStyle:h.hitch(this,function(a,b){var g=null;if(!a||"root"===a.id)return null;var c={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},d=window.location.protocol+"//"+window.location.host+require.toUrl("jimu");if(a=this._getIconInfo(a,b).imageName)c.backgroundImage="url("+d+"/css/images/"+a+")",g=c;return g}),
getIconClass:h.hitch(this,function(a,b){return this._getIconInfo(a,b).className}),getTooltip:h.hitch(this,function(a){return this.displayTooltipForTreeNode?a.layerInfo.title:""})});r.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.shelter.domNode,"before")},_mayHaveChildren:function(a){return a.hasChildren},_getIconInfo:function(a,b){var c="",g="";"ArcGISDynamicMapServiceLayer"===a.type||"ArcGISTiledMapServiceLayer"===a.type?b?(c="mapserver_open.png",g="mapservice-layer-icon open"):
(c="mapserver_close.png",g="mapservice-layer-icon close"):"GroupLayer"===a.type?b?(c="group_layer2.png",g="group-layer-icon open"):(c="group_layer1.png",g="group-layer-icon close"):"FeatureLayer"===a.type?(a=x.getTypeByGeometryType(a.layerInfo.layerObject.geometryType),"point"===a?(c="point_layer1.png",g="point-layer-icon"):"polyline"===a?(c="line_layer1.png",g="line-layer-icon"):"polygon"===a&&(c="polygon_layer1.png",g="polygon-layer-icon")):"Table"===a.type?(c="table.png",g="table-icon"):"ArcGISImageServiceLayer"===
a.type||"ArcGISImageServiceVectorLayer"===a.type?(c="image_layer.png",g="iamge-layer-icon"):b?(c="mapserver_open.png",g="mapservice-layer-icon open"):(c="mapserver_close.png",g="mapservice-layer-icon close");return{imageName:c,className:g}},_onTreeOpen:function(a,b){if("root"!==a.id){var c=[];b=[];c=a.layerInfo.getSubLayers();a.checked||(this.shelter.show(),b=p.map(c,h.hitch(this,function(a){return a.getLayerObject()})),l(b).then(h.hitch(this,function(){this.domNode&&(p.forEach(c,h.hitch(this,function(b){this._addItem(a.id,
b)})),a.checked=!0,this.shelter.hide())}),h.hitch(this,function(a){console.error(a);this.shelter.hide()})))}},_onTreeClick:function(a,b,c){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.tree&&this.tree.destroy();this.inherited(arguments)}});u.createFilterByLayerType=function(a){h.isArrayLike(a)||(a=[]);return function(b){var c=new n;if(0===a.length)c.resolve(!0);else{var g=[];b.traversal(function(a){g.push(a.getLayerType())});l(g).then(function(b){for(var g=0;g<
b.length;g++)for(var d=0;d<a.length;d++)if(b[g]===a[d]){c.resolve(!0);return}c.resolve(!1)},function(a){console.error(a);c.reject(a)})}return c}};u.createFeaturelayerFilter=function(a,b,c,g){var d=["point","polyline","polygon"];a&&0<a.length?(a=p.filter(a,function(a){return 0<=d.indexOf(a)}),0===a.length&&(a=d)):a=d;return function(d){var e=d.getLayerType();d=d.getLayerObject();return l({layerType:e,layerObject:d}).then(function(d){var e=d.layerType;d=d.layerObject;if("ArcGISDynamicMapServiceLayer"===
e||"ArcGISTiledMapServiceLayer"===e||"GroupLayer"===e||"FeatureCollection"===e)return!0;if("FeatureLayer"===e){var e=x.getTypeByGeometryType(d.geometryType),e=0<=p.indexOf(a,e),f=u._shouldPassStatisticsCheck(g,d);return d.url?(d=x.isFeaturelayerUrlSupportQuery(d.url,d.capabilities),e&&d&&f):b&&e}return"Table"===e?(e=x.isFeaturelayerUrlSupportQuery(d.url,d.capabilities),d=u._shouldPassStatisticsCheck(g,d),c&&e&&d):!1})}};u.createImageServiceLayerFilter=function(a,b){return function(c){var g=c.getLayerType();
c=c.getLayerObject();return l({layerType:g,layerObject:c}).then(function(g){var c=g.layerType,d=g.layerObject;return"ArcGISImageServiceLayer"===c||"ArcGISImageServiceVectorLayer"===c?a?x.isImageServiceSupportQuery(g.layerObject.capabilities)?b?u._shouldPassStatisticsCheck(b,d):!0:!1:!0:!1})}};u._shouldPassStatisticsCheck=function(a,b){return a?(a=!1,a=b.advancedQueryCapabilities?!!b.advancedQueryCapabilities.supportsStatistics:!!b.supportsStatistics):!0};u.createQueryableLayerFilter=function(a){var b=
u.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0,a);a=u.createImageServiceLayerFilter(!0,a);return u.orCombineFilters([b,a])};u.andCombineFilters=function(a){return u._combineFilters(a,!0)};u.orCombineFilters=function(a){return u._combineFilters(a,!1)};u._combineFilters=function(a,b){return function(c){var g=new n,d=p.map(a,function(a){return a(c)});l(d).then(function(a){var c=!1,c=b?p.every(a,function(a){return a}):p.some(a,function(a){return a});g.resolve(c)},function(a){console.error(a);
g.reject(a)});return g}};return u})},"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),function(e,a,b,c,d,f,k){return b("dijit.tree.ObjectStoreModel",k,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(a){d.mixin(this,a);this.childrenCache={}},getRoot:function(a,b){if(this.root)a(this.root);else{var c=this.store.query(this.query);c.then&&this.own(c);
f(c,d.hitch(this,function(b){if(1!=b.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+b.length+" items, but must return exactly one");this.root=b[0];a(this.root);c.observe&&c.observe(d.hitch(this,function(a){this.onChange(a)}),!0)}),b)}},mayHaveChildren:function(){return!0},getChildren:function(a,b,c){var e=this.store.getIdentity(a);if(this.childrenCache[e])f(this.childrenCache[e],b,c);else{var h=this.childrenCache[e]=this.store.getChildren(a);h.then&&this.own(h);h.observe&&
this.own(h.observe(d.hitch(this,function(b,c,e){this.onChange(b);c!=e&&f(h,d.hitch(this,"onChildrenChange",a))}),!0));f(h,b,c)}},isItem:function(){return!0},getIdentity:function(a){return this.store.getIdentity(a)},getLabel:function(a){return a[this.labelAttr]},newItem:function(a,b,c,d){return this.store.put(a,{parent:b,before:d})},pasteItem:function(a,b,f,k,h,r){var p=new c;if(b===f&&!k&&!r)return p.resolve(!0),p;b&&!k?this.getChildren(b,d.hitch(this,function(c){c=[].concat(c);var d=e.indexOf(c,
a);c.splice(d,1);this.onChildrenChange(b,c);p.resolve(this.store.put(a,{overwrite:!0,parent:f,oldParent:b,before:r,isCopy:!1}))})):p.resolve(this.store.put(a,{overwrite:!0,parent:f,oldParent:b,before:r,isCopy:!0}));return p},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})})},"jimu/dijit/_Tree":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_TreeNode.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/event dojo/query dojo/aspect dojo/on dojo/keys dojo/Evented dijit/registry dijit/Tree jimu/utils".split(" "),
function(e,a,b,c,d,f,k,n,t,m,l,h,r,p,x,q){var v=e([x._TreeNode,r],{templateString:c,declaredClass:"jimu._TreeNode",isLeaf:!1,groupId:"",postCreate:function(){this.inherited(arguments);f.addClass(this.domNode,"jimu-tree-node");this.isLeaf=!!this.isLeaf;this.groupId?(this.checkNode=f.toDom('\x3cinput type\x3d"radio" /\x3e'),this.checkNode.name=this.groupId):this.checkNode=f.toDom('\x3cinput type\x3d"checkbox" /\x3e');f.addClass(this.checkNode,"jimu-tree-check-node");f.place(this.checkNode,this.contentNode,
"first");this.own(l(this.checkNode,"click",d.hitch(this,this._onClick)));this.own(l(this.rowNode,"keydown",d.hitch(this,function(a,b){b.target=a;b.keyCode!==h.ENTER&&b.keyCode!==h.SPACE||this._onClick(b)},this.checkNode)));this.isLeaf?this.groupId?f.setStyle(this.checkNode,"display","none"):f.setStyle(this.checkNode,"display","inline"):f.setStyle(this.checkNode,"display","none");this.isLeaf?f.addClass(this.domNode,"jimu-tree-leaf-node"):f.addClass(this.domNode,"jimu-tree-not-leaf-node")},select:function(){this.isLeaf&&
(this.checkNode.checked=!0,f.addClass(this.domNode,"jimu-tree-selected-leaf-node"))},unselect:function(){this.isLeaf&&(this.checkNode.checked=!1,f.removeClass(this.domNode,"jimu-tree-selected-leaf-node"))},toggleSelect:function(){this.isLeaf&&(this.checkNode.checked?this.unselect():this.select())},_onClick:function(a){(a.target||a.srcElement)===this.checkNode?this.tree._onCheckNodeClick(this,this.checkNode.checked,a):this.tree._onClick(this,a)},_onChange:function(){this.isLeaf&&setTimeout(d.hitch(this,
function(){this.checkNode.checked?this.emit("tn-select",this):this.emit("tn-unselect",this)}),100)},destroy:function(){delete this.tree;this.inherited(arguments)}});return e([x,r],{declaredClass:"jimu._Tree",openOnClick:!0,multiple:!0,uniqueId:"",showRoot:!1,postMixInProperties:function(){this.inherited(arguments);this.uniqueId="tree_"+q.getRandomString()},postCreate:function(){this.inherited(arguments);f.addClass(this.domNode,"jimu-tree");this.own(m.before(this,"onClick",d.hitch(this,this._jimuBeforeClick)));
this.rootLoadingIndicator&&f.setStyle(this.rootLoadingIndicator,"display","none");this.dndController.singular=!0;f.setAttr(this.domNode,"tabindex",0)},removeItem:function(a){this.model.store.remove(a)},getAllItems:function(){var a=this.getAllTreeNodeWidgets();return k.map(a,d.hitch(this,function(a){var b=a.item;b.selected=a.checkNode.checked;return b}))},getSelectedItems:function(){var a=this.getAllTreeNodeWidgets(),a=k.filter(a,d.hitch(this,function(a){return a.checkNode.checked}));return k.map(a,
d.hitch(this,function(a){return a.item}))},getFilteredItems:function(a){var b=this.getAllTreeNodeWidgets(),b=k.map(b,d.hitch(this,function(a){var b=a.item;b.selected=a.checkNode.checked;return b}));return k.filter(b,d.hitch(this,function(b){return a(b)}))},getTreeNodeByItemId:function(a){for(var b=this._getAllTreeNodeDoms(),c=0;c<b.length;c++){var d=p.byNode(b[c]);if(d.item.id.toString()===a.toString())return d}return null},selectItem:function(a){(a=this.getTreeNodeByItemId(a))&&a.isLeaf&&this.selectNodeWidget(a)},
unselectItem:function(a){(a=this.getTreeNodeByItemId(a))&&a.isLeaf&&a.unselect()},getAllLeafTreeNodeWidgets:function(){var a=this.getAllTreeNodeWidgets();return k.filter(a,d.hitch(this,function(a){return a.isLeaf}))},getAllTreeNodeWidgets:function(){var a=this._getAllTreeNodeDoms();return k.map(a,d.hitch(this,function(a){return p.byNode(a)}))},isLeafItem:function(a){return a&&a.isLeaf},_getAllTreeNodeDoms:function(){return t(".dijitTreeNode",this.domNode)},_createTreeNode:function(a){a.isLeaf=this.isLeafItem(a.item);
this.multiple||(a.groupId=this.uniqueId);return new v(a)},_onTreeNodeSelect:function(a){this.emit("item-select",{item:a.item,treeNode:a})},_onTreeNodeUnselect:function(a){this.emit("item-unselect",{item:a.item,treeNode:a})},selectNodeWidget:function(a){this.multiple||this.unselectAllLeafNodeWidgets();a.select()},_jimuBeforeClick:function(a,b,c){b.isLeaf&&(f.hasClass(c.target||c.srcElement,"jimu-tree-check-node")||(this.multiple?b.toggleSelect():this.selectNodeWidget(b)));return arguments},_onCheckNodeClick:function(a,
b,c){!this.multiple&&b&&this.unselectAllLeafNodeWidgets();n.stop(c);this.focusNode(a);setTimeout(d.hitch(this,function(){b?this.selectNodeWidget(a):a.unselect();this.onClick(a.item,a,c)}),0)},unselectAllLeafNodeWidgets:function(){var a=this.getAllLeafTreeNodeWidgets();k.forEach(a,d.hitch(this,function(a){a.unselect()}))}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(e,a,b,c,d,f,k,n,t,m,l,h,r,p,x,q,v,B,u,z,C,D,g,F,G,H,I,L,J,K,M,N,Q,O,P){function y(a){return q.delegate(a.promise||a,{addCallback:function(a){this.then(a)},addErrback:function(a){this.otherwise(a)}})}var E=c("dijit._TreeNode",[G,H,I,L,J],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(a){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=a;this._set("label",a);r("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:M,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(a){var b=Math.max(a,0)*this.tree._nodePixelIndent+"px";m.set(this.domNode,
"backgroundPosition",b+" 0px");m.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",b);e.forEach(this.getChildren(),function(b){b.set("indent",a+1)});this._set("indent",a)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(a){var b=this.tree,c=b.model;b._v10Compat&&a===c.root&&(a=null);this._applyClassAndStyle(a,"icon","Icon");this._applyClassAndStyle(a,"label","Label");this._applyClassAndStyle(a,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(a,b,c){var g="_"+b+"Class";b+="Node";var d=this[g];this[g]=this.tree["get"+c+"Class"](a,this.isExpanded);n.replace(this[b],this[g]||"",d||"");m.set(this[b],this.tree["get"+c+"Style"](a,this.isExpanded)||{})},_updateLayout:function(){var a=this.getParent(),a=!a||!a.rowNode||"none"==a.rowNode.style.display;n.toggle(this.domNode,"dijitTreeIsRoot",a);n.toggle(this.domNode,"dijitTreeIsLast",!a&&!this.getNextSibling())},_setExpando:function(a){var b=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];a=a?0:this.isExpandable?this.isExpanded?1:2:3;n.replace(this.expandoNode,b[a],b);this.expandoNodeText.innerHTML=["*","-","+","*"][a]},expand:function(){if(this._expandDeferred)return y(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");n.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var b=h.wipeIn({node:this.containerNode,duration:F.defaultDuration}),c=this._expandDeferred=new d(function(){b.stop()});a.after(b,"onEnd",function(){c.resolve(!0)},!0);b.play();return y(c)},collapse:function(){if(this._collapseDeferred)return y(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");n.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var b=h.wipeOut({node:this.containerNode,duration:F.defaultDuration}),c=this._collapseDeferred=new d(function(){b.stop()});a.after(b,"onEnd",
function(){c.resolve(!0)},!0);b.play();return y(c)},indent:0,setChildItems:function(a){var b=this.tree,c=b.model,g=[],d=b.focusedChild,w=this.getChildren();e.forEach(w,function(a){I.prototype.removeChild.call(this,a)},this);this.defer(function(){e.forEach(w,function(a){if(!a._destroyed&&!a.getParent()){var g=function(a){var d=c.getIdentity(a.item),w=b._itemNodesMap[d];1==w.length?delete b._itemNodesMap[d]:(d=e.indexOf(w,a),-1!=d&&w.splice(d,1));e.forEach(a.getChildren(),g)};b.dndController.removeTreeNode(a);
g(a);if(b.persist){var w=e.map(a.getTreePath(),function(a){return b.model.getIdentity(a)}).join("/"),f;for(f in b._openedNodes)f.substr(0,w.length)==w&&delete b._openedNodes[f];b._saveExpandedNodes()}b.lastFocusedChild&&!k.isDescendant(b.lastFocusedChild.domNode,b.domNode)&&delete b.lastFocusedChild;d&&!k.isDescendant(d.domNode,b.domNode)&&b.focus();a.destroyRecursive()}})});this.state="Loaded";a&&0<a.length?(this.isExpandable=!0,e.forEach(a,function(a){var d=c.getIdentity(a),e=b._itemNodesMap[d],
w;if(e)for(var f=0;f<e.length;f++)if(e[f]&&!e[f].getParent()){w=e[f];w.set("indent",this.indent+1);break}w||(w=this.tree._createTreeNode({item:a,tree:b,isExpandable:c.mayHaveChildren(a),label:b.getLabel(a),labelType:b.model&&b.model.labelType||"text",tooltip:b.getTooltip(a),ownerDocument:b.ownerDocument,dir:b.dir,lang:b.lang,textDir:b.textDir,indent:this.indent+1}),e?e.push(w):b._itemNodesMap[d]=[w]);this.addChild(w);(this.tree.autoExpand||this.tree._state(w))&&g.push(b._expandNode(w))},this),e.forEach(this.getChildren(),
function(a){a._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);a=f(g);this.tree._startPaint(a);return y(a)},getTreePath:function(){for(var a=this,b=[];a&&a!==this.tree.rootNode;)b.unshift(a.item),a=a.getParent();b.unshift(this.tree.rootNode.item);return b},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(a){this.inherited(arguments);var b=this.getChildren();0==b.length&&(this.isExpandable=!1,
this.collapse());e.forEach(b,function(a){a._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(a){this.labelNode.setAttribute("aria-selected",a?"true":"false");n.toggle(this.rowNode,"dijitTreeRowSelected",a)},focus:function(){D.focus(this.focusNode)}});r("dojo-bidi")&&E.extend({_setTextDirAttr:function(a){!a||this.textDir==a&&this._created||(this._set("textDir",a),this.applyTextDir(this.labelNode),e.forEach(this.getChildren(),function(b){b.set("textDir",
a)},this))}});var A=c("dijit.Tree",[G,K,H,J],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:N,persist:!1,autoExpand:!1,dndController:P,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,
dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(a,b){B.publish(this.id,q.mixin({tree:this,event:a},b||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new d;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var b=this;this.own(v(this.containerNode,
v.selector(".dijitTreeNode",u.enter),function(a){b._onNodeMouseEnter(g.byNode(this),a)}),v(this.containerNode,v.selector(".dijitTreeNode",u.leave),function(a){b._onNodeMouseLeave(g.byNode(this),a)}),v(this.containerNode,v.selector(".dijitTreeRow",C.press),function(a){b._onNodePress(g.getEnclosingWidget(this),a)}),v(this.containerNode,v.selector(".dijitTreeRow",C),function(a){b._onClick(g.getEnclosingWidget(this),a)}),v(this.containerNode,v.selector(".dijitTreeRow","dblclick"),function(a){b._onDblClick(g.getEnclosingWidget(this),
a)}));this.model||this._store2model();this.own(a.after(this.model,"onChange",q.hitch(this,"_onItemChange"),!0),a.after(this.model,"onChildrenChange",q.hitch(this,"_onItemChildrenChange"),!0),a.after(this.model,"onDelete",q.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){q.isString(this.dndController)&&(this.dndController=q.getObject(this.dndController));for(var c={},d=0;d<this.dndParams.length;d++)this[this.dndParams[d]]&&(c[this.dndParams[d]]=this[this.dndParams[d]]);
this.dndController=new this.dndController(this,c)}this._load();this.onLoadDeferred=y(this.pendingCommandsPromise);this.onLoadDeferred.then(q.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;p.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var a={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(a.mayHaveChildren=q.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&
(a.getChildren=q.hitch(this,function(a,b,c){this.getItemChildren(this._v10Compat&&a===this.model.root?null:a,b,c)}));this.model=new O(a);this.showRoot=!!this.label},onLoad:function(){},_load:function(){this.model.getRoot(q.hitch(this,function(a){var b=this.rootNode=this.tree._createTreeNode({item:a,tree:this,isExpandable:!0,label:this.label||this.getLabel(a),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",
!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(b.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(b.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(b.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),
b.labelNode.setAttribute("role","presentation"),b.labelNode.removeAttribute("aria-selected"),b.containerNode.setAttribute("role","tree"),b.containerNode.setAttribute("aria-expanded","true"),b.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(b.domNode);a=this.model.getIdentity(a);this._itemNodesMap[a]?this._itemNodesMap[a].push(b):this._itemNodesMap[a]=[b];b._updateLayout();this._expandNode(b).then(q.hitch(this,function(){this._destroyed||
(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),q.hitch(this,function(a){console.error(this,": error loading root: ",a)}))},getNodesByItem:function(a){if(!a)return[];a=q.isString(a)?a:this.model.getIdentity(a);return[].concat(this._itemNodesMap[a])},_setSelectedItemAttr:function(a){this.set("selectedItems",[a])},_setSelectedItemsAttr:function(a){var b=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(q.hitch(this,function(){var c=
e.map(a,function(a){return!a||q.isString(a)?a:b.model.getIdentity(a)}),g=[];e.forEach(c,function(a){g=g.concat(b._itemNodesMap[a]||[])});this.set("selectedNodes",g)}))},_setPathAttr:function(a){return a.length?y(this.set("paths",[a]).then(function(a){return a[0]})):y(this.set("paths",[]).then(function(a){return a[0]}))},_setPathsAttr:function(a){function b(a,g){var d=a.shift(),f=e.filter(g,function(a){return a.getIdentity()==d})[0];if(f)return a.length?c._expandNode(f).then(function(){return b(a,
f.getChildren())}):f;throw new A.PathError("Could not expand path at "+d);}var c=this;return y(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return f(e.map(a,function(a){a=e.map(a,function(a){return a&&q.isObject(a)?c.model.getIdentity(a):a});if(a.length)return b(a,[c.rootNode]);throw new A.PathError("Empty path");}))}).then(function(a){c.set("selectedNodes",a);return c.paths}))},_setSelectedNodeAttr:function(a){this.set("selectedNodes",[a])},_setSelectedNodesAttr:function(a){this.dndController.setSelection(a)},
expandAll:function(){function a(c){return b._expandNode(c).then(function(){var b=e.filter(c.getChildren()||[],function(a){return a.isExpandable});return f(e.map(b,a))})}var b=this;return y(a(this.rootNode))},collapseAll:function(){function a(c){var g=e.filter(c.getChildren()||[],function(a){return a.isExpandable}),g=f(e.map(g,a));return!c.isExpanded||c==b.rootNode&&!b.showRoot?g:g.then(function(){return b._collapseNode(c)})}var b=this;return y(a(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},
getLabel:function(a){return this.model.getLabel(a)},getIconClass:function(a,b){return!a||this.model.mayHaveChildren(a)?b?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(a,b){(a=this._getNext(b))&&a.isTreeNode&&this.focusNode(a)},_onUpArrow:function(a,b){if(a=b.getPreviousSibling())for(b=a;b.isExpandable&&b.isExpanded&&
b.hasChildren();)b=b.getChildren(),b=b[b.length-1];else if(a=b.getParent(),this.showRoot||a!==this.rootNode)b=a;b&&b.isTreeNode&&this.focusNode(b)},_onRightArrow:function(a,b){b.isExpandable&&!b.isExpanded?this._expandNode(b):b.hasChildren()&&(b=b.getChildren()[0])&&b.isTreeNode&&this.focusNode(b)},_onLeftArrow:function(a,b){b.isExpandable&&b.isExpanded?this._collapseNode(b):(a=b.getParent())&&a.isTreeNode&&(this.showRoot||a!==this.rootNode)&&this.focusNode(a)},focusLastChild:function(){var a=this._getLast();
a&&a.isTreeNode&&this.focusNode(a)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var a=this.rootNode;a.isExpanded;){var b=a.getChildren();if(!b.length)break;a=b[b.length-1]}return a},_getNext:function(a){if(a.isExpandable&&a.isExpanded&&a.hasChildren())return a.getChildren()[0];for(;a&&a.isTreeNode;){var b=a.getNextSibling();if(b)return b;a=a.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(a,b){return k.isDescendant(a,
b.expandoNode)||k.isDescendant(a,b.expandoNodeText)},_onNodePress:function(a,b){this.focusNode(a)},__click:function(a,b,c,g){var d=this.isExpandoNode(b.target,a);a.isExpandable&&(c||d)?this._onExpandoClick({node:a}):(this._publish("execute",{item:a.item,node:a,evt:b}),this[g](a.item,a,b),this.focusNode(a));b.stopPropagation();b.preventDefault()},_onClick:function(a,b){this.__click(a,b,this.openOnClick,"onClick")},_onDblClick:function(a,b){this.__click(a,b,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(a){a=
a.node;this.focusNode(a);a.isExpanded?this._collapseNode(a):this._expandNode(a)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(a){p.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(a)},_getRootOrFirstNode:function(){p.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst()},_collapseNode:function(a){a._expandNodeDeferred&&
delete a._expandNodeDeferred;if("Loading"!=a.state&&a.isExpanded){var b=a.collapse();this.onClose(a.item,a);this._state(a,!1);this._startPaint(b);return b}},_expandNode:function(a){if(a._expandNodeDeferred)return a._expandNodeDeferred;var b=this.model,c=a.item,g=this;a._loadDeferred||(a.markProcessing(),a._loadDeferred=new d,b.getChildren(c,function(b){a.unmarkProcessing();a.setChildItems(b).then(function(){a._loadDeferred.resolve(b)})},function(b){console.error(g,": error loading "+a.label+" children: ",
b);a._loadDeferred.reject(b)}));b=a._loadDeferred.then(q.hitch(this,function(){var b=a.expand();this.onOpen(a.item,a);this._state(a,!0);return b}));this._startPaint(b);return b},focusNode:function(a){for(var b=[],c=this.domNode;c&&c.tagName&&"IFRAME"!==c.tagName.toUpperCase();c=c.parentNode)b.push({domNode:c.contentWindow||c,scrollLeft:c.scrollLeft||0,scrollTop:c.scrollTop||0});this.focusChild(a);this.defer(function(){for(var a=0,c=b.length;a<c;a++)b[a].domNode.scrollLeft=b[a].scrollLeft,b[a].domNode.scrollTop=
b[a].scrollTop},0)},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(a){var b=this.model.getIdentity(a);if(b=this._itemNodesMap[b]){var c=this.getLabel(a),g=this.getTooltip(a);e.forEach(b,function(b){b.set({item:a,label:c,tooltip:g});b._updateItemClasses(a)})}},_onItemChildrenChange:function(a,b){a=this.model.getIdentity(a);(a=this._itemNodesMap[a])&&e.forEach(a,function(a){a.setChildItems(b)})},_onItemDelete:function(a){a=this.model.getIdentity(a);var b=this._itemNodesMap[a];
b&&(e.forEach(b,function(a){this.dndController.removeTreeNode(a);var b=a.getParent();b&&b.removeChild(a);this.lastFocusedChild&&!k.isDescendant(this.lastFocusedChild.domNode,this.domNode)&&delete this.lastFocusedChild;this.focusedChild&&!k.isDescendant(this.focusedChild.domNode,this.domNode)&&this.focus();a.destroyRecursive()},this),delete this._itemNodesMap[a])},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var a=b(this.cookieName);a&&e.forEach(a.split(","),function(a){this._openedNodes[a]=
!0},this)}},_state:function(a,b){if(!this.persist)return!1;var c=e.map(a.getTreePath(),function(a){return this.model.getIdentity(a)},this).join("/");if(1===arguments.length)return this._openedNodes[c];b?this._openedNodes[c]=!0:delete this._openedNodes[c];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var a=[],c;for(c in this._openedNodes)a.push(c);b(this.cookieName,a.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),
delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!q.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(a){a&&t.setMarginBox(this.domNode,a);this._nodePixelIndent=t.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(q.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},
_outstandingPaintOperations:0,_startPaint:function(a){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var b=q.hitch(this,function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});z(a,b,b)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);
this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(a){return new E(a)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});r("dojo-bidi")&&A.extend({_setTextDirAttr:function(a){a&&this.textDir!=a&&(this._set("textDir",a),this.rootNode.set("textDir",a))}});A.PathError=l("TreePathError");A._TreeNode=E;return A})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array",
"dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(e,a,b,c){return b("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(b){c.mixin(this,b);this.connects=[];b=this.store;if(!b.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");b.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([a.after(b,
"onNew",c.hitch(this,"onNewItem"),!0),a.after(b,"onDelete",c.hitch(this,"onDeleteItem"),!0),a.after(b,"onSet",c.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var a;a=this.connects.pop();)a.remove()},getRoot:function(a,b){this.root?a(this.root):this.store.fetch({query:this.query,onComplete:c.hitch(this,function(b){if(1!=b.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+b.length+" items, but must return exactly one");this.root=b[0];a(this.root)}),onError:b})},mayHaveChildren:function(a){return e.some(this.childrenAttrs,
function(b){return this.store.hasAttribute(a,b)},this)},getChildren:function(a,b,k){var d=this.store;if(d.isItemLoaded(a)){for(var f=[],m=0;m<this.childrenAttrs.length;m++)var l=d.getValues(a,this.childrenAttrs[m]),f=f.concat(l);var h=0;this.deferItemLoadingUntilExpand||e.forEach(f,function(a){d.isItemLoaded(a)||h++});0==h?b(f):e.forEach(f,function(a,c){d.isItemLoaded(a)||d.loadItem({item:a,onItem:function(a){f[c]=a;0==--h&&b(f)},onError:k})})}else{var r=c.hitch(this,arguments.callee);d.loadItem({item:a,
onItem:function(a){r(a,b,k)},onError:k})}},isItem:function(a){return this.store.isItem(a)},fetchItemByIdentity:function(a){this.store.fetchItemByIdentity(a)},getIdentity:function(a){return this.store.getIdentity(a)},getLabel:function(a){return this.labelAttr?this.store.getValue(a,this.labelAttr):this.store.getLabel(a)},newItem:function(a,b,c){var d={parent:b,attribute:this.childrenAttrs[0]},e;this.newItemIdAttr&&a[this.newItemIdAttr]?this.fetchItemByIdentity({identity:a[this.newItemIdAttr],scope:this,
onItem:function(f){f?this.pasteItem(f,null,b,!0,c):(e=this.store.newItem(a,d))&&void 0!=c&&this.pasteItem(e,b,b,!1,c)}}):(e=this.store.newItem(a,d))&&void 0!=c&&this.pasteItem(e,b,b,!1,c)},pasteItem:function(a,b,c,n,t){var d=this.store,f=this.childrenAttrs[0];b&&e.forEach(this.childrenAttrs,function(c){if(d.containsValue(b,c,a)){if(!n){var h=e.filter(d.getValues(b,c),function(b){return b!=a});d.setValues(b,c,h)}f=c}});if(c)if("number"==typeof t){var h=d.getValues(c,f).slice();h.splice(t,0,a);d.setValues(c,
f,h)}else d.setValues(c,f,d.getValues(c,f).concat(a))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(a,b){b&&this.getChildren(b.item,c.hitch(this,function(a){this.onChildrenChange(b.item,a)}))},onDeleteItem:function(a){this.onDelete(a)},onSetItem:function(a,b){if(-1!=e.indexOf(this.childrenAttrs,b))this.getChildren(a,c.hitch(this,function(b){this.onChildrenChange(a,b)}));else this.onChange(a)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array",
"dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(e,a,b,c,d){return a("dijit.tree.ForestStoreModel",d,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(a){this.root={store:this,root:!0,id:a.rootId,label:a.rootLabel,children:a.rootChildren}},mayHaveChildren:function(a){return a===this.root||this.inherited(arguments)},getChildren:function(a,b,d){a===this.root?this.root.children?b(this.root.children):this.store.fetch({query:this.query,onComplete:c.hitch(this,
function(a){this.root.children=a;b(a)}),onError:d}):this.inherited(arguments)},isItem:function(a){return a===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(a){if(a.identity==this.root.id){var c=a.scope||b.global;a.onItem&&a.onItem.call(c,this.root)}else this.inherited(arguments)},getIdentity:function(a){return a===this.root?this.root.id:this.inherited(arguments)},getLabel:function(a){return a===this.root?this.root.label:this.inherited(arguments)},newItem:function(a,b,c){return b===
this.root?(this.onNewRootItem(a),this.store.newItem(a)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(a,b,c,d,e){if(b===this.root&&!d)this.onLeaveRoot(a);this.inherited(arguments,[a,b===this.root?null:b,c===this.root?null:c,d,e]);if(c===this.root)this.onAddToRoot(a)},onAddToRoot:function(a){console.log(this,": item ",a," added to root")},onLeaveRoot:function(a){console.log(this,": item ",a," removed from root")},_requeryTop:function(){var a=this.root.children||[];this.store.fetch({query:this.query,
onComplete:c.hitch(this,function(b){this.root.children=b;if(a.length!=b.length||e.some(a,function(a,c){return b[c]!=a}))this.onChildrenChange(this.root,b)})})},onNewItem:function(a,b){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(a){-1!=e.indexOf(this.root.children,a)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(a,b,c,d){this._requeryTop();this.inherited(arguments)}})})},"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),
function(e,a,b,c,d,f,k,n,t,m,l){return a("dijit.tree._dndSelector",l,{constructor:function(){this.selection={};this.anchor=null;this.events.push(n(this.tree.domNode,t.press,c.hitch(this,"onMouseDown")),n(this.tree.domNode,t.release,c.hitch(this,"onMouseUp")),n(this.tree.domNode,t.move,c.hitch(this,"onMouseMove")),n(this.tree.domNode,m.press,c.hitch(this,"onClickPress")),n(this.tree.domNode,m.release,c.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var a=[],b=this.selection,
c;for(c in b)a.push(b[c]);return a},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(a,b){this.setSelection(this.getSelectedTreeNodes().concat([a]));b&&(this.anchor=a);return a},removeTreeNode:function(a){var b=e.filter(this.getSelectedTreeNodes(),function(b){return!f.isDescendant(b.domNode,a.domNode)});this.setSelection(b);return a},isTreeNodeSelected:function(a){return a.id&&!!this.selection[a.id]},
setSelection:function(a){var b=this.getSelectedTreeNodes();e.forEach(this._setDifference(b,a),c.hitch(this,function(a){a.setSelected(!1);this.anchor==a&&delete this.anchor;delete this.selection[a.id]}));e.forEach(this._setDifference(a,b),c.hitch(this,function(a){a.setSelected(!0);this.selection[a.id]=a}));this._updateSelectionProperties()},_setDifference:function(a,b){e.forEach(b,function(a){a.__exclude__=!0});a=e.filter(a,function(a){return!a.__exclude__});e.forEach(b,function(a){delete a.__exclude__});
return a},_updateSelectionProperties:function(){var a=this.getSelectedTreeNodes(),b=[],c=[];e.forEach(a,function(a){var d=a.getTreePath();c.push(a);b.push(d)},this);a=e.map(c,function(a){return a.item});this.tree._set("paths",b);this.tree._set("path",b[0]||[]);this.tree._set("selectedNodes",c);this.tree._set("selectedNode",c[0]||null);this.tree._set("selectedItems",a);this.tree._set("selectedItem",a[0]||null)},onClickPress:function(a){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(a.target,
this.current))){"mousedown"==a.type&&k.isLeft(a)&&a.preventDefault();var b="keydown"==a.type?this.tree.focusedChild:this.current;if(b){var c=d.getCopyKeyState(a),e=b.id;this.singular||a.shiftKey||!this.selection[e]?(this._doDeselect=!1,this.userSelect(b,c,a.shiftKey)):this._doDeselect=!0}}},onClickRelease:function(a){this._doDeselect&&(this._doDeselect=!1,this.userSelect("keyup"==a.type?this.tree.focusedChild:this.current,d.getCopyKeyState(a),a.shiftKey))},onMouseMove:function(){this._doDeselect=
!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(a,b){if(a===b)return 0;if("sourceIndex"in document.documentElement)return a.sourceIndex-b.sourceIndex;if("compareDocumentPosition"in document.documentElement)return a.compareDocumentPosition(b)&2?1:-1;if(document.createRange){var c=doc.createRange();c.setStartBefore(a);a=doc.createRange();a.setStartBefore(b);return c.compareBoundaryPoints(c.END_TO_END,a)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");
},userSelect:function(a,b,c){if(this.singular)this.anchor==a&&b?this.selectNone():(this.setSelection([a]),this.anchor=a);else if(c&&this.anchor){b=this._compareNodes(this.anchor.rowNode,a.rowNode);c=this.anchor;0>b?b=c:(b=a,a=c);for(c=[];b!=a;)c.push(b),b=this.tree._getNext(b);c.push(a);this.setSelection(c)}else this.selection[a.id]&&b?this.removeTreeNode(a):b?this.addTreeNode(a,!0):(this.setSelection([a]),this.anchor=a)},getItem:function(a){return{data:this.selection[a],type:["treeNode"]}},forInSelectedItems:function(a,
c){c=c||b.global;for(var d in this.selection)a.call(c,this.getItem(d),d,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(e,a,b,c,d,f){return a("dijit.tree._dndContainer",null,{constructor:function(a,n){this.tree=a;this.node=a.domNode;c.mixin(this,n);this.containerState="";b.add(this.node,"dojoDndContainer");this.events=[d(this.node,f.enter,c.hitch(this,"onOverEvent")),d(this.node,f.leave,
c.hitch(this,"onOutEvent")),e.after(this.tree,"_onNodeMouseEnter",c.hitch(this,"onMouseOver"),!0),e.after(this.tree,"_onNodeMouseLeave",c.hitch(this,"onMouseOut"),!0),d(this.node,"dragstart, selectstart",function(a){a.preventDefault()})]},destroy:function(){for(var a;a=this.events.pop();)a.remove();this.node=this.parent=null},onMouseOver:function(a){this.current=a},onMouseOut:function(){this.current=null},_changeState:function(a,c){var d="dojoDnd"+a;a=a.toLowerCase()+"State";b.replace(this.node,d+
c,d+this[a]);this[a]=c},_addItemClass:function(a,c){b.add(a,"dojoDndItem"+c)},_removeItemClass:function(a,c){b.remove(a,"dojoDndItem"+c)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"jimu/dijit/LayerChooserFromMapWithDropbox":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/keys dojo/Evented dojo/Deferred dijit/popup dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/LayerChooserFromMapWithDropbox.html jimu/LayerInfos/LayerInfos".split(" "),
function(e,a,b,c,d,f,k,n,t,m,l,h){return e([t,m,f],{templateString:l,baseClass:"jimu-layer-chooser-from-map-withdropbox",declaredClass:"jimu.dijit.LayerChooserFromMapWithDropbox",_selectedItem:null,_isLayerChooserShow:!1,layerInfosObj:null,layerChooser:null,customClass:"",postMixInProperties:function(){this.inherited(arguments);this.nls=window.jimuNls.queryableLayerSource},postCreate:function(){this.inherited(arguments);this.layerInfosObj=h.getInstanceSync();this.layerChooser.domNode.style.zIndex=
1;this.layerChooser.tree.domNode.style.borderTop="0";this.layerChooser.tree.domNode.style.maxHeight="290px";this.own(c(this.layerChooser,"tree-click",a.hitch(this,this._onTreeClick)));this.own(c(this.layerChooser,"update",a.hitch(this,this._onLayerChooserUpdate)));this.own(c(document.body,"click",a.hitch(this,this._onBodyClicked)));this.own(c(document.body,"keydown",a.hitch(this,function(a){a.keyCode===d.ENTER&&this._onBodyClicked(a)})));this.own(c(this.layerChooser.domNode,"keydown",a.hitch(this,
function(a){a.keyCode===d.ESCAPE&&this.hideLayerChooser()})))},destroy:function(){this.hideLayerChooser();this.layerChooser&&this.layerChooser.destroy();this.layerChooser=null;this.inherited(arguments)},getLayerChooser:function(){return this.layerChooser},setSelectedLayer:function(b){var c=new k;if(b){var d=this.layerInfosObj.getLayerInfoById(b.id);d?this.layerChooser.filter(d).then(a.hitch(this,function(a){a?(this._onSelectNewItem({layerInfo:d,name:d.title,url:b.url}),c.resolve(!0)):c.resolve(!1)}),
a.hitch(this,function(){c.resolve(!1)})):c.resolve(!1)}else this._onSelectNewItem(null),c.resolve(!0);return c},getSelectedItem:function(){return this._selectedItem},getSelectedItems:function(){return[this._selectedItem]},_onBodyClicked:function(a){a=a.target||a.srcElement;a===this.domNode||b.isDescendant(a,this.domNode)||a===this.layerChooser.domNode||b.isDescendant(a,this.layerChooser.domNode)||this.hideLayerChooser()},_onDropDownClick:function(a){a.stopPropagation();a.preventDefault();this._isLayerChooserShow?
this.hideLayerChooser():(this.isActive=!0,this.showLayerChooser())},_onDropDownKeydown:function(a){a.keyCode===d.ENTER&&this._onDropDownClick(a)},_getSelectedItems:function(){return this.layerChooser.getSelectedItems()},showLayerChooser:function(){this.layerChooser.domNode.style.minWidth=this.domNode.clientWidth+2+"px";n.open({parent:this,popup:this.layerChooser,around:this.domNode});var a=this.layerChooser.domNode.parentNode;a&&(b.addClass(a,"jimu-layer-chooser-from-map-withdropbox-popup"),this.customClass&&
b.addClass(a,this.customClass),this.layerChooser.tree.domNode.focus());this._isLayerChooserShow=!0},hideLayerChooser:function(){n.close(this.layerChooser);this._isLayerChooserShow=!1;this.isActive&&(this.dropDownBtn.focus(),this.isActive=!1)},_onLayerChooserUpdate:function(){this._selectedItem&&this.layerChooser.onlyShowVisible&&!this._selectedItem.layerInfo.isShowInMap()&&(this._selectedItem=null,this.emit("selection-change",[]))},_onSelectNewItem:function(c){var d=a.getObject("layerInfo.id",!1,
this._selectedItem)||-1,e=a.getObject("layerInfo.id",!1,c)||-1,d=d!==e;this._selectedItem=c;this.hideLayerChooser();c=a.getObject("layerInfo.title",!1,this._selectedItem)||"";this.layerNameNode.innerHTML=c;b.setAttr(this.layerNameNode,"title",c);c=a.getObject("layerInfo.layerObject",!1,this._selectedItem);d&&this.emit("selection-change",[c])},_onTreeClick:function(){var a=this._getSelectedItems();this._onSelectNewItem(0<a.length?a[0]:null)}})})},"widgets/ParcelDrafter/layerUtils":function(){define(["dojo/_base/declare",
"dijit/_WidgetBase","dojo/_base/array","dojo/_base/lang"],function(e,a,b,c){return e([a],{map:null,getPopupInfo:!0,getRenderer:!0,postCreate:function(){},getLayerDetailsFromMap:function(a,e,k){var d={},f;this.map&&this.map.webMapResponse&&this.map.webMapResponse.itemInfo&&this.map.webMapResponse.itemInfo.itemData&&this.map.webMapResponse.itemInfo.itemData.operationalLayers&&b.forEach(this.map.webMapResponse.itemInfo.itemData.operationalLayers,c.hitch(this,function(m){m.layerObject&&("ArcGISMapServiceLayer"===
m.layerType||"ArcGISTiledMapServiceLayer"===m.layerType?(f=k&&k.substring(0,k.lastIndexOf("_")),f&&m.id!==f||(d.isMapServer=!0,a.substring(0,a.length-1)===m.url&&(b.forEach(m.resourceInfo.layers,c.hitch(this,function(a){a.id===parseInt(e,10)&&(d.title=a.name)})),b.forEach(m.layers,c.hitch(this,function(a){a.id===parseInt(e,10)&&(a.name&&(d.title=a.name),this.getPopupInfo&&(d.popupInfo=a.popupInfo),a.layerDefinition&&(a.layerDefinition.definitionExpression&&(d.definitionExpression=a.layerDefinition.definitionExpression),
this.getRenderer&&a.layerDefinition.drawingInfo&&a.layerDefinition.drawingInfo.renderer&&(d.renderer=a.layerDefinition.drawingInfo.renderer)))}))))):k&&m.id!==k||m.url.replace(/.*?:\/\//g,"").toLowerCase()!==(a+e).replace(/.*?:\/\//g,"").toLowerCase()||m.id!==k||(d.isMapServer=!1,d.title=m.title,this.getPopupInfo&&(d.popupInfo=m.popupInfo),m.layerDefinition&&(m.layerDefinition.definitionExpression&&(d.definitionExpression=m.layerDefinition.definitionExpression),this.getRenderer&&m.layerDefinition.drawingInfo&&
m.layerDefinition.drawingInfo.renderer&&(d.renderer=m.layerDefinition.drawingInfo.renderer))))}));return d}})})},"widgets/ParcelDrafter/utils":function(){define([],function(){var e={bearingFieldPlaces:2,planSettingsOptions:{directionOrAngleType:["northAzimuth","southAzimuth","quadrantBearing"],directionOrAngleUnits:["decimalDegree","degreeMinuteSeconds"],distanceAndLengthUnits:["uSSurveyFeet","meters"],areaUnits:["squareUSSurveyFeet","acres","squareMeters"],circularCurveParameters:["radiusAndChordLength",
"radiusAndArcLength"]},getQuadrant:function(a){return{"-1":"NE","-2":"SE","-3":"SW","-4":"NW"}[a]},getQuadrantShortcut:function(a){a=a.toUpperCase();return{NE:"-1",SE:"-2",SW:"-3",NW:"-4"}[a]},getQuadrantShortcutFromDD:function(a){var b;0<=a&&90>=a?b="-1":90<a&&180>=a?b="-2":180<a&&270>a?b="-3":270<=a&&360>a&&(b="-4");return b},getQuadrantAngleFromNADD:function(a){a=e.getQuadrantAngleAndShortcut(a);return a.quadrant.charAt(0)+a.quadrantAngle+a.quadrant.charAt(1)},getSouthAzimuthFromNorthAzimuth:function(a){var b;
180<a?b=a-180:180>a?b=a+180:180===a&&(b=0);return b},DMStoDD:function(a){var b,c,d;b=Math.abs(parseFloat(a.degree));c=parseFloat(a.minutes);d=parseFloat(a.seconds);b=b+c/60+d/3600;a.isNegative&&(b*=-1);return b},DDtoDMS:function(a){var b,c;b=3600*a.angle;a=Math.round(b%60);a=60==a?0:a;c=(b-a)/60;b=Math.round(c%60);b=60==b?0:b;return{degree:Math.round((c-b)/60),minutes:b,seconds:a}},getBearingObjForFormat0:function(a){var b,c;b={};b.degree=parseInt(a[1],10);b.minutes=parseInt(a[2]||0,10);b.seconds=
parseInt(a[3]||0,10);b.quadrant=e.getQuadrant("-"+a[4]);b.quadrantShortcut="-"+a[4];"string"===typeof a[1]&&(c="-"===a[1].charAt(0));b.decimalDegrees=e.DMStoDD({degree:b.degree,minutes:b.minutes,seconds:b.seconds,isNegative:c});return b},getBearingObjForFormat1:function(a){var b,c;b={};b.degree=parseInt(a[2],10);b.minutes=parseInt(a[3]||0,10);b.seconds=parseInt(a[4]||0,10);b.quadrant=a[1]+a[5];b.quadrantShortcut=e.getQuadrantShortcut(a[1]+a[5]);"string"===typeof a[2]&&(c="-"===a[2].charAt(0));b.decimalDegrees=
e.DMStoDD({degree:b.degree,minutes:b.minutes,seconds:b.seconds,isNegative:c});return b},getBearingObjForFormat2:function(a){var b,c;b={};b.degree=parseInt(a[2],10);b.minutes=parseInt(a[3]||0,10);b.seconds=parseInt(a[4]||0,10);b.quadrant=a[1]+a[5];b.quadrantShortcut=e.getQuadrantShortcut(a[1]+a[5]);"string"===typeof a[2]&&(c="-"===a[2].charAt(0));b.decimalDegrees=e.DMStoDD({degree:b.degree,minutes:b.minutes,seconds:b.seconds,isNegative:c});return b},getBearingObjForFormat3:function(a){var b,c;b={};
b.degree=parseInt(a[1],10);b.minutes=parseInt(a[2]||0,10);b.seconds=parseInt(a[3]||0,10);"string"===typeof a[1]&&(c="-"===a[1].charAt(0));b.decimalDegrees=e.DMStoDD({degree:b.degree,minutes:b.minutes,seconds:b.seconds,isNegative:c});b.quadrantShortcut=e.getQuadrantShortcutFromDD(b.decimalDegrees);b.quadrant=e.getQuadrant(b.quadrantShortcut);return b},getBearingObjForFormat4:function(a){var b,c;b=e.DDtoDMS({angle:a[1]});c={};c.degree=b.degree;c.minutes=b.minutes;c.seconds=b.seconds;c.decimalDegrees=
a[1];c.quadrantShortcut=e.getQuadrantShortcutFromDD(c.decimalDegrees);c.quadrant=e.getQuadrant(c.quadrantShortcut);return c},getBearingObjForFormat5:function(a){var b,c;b={};b.degree=parseInt(a[1],10);b.minutes=parseInt(a[2]||0,10);b.seconds=parseInt(a[3]||0,10);"string"===typeof a[1]&&(c="-"===a[1].charAt(0));b.decimalDegrees=e.DMStoDD({degree:b.degree,minutes:b.minutes,seconds:b.seconds,isNegative:c});b.quadrantShortcut=e.getQuadrantShortcutFromDD(b.decimalDegrees);b.quadrant=e.getQuadrant(b.quadrantShortcut);
return b},getBearingObjForFormat6:function(a){var b,c;b={};b.degree=parseInt(a[1],10);b.minutes=parseInt(a[2]||0,10);b.seconds=parseInt(a[3]||0,10);b.quadrantShortcut=a[4];b.quadrant=e.getQuadrant(b.quadrantShortcut);"string"===typeof a[1]&&(c="-"===a[1].charAt(0));b.decimalDegrees=e.DMStoDD({degree:b.degree,minutes:b.minutes,seconds:b.seconds,isNegative:c});return b},getBearingObjForFormat7:function(a){var b,c;b={};b.decimalDegrees=a[2];c=e.DDtoDMS({angle:b.decimalDegrees});b.degree=parseInt(c.degree,
10);b.minutes=parseInt(c.minutes||0,10);b.seconds=parseInt(c.seconds||0,10);b.quadrant=a[1]+a[3];b.quadrantShortcut=e.getQuadrantShortcut(b.quadrant);return b},getBearingObjForFormat8:function(a){var b,c;b={};b.decimalDegrees=a[1];c=e.DDtoDMS({angle:b.decimalDegrees});b.degree=parseInt(c.degree,10);b.minutes=parseInt(c.minutes||0,10);b.seconds=parseInt(c.seconds||0,10);b.quadrantShortcut=a[2];b.quadrant=e.getQuadrant(b.quadrantShortcut);return b},getQuadrantAngleAndShortcut:function(a){var b={};0<=
a&&90>=a?(b.quadrantAngle=a,b.quadrant="NE"):90<a&&180>=a?(b.quadrantAngle=180-a,b.quadrant="SE"):180<a&&270>a?(b.quadrantAngle=a-180,b.quadrant="SW"):270<=a&&360>a&&(b.quadrantAngle=360-a,b.quadrant="NW");return b},roundSeconds:function(a){a=Number(a);return 10>a?"0"+a:a},showFixedPlacesAfterDecimal:function(a,b){var c=0;b||(b=2);a=a.toString();c=a.indexOf(".");0<c&&(a=a.slice(0,c+b+1));return Number(a)},honourPopupRounding:function(a,b){var c;if(isNaN(a)||null===a)a=4;c=Math.pow(10,a);b=Math.round(b*
c)/c;return b=b.toFixed(a)},convertBearingToOutputFormats:function(a){var b,c,d,f,k;b={};c={};360===a.degree&&(a.degree=0);b=a.decimalDegrees;360===b&&(b=0);c.naDD=b;c.naDDRound=e.honourPopupRounding(e.bearingFieldPlaces,b);360===Number(c.naDDRound)&&(c.naDDRound=0);d=10>a.minutes?"0"+a.minutes:a.minutes;f=a.seconds;0<Number(d)&&0<Number(e.roundSeconds(f))?c.naDMS=a.degree+"-"+d+"-"+e.roundSeconds(f):0===Number(d)&&0<Number(e.roundSeconds(f))?c.naDMS=a.degree+"-"+d+"-"+e.roundSeconds(f):0<Number(d)&&
0===Number(e.roundSeconds(f))?c.naDMS=a.degree+"-"+d+"-00":0===Number(d)&&0===Number(e.roundSeconds(f))&&(c.naDMS=a.degree+"-00-00");a=e.getQuadrantAngleAndShortcut(b);c.qb3DD=a.quadrant.charAt(0)+a.quadrantAngle+a.quadrant.charAt(1);c.qb3DDRound=a.quadrant.charAt(0)+e.honourPopupRounding(e.bearingFieldPlaces,a.quadrantAngle)+a.quadrant.charAt(1);d=e.DDtoDMS({angle:a.quadrantAngle});f=10>d.minutes?"0"+d.minutes:d.minutes;k=d.seconds;0<Number(f)&&0<Number(e.roundSeconds(k))?c.qb3DMS=a.quadrant.charAt(0)+
d.degree+"-"+f+"-"+e.roundSeconds(k)+a.quadrant.charAt(1):0===Number(f)&&0<Number(e.roundSeconds(k))?c.qb3DMS=a.quadrant.charAt(0)+d.degree+"-"+f+"-"+e.roundSeconds(k)+a.quadrant.charAt(1):0<Number(f)&&0===Number(e.roundSeconds(k))?c.qb3DMS=a.quadrant.charAt(0)+d.degree+"-"+f+"-00"+a.quadrant.charAt(1):0===Number(f)&&0===Number(e.roundSeconds(k))&&(c.qb3DMS=a.quadrant.charAt(0)+d.degree+"-00-00"+a.quadrant.charAt(1));b=e.getSouthAzimuthFromNorthAzimuth(b);360===b&&(b=0);c.saDD=b;c.saDDRound=e.honourPopupRounding(e.bearingFieldPlaces,
b);360===Number(c.saDDRound)&&(c.saDDRound=0);b=e.DDtoDMS({angle:b});360===b.degree&&(b.degree=0);a=10>b.minutes?"0"+b.minutes:b.minutes;d=b.seconds;0<Number(a)&&0<Number(e.roundSeconds(d))?c.saDMS=b.degree+"-"+a+"-"+e.roundSeconds(d):0===Number(a)&&0<Number(e.roundSeconds(d))?c.saDMS=b.degree+"-"+a+"-"+e.roundSeconds(d):0<Number(a)&&0===Number(e.roundSeconds(d))?c.saDMS=b.degree+"-"+a+"-00":0===Number(a)&&0===Number(e.roundSeconds(d))&&(c.saDMS=b.degree+"-00-00");return c},getBearingDetailsOfRequiredFormat:function(a,
b){var c={};switch(b){case 0:c=e.getBearingObjForFormat0(a);break;case 1:c=e.getBearingObjForFormat1(a);break;case 2:c=e.getBearingObjForFormat2(a);break;case 3:c=e.getBearingObjForFormat3(a);break;case 4:c=e.getBearingObjForFormat4(a);break;case 5:c=e.getBearingObjForFormat5(a);break;case 6:c=e.getBearingObjForFormat6(a);break;case 7:c=e.getBearingObjForFormat7(a);break;case 8:c=e.getBearingObjForFormat8(a)}return e.convertBearingToOutputFormats(c)},getBearingFormatArr:function(){var a=[];a.push({regex:/^((?:\-)?(?:3[0-5]\d|[12]\d{2}|[0-9]\d?|0))(?:\-(0|[0-5]?\d)\-(0|[0-5]\d))?\-([1-4])$/,
type:"degreeMinuteSeconds"});a.push({regex:/^([nNsS])((?:\-)?(?:3[0-5]\d|[12]\d{2}|[0-9]\d?|0))(?:\-(0|[0-5]?\d)\-(0|[0-5]\d))?([eEwW])$/,type:"degreeMinuteSeconds"});a.push({regex:/^([nNsS])((?:\-)?(?:3[0-5]\d|[12]\d{2}|[0-9]\d?|0))(?:\.([0-5]\d)(?:([0-5]\d))?)?([eEwW])$/,type:"degreeMinuteSeconds"});a.push({regex:/^((?:\-)?(?:3[0-5]\d|[12]\d{2}|[0-9]\d?|0))(?:\.([0-5]\d)(?:([0-5]\d))?)?$/,type:"degreeMinuteSeconds"});a.push({regex:/^((?:(?:\-?)(?:3[0-5]\d|[12]\d{2}|[0-9]\d?|0)(?:\.\d+)?)|(?:\-?)(?:\.\d+))$/,
type:"decimalDegree"});a.push({regex:/^((?:\-)?(?:3[0-5]\d|[12]\d{2}|[0-9]\d?|0))(?:\-(0|[0-5]?\d)\-((?:[0-5]\d)))?$/,type:"degreeMinuteSeconds"});a.push({regex:/^((?:\-)?(?:3[0-5]\d|[12]\d{2}|[0-9]\d?|0))(?:\.([0-5]\d)(?:([0-5]\d))?)?(\-[1-4])$/,type:"degreeMinuteSeconds"});a.push({regex:/^([nNsS])((?:(?:\-?)(?:3[0-5]\d|[12]\d{2}|[0-9]\d?|0)(?:\.\d+)?)|(?:\-?)(?:\.\d+))([eEwW])$/,type:"decimalDegree"});a.push({regex:/^((?:(?:\-?)(?:3[0-5]\d|[12]\d{2}|[0-9]\d?|0)(?:\.\d+)?)|(?:\-?)(?:\.\d+))(\-[1-4])$/,
type:"decimalDegree"});return a},getNorthAzimuthAngle:function(a,b){b=b.toUpperCase();a=Number(a);switch(b){case "-1":case "NE":return(a+360)%360;case "-2":case "SE":return(540-a)%360;case "-3":case "SW":return(540+a)%360;case "-4":case "NW":return(360-a)%360}},convertBearingToNorthAzimuth:function(a,b,c){switch(b){case 0:b=e.getBearingObjForFormat0(a);b=e.getNorthAzimuthAngle(b.decimalDegrees,"-"+a[4]);b=e.DDtoDMS({angle:b});a[1]=b.degree;a[2]=b.minutes;a[3]=b.seconds;break;case 1:b=e.getBearingObjForFormat1(a);
b=e.getNorthAzimuthAngle(b.decimalDegrees,a[1]+a[5]);b=e.DDtoDMS({angle:b});a[2]=b.degree;a[3]=b.minutes;a[4]=b.seconds;break;case 2:b=e.getBearingObjForFormat2(a);b=e.getNorthAzimuthAngle(b.decimalDegrees,a[1]+a[5]);b=e.DDtoDMS({angle:b});a[2]=b.degree;a[3]=b.minutes;a[4]=b.seconds;break;case 3:"northAzimuth"===c.directionOrAngleType||"quadrantBearing"===c.directionOrAngleType?(b=e.getBearingObjForFormat3(a),b=e.getNorthAzimuthAngle(b.decimalDegrees,"-1"),b=e.DDtoDMS({angle:b}),a[1]=b.degree,a[2]=
b.minutes,a[3]=b.seconds):"southAzimuth"===c.directionOrAngleType&&(b=e.getBearingObjForFormat3(a),b=e.getNorthAzimuthAngle(b.decimalDegrees,"-3"),b=e.DDtoDMS({angle:b}),a[1]=b.degree,a[2]=b.minutes,a[3]=b.seconds);break;case 4:"northAzimuth"===c.directionOrAngleType||"quadrantBearing"===c.directionOrAngleType?a[1]=e.getNorthAzimuthAngle(a[1],"-1"):"southAzimuth"===c.directionOrAngleType&&(a[1]=e.getNorthAzimuthAngle(a[1],"-3"));break;case 5:"northAzimuth"===c.directionOrAngleType?(b=e.getBearingObjForFormat5(a),
b=e.getNorthAzimuthAngle(b.decimalDegrees,"-1"),b=e.DDtoDMS({angle:b}),a[1]=b.degree,a[2]=b.minutes,a[3]=b.seconds):"southAzimuth"===c.directionOrAngleType?(b=e.getBearingObjForFormat5(a),b=e.getNorthAzimuthAngle(b.decimalDegrees,"-3"),b=e.DDtoDMS({angle:b}),a[1]=b.degree,a[2]=b.minutes,a[3]=b.seconds):"quadrantBearing"===c.directionOrAngleType&&(a=null);break;case 6:b=e.getBearingObjForFormat6(a);b=e.getNorthAzimuthAngle(b.decimalDegrees,a[4]);b=e.DDtoDMS({angle:b});a[1]=b.degree;a[2]=b.minutes;
a[3]=b.seconds;break;case 7:a[2]=e.getNorthAzimuthAngle(a[2],a[1]+a[3]);break;case 8:a[1]=e.getNorthAzimuthAngle(a[1],a[2])}return a},categorizeBearingFormat:function(a,b){var c,d,f;a=a.toString();c=e.getBearingFormatArr();for(f=0;f<c.length;f++)if(c[f].type===b.directionOrAngleUnits&&(d=c[f].regex.exec(a.trim()))&&0<d.length){d=e.convertBearingToNorthAzimuth(d,f,b);break}if(!d)for(f=0;f<c.length;f++)if(c[f].type!==b.directionOrAngleUnits&&(d=c[f].regex.exec(a.trim()))&&0<d.length){d=e.convertBearingToNorthAzimuth(d,
f,b);break}return d?e.getBearingDetailsOfRequiredFormat(d,f):null},metersToUSSurveyFeet:function(a){a=Number(a);return 3.28083333333*a},usSurveyFeetToMeters:function(a){a=Number(a);return.304800609601*a},feetToUSSurveyFeet:function(a){a=Number(a);return e.metersToUSSurveyFeet(.3048*a)},feetToMeters:function(a){a=Number(a);return.3048*a},usSurveyFeetToFeet:function(a){a=Number(a);return 1.000001999999281*a},metersToFeet:function(a){a=Number(a);return 3.280839895*a},getLengthObjForFormat0:function(a,
b){var c;c={};"uSSurveyFeet"===b?(c.uSSurveyFeet=Number(a[0]),c.uSSurveyFeetRound=Math.round(1E4*c.uSSurveyFeet)/1E4,c.meters=e.usSurveyFeetToMeters(a[0]),c.metersRound=Math.round(1E4*c.meters)/1E4,c.feet=e.usSurveyFeetToFeet(c.uSSurveyFeet),c.feetRound=Math.round(1E4*c.feet)/1E4):"meters"===b&&(c.uSSurveyFeet=e.metersToUSSurveyFeet(a[0]),c.uSSurveyFeetRound=Math.round(1E4*c.uSSurveyFeet)/1E4,c.meters=Number(a[0]),c.metersRound=Math.round(1E4*c.meters)/1E4,c.feet=e.metersToFeet(c.meters),c.feetRound=
Math.round(1E4*c.feet)/1E4);return c},getLengthObjForFormat1:function(a){var b;b={};b.uSSurveyFeet=Number(a[2]);b.uSSurveyFeetRound=Math.round(1E4*b.uSSurveyFeet)/1E4;b.meters=e.usSurveyFeetToMeters(a[2]);b.metersRound=Math.round(1E4*b.meters)/1E4;b.feet=e.usSurveyFeetToFeet(b.uSSurveyFeet);b.feetRound=Math.round(1E4*b.feet)/1E4;return b},getLengthObjForFormat2:function(a){var b;b={};b.uSSurveyFeet=e.metersToUSSurveyFeet(a[2]);b.uSSurveyFeetRound=Math.round(1E4*b.uSSurveyFeet)/1E4;b.meters=Number(a[2]);
b.metersRound=Math.round(1E4*b.meters)/1E4;b.feet=e.metersToFeet(b.meters);b.feetRound=Math.round(1E4*b.feet)/1E4;return b},getLengthObjForFormat3:function(a){var b;b={};b.uSSurveyFeet=e.feetToUSSurveyFeet(a[2]);b.uSSurveyFeetRound=Math.round(1E4*b.uSSurveyFeet)/1E4;b.meters=e.feetToMeters(a[2]);b.metersRound=Math.round(1E4*b.meters)/1E4;b.feet=Number(a[2]);b.feetRound=Math.round(1E4*b.feet)/1E4;return b},categorizeLengthFormat:function(a,b){var c,d,f;c=[];a=a.toString();c.push(/^((\-?)((0?|([1-9]\d*))(\.\d+)?))$/);
c.push(/^(((\-?)((0?|([1-9]\d*))(\.\d+)?))(ft|FT|fT|Ft))$/);c.push(/^(((\-?)((0?|([1-9]\d*))(\.\d+)?))(m|M))$/);for(f=0;f<c.length&&!((d=c[f].exec(a.trim()))&&0<d.length);f++);d?(a=e.getLengthOfRequiredFormat(d,f,b))&&isNaN(a.meters)&&(a=null):a=null;return a},categorizeLengthFormatForFeet:function(a){var b,c,d;b=[];a=a.toString();b.push(/^((\-?)((0?|([1-9]\d*))(\.\d+)?))$/);for(d=0;d<b.length&&!((c=b[d].exec(a.trim()))&&0<c.length);d++);return c?e.getLengthObjForFormat3(c):null},getLengthOfRequiredFormat:function(a,
b,c){var d={};switch(b){case 0:d=e.getLengthObjForFormat0(a,c);break;case 1:d=e.getLengthObjForFormat1(a);break;case 2:d=e.getLengthObjForFormat2(a)}return d}};return e})},"widgets/ParcelDrafter/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/ParcelDrafter/setting/SymbolChooserPopup.html":'\x3cdiv style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3cdiv class\x3d"esriCTSymbolChooserContainer"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"symbolData" title\x3d"${symbolChooserTitle}" class\x3d"common-input esriCTSymbolData"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonsDiv" class\x3d"buttonsDiv"\x3e\r\n        \x3cdiv class\x3d"button-container button-container-absolute" style\x3d"padding: 0px;"\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"okButton" tabindex\x3d"0"\x3e\r\n                ${nls.common.ok}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/ParcelDrafter/setting/LayerChooser.html":'\x3cdiv style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3cdiv class\x3d"esriCTLayerSelectorNode" data-dojo-attach-point\x3d"layerSelectorContainer"\x3e\r\n        \x3c!-- Single Layer Selector --\x3e\r\n        \x3cdiv style\x3d"width: 98%;"  data-dojo-attach-point\x3d"singleLayerChooser"\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Related Layer Selector --\x3e\r\n        \x3cdiv class\x3d"esriCTLayerSelectorDiv"  data-dojo-attach-point\x3d"relatedLayerChooser"\x3e\r\n            \x3cdiv class\x3d"esriCTLayerChooserContainer row"\x3e\r\n                \x3cdiv class\x3d"esriCTLayerChooserFieldLabel esriCTEllipsis" title\x3d"${nls.parcelPolygonLayer.selectPolygonLayerLabel}"\x3e\r\n                    ${nls.parcelPolygonLayer.selectPolygonLayerLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerChooserField"\x3e\r\n                    \x3cdiv style\x3d"width: 98%;" data-dojo-attach-point\x3d"relatedLayerChooserDiv"\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint"\x3e\r\n                        ${nls.parcelPolygonLayer.selectPolygonLayerHintText}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerChooserContainer row"\x3e\r\n                \x3cdiv class\x3d"esriCTLayerChooserFieldLabel esriCTEllipsis" title\x3d"${nls.parcelLineLayer.selectLayerLabel}"\x3e\r\n                    ${nls.parcelLineLayer.selectLayerLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerChooserField"\x3e\r\n                    \x3cselect style\x3d"width: 98%;" data-dojo-type\x3d"dijit/form/Select"  data-dojo-attach-point\x3d"relatedLayerSelector"\x3e\r\n                \x3c/select\x3e\r\n                    \x3cdiv class\x3d"esriCTHint"\x3e\r\n                        ${nls.parcelLineLayer.selectLayerHintText}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:jimu/dijit/templates/LayerChooserFromMapWithDropbox.html":'\x3cdiv\x3e\r\n\x3ctable data-dojo-attach-point\x3d"dropDownBtn" data-dojo-attach-event\x3d"onclick: _onDropDownClick,onkeydown: _onDropDownKeydown"\r\n  tabindex\x3d"0" title\x3d"${nls.selectLayer}"\x3e\r\n    \x3ccolgroup\x3e\r\n      \x3ccol width\x3d"10px"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"30px"\x3e\x3c/col\x3e\r\n    \x3c/colgroup\x3e\r\n    \x3ctbody\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd\x3e\x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"layer-name jimu-ellipsis" data-dojo-attach-point\x3d"layerNameNode"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"drop-select jimu-float-trailing" data-dojo-attach-point\x3d"dropArrowNode"\x3e\r\n            \x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/tbody\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/ParcelDrafter/setting/Setting.html":'\x3cdiv style\x3d"width: 100%;height: 100%;"\x3e\r\n\t\x3cdiv class\x3d"esriCTMainContainer"\x3e\r\n\t\t\x3cdiv class\x3d".esriCTTabDiv" data-dojo-attach-point\x3d"tabDiv"\x3e\r\n\t\t\t\x3c!--Parcel layer tab contents--\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"parcelLineLayerNode" class\x3d"esriCTFullHeight esriCTTabNode"\x3e\r\n\t\t\t\t\x3c!--1.Parcel layer chooser--\x3e\r\n\t\t\t\t\x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"esriCTSelectLayerLabel esriCTEllipsis"\x3e\r\n\t\t\t\t\t\t${nls.selectLayerLabel}\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"esriCTSelectedLayersDiv" data-dojo-attach-point\x3d"layersNode"\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"esriCTSetButton jimu-btn jimu-float-trailing" data-dojo-attach-point\x3d"selectLineLayerBtnNode"\x3e\r\n\t\t\t\t\t\t\t${nls.setBtnLabel}\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"esriCTHint esriCTLayerHint"\x3e\r\n\t\t\t\t\t\t\t${nls.selectLayerHintText}\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c!--2.Start/Rotation point symbol selectors--\x3e\r\n\t\t\t\t\x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"esriCTLabel esriCTPointSymbolLabel esriCTEllipsis"\x3e\r\n\t\t\t\t\t\t${nls.parcelLineLayer.startOrRotationSymbolLabel}\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"esriCTPreviewField" data-dojo-attach-point\x3d"startOrRotationSymbolNode"\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"esriCTHint esriCTPreviewHintField"\x3e\r\n\t\t\t\t\t\t${nls.parcelLineLayer.startOrRotationSymbolHintText}\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c!--3.Parcel point symbol selectors--\x3e\r\n\t\t\t\t\x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"esriCTLabel esriCTPointSymbolLabel esriCTEllipsis"\x3e\r\n\t\t\t\t\t\t${nls.parcelLineLayer.parcelPointSymbolLabel}\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"esriCTPreviewField" data-dojo-attach-point\x3d"pointSymbolNode"\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"esriCTHint esriCTPreviewHintField"\x3e\r\n\t\t\t\t\t\t${nls.parcelLineLayer.parcelPointSymbolHintText}\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c!--4.Line Layer field selectors--\x3e\r\n\t\t\t\t\x3cdiv class\x3d"esriCTMainFieldsetContainer row"\x3e\r\n\t\t\t\t\t\x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n\t\t\t\t\t\t\x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.parcelLineLayer.selectFieldLegendLabel}\x3c/legend\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"esriCTFieldsContainer"\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTField"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTLabel esriCTEllipsis"\x3e${nls.parcelLineLayer.bearingFieldLabel}\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTDropBoxContainerLeft"\x3e\x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"bearingFieldNode"\x3e\r\n         \t   \t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTField"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTLabel esriCTEllipsis"\x3e${nls.parcelLineLayer.chordLengthFieldLabel}\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTDropBoxContainerRight"\x3e\x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"chordLengthFieldNode"\x3e\r\n         \t   \t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTField"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTLabel esriCTEllipsis"\x3e${nls.parcelLineLayer.distanceFieldLabel}\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTDropBoxContainerLeft"\x3e\x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"distanceFieldNode"\x3e\r\n         \t   \t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTField"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTLabel esriCTEllipsis"\x3e${nls.parcelLineLayer.sequenceIdFieldLabel}\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTDropBoxContainerRight"\x3e\x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"sequenceIdFieldNode"\x3e\r\n         \t   \t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTField"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTLabel esriCTEllipsis"\x3e${nls.parcelLineLayer.radiusFieldLabel}\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTDropBoxContainerLeft"\x3e\x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"radiusFieldNode"\x3e\r\n         \t   \t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTField"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTLabel esriCTEllipsis"\x3e${nls.parcelLineLayer.foreignKeyFieldLabel}\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTDropBoxContainerRight"\x3e\x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"foreignKeyFieldNode"\x3e\r\n         \t   \t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTField"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTLabel esriCTEllipsis"\x3e${nls.parcelLineLayer.arcLengthFieldLabel}\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTDropBoxContainerLeft"\x3e\x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"arcLengthFieldNode"\x3e\r\n         \t   \t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTField"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTLabel esriCTEllipsis"\x3e${nls.parcelLineLayer.lineTypeFieldLabel}\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTDropBoxContainerRight"\x3e\x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"lineTypeFieldNode"\x3e\r\n         \t   \t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTLineTypeTableContanier row"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"lineTypeNode"\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/fieldset\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c!--5. Polygon Layer field selectors--\x3e\r\n\t\t\t\t\x3cdiv class\x3d"esriCTMainFieldsetContainer row"\x3e\r\n\t\t\t\t\t\x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n\t\t\t\t\t\t\x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.parcelPolygonLayer.selectFieldLegendLabel}\x3c/legend\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"esriCTFieldsContainer"\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTField"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTLabel esriCTEllipsis"\x3e${nls.parcelPolygonLayer.parcelNameLabel}\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTDropBoxContainerLeft"\x3e\x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"parcelNameFieldNode"\x3e\r\n         \t   \t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTField"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTLabel esriCTEllipsis"\x3e${nls.parcelPolygonLayer.rotationLabel}\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTDropBoxContainerRight"\x3e\x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"rotationFieldNode"\x3e\r\n         \t   \t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTField"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTLabel esriCTEllipsis"\x3e${nls.parcelPolygonLayer.planNameLabel}\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTDropBoxContainerLeft"\x3e\x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"planNameFieldNode"\x3e\r\n         \t   \t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTField"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTLabel esriCTEllipsis"\x3e${nls.parcelPolygonLayer.scalingLabel}\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTDropBoxContainerRight"\x3e\x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"scaleFieldNode"\x3e\r\n         \t   \t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTField"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTLabel esriCTEllipsis"\x3e${nls.parcelPolygonLayer.documentTypeLabel}\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTDropBoxContainerLeft"\x3e\x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"documentTypeFieldNode"\x3e\r\n         \t   \t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTField"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTLabel esriCTEllipsis"\x3e${nls.parcelPolygonLayer.miscloseRatioLabel}\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTDropBoxContainerRight"\x3e\x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"miscloseRatioFieldNode"\x3e\r\n         \t   \t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTField"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTLabel esriCTEllipsis"\x3e${nls.parcelPolygonLayer.statedAreaLabel}\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTDropBoxContainerLeft"\x3e\x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"statedAreaFieldNode"\x3e\r\n         \t   \t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTField"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTLabel esriCTEllipsis"\x3e${nls.parcelPolygonLayer.miscloseDistanceLabel}\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTDropBoxContainerRight"\x3e\x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"miscloseDistanceFieldNode"\x3e\r\n         \t   \t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/fieldset\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c!-- Parcel layer tab contents ends --\x3e\r\n\t\t\t\x3c!-- Advance settings tab content --\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"closureSettingsNode" class\x3d"esriCTFullHeight esriCTTabNode"\x3e\r\n\t\t\t\t\x3c!--1.Snapping layer chooser--\x3e\r\n\t\t\t\t\x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"esriCTSelectLayerLabel esriCTEllipsis" data-dojo-attach-point\x3d"addLayersLabelNode"\x3e\r\n\t\t\t\t\t\t${nls.closureSetting.snappingLayerLabel}\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"esriCTSelectedSnappingLayersDiv" data-dojo-attach-point\x3d"snappingLayerNode"\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"esriCTAddLayerButton jimu-btn jimu-float-trailing" data-dojo-attach-point\x3d"snappingLayerBtnNode"\x3e\r\n\t\t\t\t\t\t\t${nls.setBtnLabel}\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"esriCTHint esriCTLayerHint"\x3e\r\n\t\t\t\t\t\t${nls.closureSetting.snappingLayerHintText}\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c!--2. Closure settings field selectors--\x3e\r\n\t\t\t\t\x3cdiv class\x3d"esriCTClosureFieldsContainer"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"esriCTClosureField"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"esriCTLabel esriCTClosureLabel esriCTEllipsis"\x3e${nls.closureSetting.miscloseDistanceLabel}\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"esriCTClosureBoxContainer"\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTClosureTextBox" data-dojo-type\x3d"dijit/form/NumberTextBox" trim\x3d"true" required\x3d"true" data-dojo-attach-point\x3d"miscloseDistanceNode"\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTUnitsDropBox"\x3e\r\n\t\t\t\t\t\t\t\t\x3cselect class\x3d"esriCTClosureTextBox" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"miscloseDistanceUnitNode"\x3e\r\n         \t   \t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"esriCTHint esriCTClosureTabHint"\x3e\r\n\t\t\t\t\t\t\t${nls.closureSetting.miscloseDistanceHintText}\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"esriCTClosureField"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"esriCTLabel esriCTClosureLabel esriCTEllipsis"\x3e${nls.closureSetting.miscloseRatioLabel}\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"esriCTClosureBoxContainer"\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTClosureTextBox" data-dojo-type\x3d"dijit/form/NumberTextBox" trim\x3d"true" required\x3d"true" data-dojo-attach-point\x3d"miscloseRatioNode"\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"esriCTHint esriCTClosureTabHint"\x3e\r\n\t\t\t\t\t\t\t${nls.closureSetting.miscloseRatioHintText}\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"esriCTClosureFieldsContainer"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"esriCTClosureField"\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTLabel esriCTClosureLabel esriCTEllipsis"\x3e${nls.closureSetting.snappingToleranceLabel}\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTClosureBoxContainer"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit/form/NumberSpinner" class\x3d"esriCTClosureTextBox" value\x3d"15" data-dojo-attach-point\x3d"toleranceNode"\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTPixelsDiv"\x3e${nls.closureSetting.pixelLabel}\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"esriCTHint esriCTClosureTabHint"\x3e\r\n\t\t\t\t\t\t\t\t${nls.closureSetting.snappingToleranceHintText}\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c!-- Closure settings field selectors end --\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c!-- Advance settings tab content end --\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/ParcelDrafter/setting/css/style.css":".jimu-widget-ParcelDrafter-setting .esriCTMainContainer{width: 100%; height: 100%; color: #596679; font-size: 14px;}.jimu-widget-ParcelDrafter-setting .jimu-tab3{height: 100%; overflow: hidden;}.jimu-widget-ParcelDrafter-setting .jimu-viewstack{height: calc(100% - 45px); overflow: auto;}.jimu-widget-ParcelDrafter-setting .esriCTTabNode{padding: 20px;}.jimu-widget-ParcelDrafter-setting .esriCTLayerContainer {width: 100%; float: left;}.jimu-widget-ParcelDrafter-setting .esriCTSelectLayerLabel {width: 25%; word-break: break-all; line-height: 30px; float: left; min-width: 230px; margin-right: 10px;}.jimu-widget-ParcelDrafter-setting .row {clear: both;}.jimu-widget-ParcelDrafter-setting .esriCTHint {margin: 5px 5px 10px 0px; float: left; font-size: 12px; color: #a0acbf; font-style: oblique;} .jimu-widget-ParcelDrafter-setting .esriCTLayerHint{margin-left: 240px;}.jimu-widget-ParcelDrafter-setting .esriCTEllipsis{overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-ParcelDrafter-setting .esriCTHidden{display: none;}.jimu-widget-ParcelDrafter-setting .esriCTSelectedLayersDiv {max-height: 200px; min-height: 60px; overflow: auto; width: 58%; float: left; border: 1px solid #d2dae2; background: #e3ecf2; margin-right: 10px; line-height: 30px; padding-left: 10px;}.jimu-widget-ParcelDrafter-setting .esriCTActionsContent{padding: 15px;}.jimu-widget-ParcelDrafter-setting .esriCTFieldSet{height: auto; width: 100%; border: 1px solid #a0acbf! important; border-radius: 5px; font-size: 14px; color: #596679; margin-bottom: 10px; min-width: 0px;}.jimu-widget-ParcelDrafter-setting .esriCTFieldSetLegend{margin-left: 15px;}.jimu-widget-ParcelDrafter-setting .esriCTFieldsContainer{clear: both; width: 90%; margin: 0 auto; padding-top: 15px;}.jimu-widget-ParcelDrafter-setting .esriCTClosureFieldsContainer{clear: both; width: 100%; margin: 0 auto;}.jimu-widget-ParcelDrafter-setting .esriCTField{width: 50%; float:left; margin-bottom:10px;}.jimu-widget-ParcelDrafter-setting .esriCTClosureField{width: 100%; float:left; margin-bottom:10px;}.jimu-widget-ParcelDrafter-setting .esriCTLabel{float:left; padding: 10px 0; width: 48%;}.jimu-widget-ParcelDrafter-setting .esriCTClosureLabel{min-width: 240px; width: 25%;}.jimu-widget-ParcelDrafter-setting .esriCTPointSymbolLabel{min-width: 240px; width: 25%;}.jimu-widget-ParcelDrafter-setting .esriCTDropBox{width: 100%;}.jimu-widget-ParcelDrafter-setting .esriCTUnitsDropBox{margin-left: 10px; float: left;}.jimu-widget-ParcelDrafter-setting .esriCTClosureBoxContainer{width: 70%; float: left;}.jimu-widget-ParcelDrafter-setting .esriCTDropBoxContainerLeft{width: 45%; float: left;}.jimu-widget-ParcelDrafter-setting .esriCTDropBoxContainerRight{width: 45%; float: right;}.jimu-widget-ParcelDrafter-setting .esriCTFieldsetHint {margin: 5px 5px 10px 20px; float: left; font-size: 12px; color: #a0acbf; font-style: oblique;}.jimu-widget-ParcelDrafter-setting .esriCTadditionalFieldTable {height: 100%; width: 68%; float: left; margin-left: 15%;}.jimu-widget-ParcelDrafter-setting .esriCTLineTypeTableContanier {width: 100%; margin-bottom: 20px;}.jimu-widget-ParcelDrafter-setting .esriCTLineTypeTableContanier .dijitTextBox .dijitInputInner{height: 20px; line-height: 20px !important;}.jimu-widget-ParcelDrafter-setting .esriCTLayerListItem{line-height: 30px; width: 90%}.jimu-widget-ParcelDrafter-setting .esriCTGeometryTypeIcon{height: 16px; width: 16px; background-repeat: no-repeat; margin: 8px 2px 0px 0px; float: left;}.jimu-widget-ParcelDrafter-setting .esriCTPointGeometryIcon{background-image: url('../../images/point_layer.png');}.jimu-widget-ParcelDrafter-setting .esriCTPolygonGeometryIcon{background-image: url('../../images/polygon_layer.png');}.jimu-widget-ParcelDrafter-setting .esriCTPolylineGeometryIcon{background-image: url('../../images/line_layer.png');}.jimu-widget-ParcelDrafter-setting .esriCTLayerSelectorDiv{height: 140px; overflow-y: auto;}.jimu-widget-ParcelDrafter-setting .esriCTLayerChooserFieldLabel{width: 35%; float: left; line-height: 30px; padding-right: 10px;}.jimu-widget-ParcelDrafter-setting .esriCTLayerChooserField{width: 65%; float: right; margin-bottom: 10px;}.jimu-widget-ParcelDrafter-setting .esriCTLayerSelectorNode .jimu-basic-layer-chooser-from-map .jimu-tree{position: relative !important;}.jimu-widget-ParcelDrafter-setting .esriCTLayerSelectorNode{max-height: 200px; overflow: auto; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-ParcelDrafter-setting .esriCTSymbolChooserNode{text-align: center; cursor: pointer; min-width: 80px;}.jimu-widget-ParcelDrafter-setting .esriCTColorChooserNode{text-align: center; cursor: pointer; min-width: 80px;}.jimu-widget-ParcelDrafter-setting .esriCTColorChooserNode .jimu-color-picker{display:inline-block;}.jimu-widget-ParcelDrafter-setting .esriCTSymbolPreviewText{padding-right: 5px; color: #596679; font-size: 14px; max-width: 130px; text-overflow: ellipsis; overflow: hidden; white-space:nowrap;}.jimu-widget-ParcelDrafter-setting .esriCTPreviewField{float: left;}.jimu-widget-ParcelDrafter-setting .esriCTPreviewHintField{float: left; padding: 5px;}.jimu-widget-ParcelDrafter-setting .esriCTSymbolPreviewField{width: 35%; min-width: 250px; float: left; margin-left: 10px;}table{border-spacing: 0; padding: 0; margin: 0;}.jimu-widget-ParcelDrafter-setting .esriCTSymbolPreviewHintField{width: 50%; line-height: 20px; margin-left: 5px; float: right;}.jimu-widget-ParcelDrafter-setting .esriCTSymbolChooserContainer{height: calc(100% - 50px); overflow: auto;} .jimu-widget-ParcelDrafter-setting .esriCTTableCell {position: relative;} .jimu-widget-ParcelDrafter-setting .esriCTTableControl {position: absolute; top: 2px;} .jimu-widget-ParcelDrafter-setting .esriCTSelectedSnappingLayersDiv{height: 90px; overflow: auto; width: 60%; float: left; border: 1px solid #d2dae2; background: #e3ecf2; margin: 0 10px 0 0px; padding-left: 10px;}.jimu-widget-ParcelDrafter-setting .esriCTClosureTextBox{width: 150px; float: left;}.jimu-widget-ParcelDrafter-setting .esriCTPixelsDiv{line-height: 30px; font-style: italic; float: left; margin-left: 10px;} .jimu-widget-ParcelDrafter-setting .dijitValidationTextBoxLabel{max-width: 445px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; float: left;} .jimu-widget-ParcelDrafter-setting .jimu-layer-chooser-from-map-withdropbox .layer-name{text-overflow: ellipsis; overflow: hidden; white-space: nowrap; padding: 0px 18px 0px 9px;} .claro .dijitTextBox, .claro .dijitSelect{color: #7989a0; background-color: #fafafc; border: 1px solid #d2dae2;}.dj_webkit .claro .dijitTextBox .dijitInputInner{color: #7989a0;}.claro .dijitSelectDisabled, .claro .dijitTextBoxDisabled, .claro .dijitTextBoxDisabled .dijitInputContainer{background-color: #e3ecf2;}.claro .dijitSelect .dijitArrowButton{background-color: #fafafc; background-image: none; border-color: #fafafc;}.jimu-widget-ParcelDrafter-setting .dijitSelect .dijitButtonContents{border-style: none none none none; background-color: transparent;}input[type\x3dtext]::-ms-clear{display: none;}.esriRtl .jimu-widget-ParcelDrafter-setting .esriCTSelectLayerLabel{float: right; margin-left: 10px;}.esriRtl .jimu-widget-ParcelDrafter-setting .esriCTSelectedLayersDiv{float: right;}.esriRtl .jimu-widget-ParcelDrafter-setting .esriCTGeometryTypeIcon{float: right; margin: 8px 5px 0px 10px;}.esriRtl .jimu-widget-ParcelDrafter-setting .esriCTLabel{float: right;}.esriRtl .jimu-widget-ParcelDrafter-setting .esriCTPreviewField{float: right;}.esriRtl .jimu-widget-ParcelDrafter-setting .esriCTPreviewHintField{float: right;}.esriRtl .jimu-widget-ParcelDrafter-setting .esriCTSymbolPreviewHintField{float: right;}.esriRtl .jimu-widget-ParcelDrafter-setting .esriCTFieldSetLegend{margin-right: 15px;}.esriRtl .jimu-widget-ParcelDrafter-setting .esriCTField{float: right;}.esriRtl .jimu-widget-ParcelDrafter-setting .esriCTLabel{float: right;}.esriRtl .jimu-widget-ParcelDrafter-setting .esriCTDropBoxContainerLeft{float: right;}.esriRtl .jimu-widget-ParcelDrafter-setting .esriCTSelectedSnappingLayersDiv{float: right; padding-right: 10px;}.esriRtl .jimu-widget-ParcelDrafter-setting .esriCTClosureTextBox{float: right;}.esriRtl .jimu-widget-ParcelDrafter-setting .esriCTUnitsDropBox{margin-right: 10px; float: right;}.esriRtl .jimu-widget-ParcelDrafter-setting .esriCTPixelsDiv{float: right; margin-right: 10px;}.esriRtl .jimu-widget-ParcelDrafter-setting .esriCTClosureBoxContainer{float: right; margin-right: 10px;}.esriRtl .jimu-widget-ParcelDrafter-setting .esriCTSelectLayerLabel{float: right; margin-right: 0px;}.esriRtl .jimu-widget-ParcelDrafter-setting .esriCTHint{float: right; margin: 5px 0px 10px 0px}.esriRtl .jimu-widget-ParcelDrafter-setting .esriCTLayerHint{margin-right: 250px;}.esriRtl .jimu-widget-ParcelDrafter-setting .esriCTClosureTabHint {float: right; margin: 5px 10px 10px 0;}.esriRtl .jimu-widget-ParcelDrafter-setting .esriCTLayerChooserFieldLabel{float: right; padding-left: 10px; padding-right: 0;}.esriRtl .jimu-widget-ParcelDrafter-setting .esriCTDropBoxContainerRight{float: left;}",
"*now":function(e){e(['dojo/i18n!*preload*widgets/ParcelDrafter/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dijit/_WidgetsInTemplateMixin jimu/dijit/TabContainer3 dojo/on dojo/_base/lang dojo/_base/array jimu/dijit/SimpleTable jimu/utils esri/symbols/jsonUtils jimu/symbolUtils dojo/dom-construct dojo/dom-class ./SymbolChooserPopup ./LayerChooser jimu/BaseWidgetSetting ../layerUtils ../utils dojo/query jimu/dijit/Message dijit/form/Select dijit/form/ValidationTextBox dijit/form/NumberTextBox dijit/form/NumberSpinner".split(" "),function(e,a,b,c,d,f,k,n,t,m,l,h,r,p,x,q,v,B,u,z,
C,D){return e([x,a],{baseClass:"jimu-widget-ParcelDrafter-setting",_tab:null,_symbolParams:{},_layerUtils:null,_stringFieldType:"esriFieldTypeString",_oidFieldType:"esriFieldTypeOID",_guidFieldType:"esriFieldTypeGUID",_globalIdFieldType:"esriFieldTypeGlobalID",_numberFieldTypes:[],polylineDetails:null,polygonDetails:null,snappingLayerDetails:null,distanceAndLengthUnits:{},postMixInProperties:function(){this.nls.common={};d.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this._symbolParams=
{};this._numberFieldTypes=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];this.distanceAndLengthUnits=d.clone(v.planSettingsOptions.distanceAndLengthUnits);this._layerUtils=new q({map:this.map,getPopupInfo:!1,getRenderer:!1});this._initTabs();this.own(c(this.selectLineLayerBtnNode,"click",d.hitch(this,function(){this._showLayerChooser("parcelLayers",["polygon"],!1)})));this._createTableForLineTypes();this._createSymbolPicker(this.startOrRotationSymbolNode,
"startOrRotaionSymbol","esriGeometryPoint",this.nls.parcelLineLayer.startOrRotationSymbolLabel);this._createSymbolPicker(this.pointSymbolNode,"pointSymbol","esriGeometryPoint",this.nls.parcelLineLayer.parcelPointSymbolLabel);this.own(c(this.snappingLayerBtnNode,"click",d.hitch(this,function(){this._showLayerChooser("snapping",[""],!0)})));this.own(this.lineTypeFieldNode.on("change",d.hitch(this,this._updateLineTypeOptions)));this._loadMiscloseUnits();this.setConfig(this.config);this.miscloseRatioNode.constraints=
{min:0};this.miscloseDistanceNode.constraints={min:0};this.toleranceNode.constraints={min:1,max:50,places:0,pattern:"#"};this.toleranceNode.smallDelta=1},_initTabs:function(){this._tab=new b({tabs:[{title:this.nls.parcelLineLayer.layerSettingTabLabel,content:this.parcelLineLayerNode},{title:this.nls.parcelLineLayer.advancedSettingTabLabel,content:this.closureSettingsNode}]},this.tabDiv);this._tab.startup()},_loadMiscloseUnits:function(){var a=[],b;f.forEach(this.distanceAndLengthUnits,d.hitch(this,
function(c){b={value:c,label:window.jimuNls.units[c]};a.push(b)}));this.miscloseDistanceUnitNode.addOption(a)},setConfig:function(){this.config&&((this.config.snappingTolerance||0===this.config.snappingTolerance)&&this.toleranceNode.set("value",this.config.snappingTolerance),(this.config.miscloseRatioSnap||0===this.config.miscloseRatioSnap)&&this.miscloseRatioNode.set("value",this.config.miscloseRatioSnap),(this.config.miscloseSnapDistance||0===this.config.miscloseSnapDistance)&&this.miscloseDistanceNode.set("value",
this.config.miscloseSnapDistance),this.config.miscloseSnapDistanceUnit&&this.miscloseDistanceUnitNode&&this.miscloseDistanceUnitNode.set("value",this.config.miscloseSnapDistanceUnit),this.config.polylineLayer&&this._setPolylineDetails(this.config.polylineLayer),this.config.polygonLayer&&this._setPolygonDetails(this.config.polygonLayer),this.config.polylineLayer&&this.config.polygonLayer&&this._setLayersInUI(this.layersNode,[this.config.polygonLayer,this.config.polylineLayer]),this.config.snappingLayers&&
0<this.config.snappingLayers.length&&this._setSnappingLayerDetails(this.config.snappingLayers,!0))},getSelectedOption:function(a){return a&&a.options&&0<a.options.length&&(a=a.options,(a=f.filter(a,function(a){return!0===a.selected}))&&0<a.length)?a[0]:null},getSelectedField:function(a){return(a=this.getSelectedOption(a))?a.field:null},_errorMessage:function(a){(new u({message:a,buttons:[{label:this.nls.common.ok}]})).message=a},_validateForDistinctFields:function(a){var b=[],c,d,g;c=!0;for(g in a)if(d=
a[g],"object"===typeof d&&d.hasOwnProperty("name"))if(-1<b.indexOf(d.name)){c=!1;break}else b.push(d.name);return c},validateConfig:function(a){return a.polylineLayer?a.polylineLayer.bearing?a.polylineLayer.chordLength?a.polylineLayer.distance?a.polylineLayer.sequenceId?a.polylineLayer.radius?a.polylineLayer.relatedGUID?a.polylineLayer.arcLength?a.polylineLayer.lineType?this._validateForDistinctFields(a.polylineLayer)?a.lineTypes[0].hasOwnProperty("type")&&null!==a.lineTypes[0].type&&void 0!==a.lineTypes[0].type&&
""!==a.lineTypes[0].type&&this.connectionBox.isValid(!1)?a.lineTypes[1].hasOwnProperty("type")&&null!==a.lineTypes[1].type&&void 0!==a.lineTypes[1].type&&""!==a.lineTypes[1].type&&this.boundaryBox.isValid(!1)?a.lineTypes[0].type===a.lineTypes[1].type?(this._errorMessage(this.nls.errorMsg.selectDistinctLineTypes),!1):a.polygonLayer?a.polygonLayer.relatedGUID?a.polygonLayer.parcelName&&a.polygonLayer.rotation?a.polygonLayer.planName?a.polygonLayer.scale?a.polygonLayer.documentType?a.polygonLayer.miscloseRatio?
a.polygonLayer.statedArea?this._validateForDistinctFields(a.polygonLayer)?a.polygonLayer.miscloseDistance?this.miscloseDistanceNode.isValid()?this.toleranceNode.isValid()?this.miscloseRatioNode.isValid()?!0:(this._errorMessage(this.nls.errorMsg.invalidMiscloseRatio),!1):(this._errorMessage(this.nls.errorMsg.invalidSnappingTolerance),!1):(this._errorMessage(this.nls.errorMsg.invalidMiscloseDistance),!1):(this._errorMessage(this.nls.errorMsg.miscloseDistanceFieldErrMsg),!1):(this._errorMessage(this.nls.errorMsg.selectDistinctPolygonFields),
!1):(this._errorMessage(this.nls.errorMsg.statedAreaFieldErrMsg),!1):(this._errorMessage(this.nls.errorMsg.miscloseRatioFieldErrMsg),!1):(this._errorMessage(this.nls.errorMsg.documentTypeFieldErrMsg),!1):(this._errorMessage(this.nls.errorMsg.scaleFieldErrMsg),!1):(this._errorMessage(this.nls.errorMsg.planNameFieldErrMsg),!1):(this._errorMessage(this.nls.errorMsg.parcelNameFieldErrMsg),!1):(this._errorMessage(this.nls.errorMsg.globalIdFieldErrMsg),!1):(this._errorMessage(this.nls.errorMsg.invalidPolygonLayer),
!1):(this._errorMessage(this.nls.errorMsg.invalidBoundaryLineType),!1):(this._errorMessage(this.nls.errorMsg.invalidConnectionLineType),!1):(this._errorMessage(this.nls.errorMsg.selectDistinctPolylineFields),!1):(this._errorMessage(this.nls.errorMsg.lineTypeFieldErrMsg),!1):(this._errorMessage(this.nls.errorMsg.arcLengthFieldErrMsg),!1):(this._errorMessage(this.nls.errorMsg.foreignKeyFieldErrMsg),!1):(this._errorMessage(this.nls.errorMsg.radiusFieldErrMsg),!1):(this._errorMessage(this.nls.errorMsg.sequenceIdFieldErrMsg),
!1):(this._errorMessage(this.nls.errorMsg.distanceFieldErrMsg),!1):(this._errorMessage(this.nls.errorMsg.chordLengthErrMsg),!1):(this._errorMessage(this.nls.errorMsg.bearingFieldErrMsg),!1):(this._errorMessage(this.nls.errorMsg.invalidPolylineLayer),!1)},getConfig:function(){var a,b;a={};this.polylineDetails&&(a.polylineLayer={},d.mixin(a.polylineLayer,this.polylineDetails),a.polylineLayer.bearing=this.getSelectedField(this.bearingFieldNode),a.polylineLayer.chordLength=this.getSelectedField(this.chordLengthFieldNode),
a.polylineLayer.distance=this.getSelectedField(this.distanceFieldNode),a.polylineLayer.sequenceId=this.getSelectedField(this.sequenceIdFieldNode),a.polylineLayer.radius=this.getSelectedField(this.radiusFieldNode),a.polylineLayer.relatedGUID=this.getSelectedField(this.foreignKeyFieldNode),a.polylineLayer.arcLength=this.getSelectedField(this.arcLengthFieldNode),a.polylineLayer.lineType=this.getSelectedField(this.lineTypeFieldNode),a.lineTypes=[{},{}],this._symbolParams.connectionLine&&(a.lineTypes[0].symbol=
this._symbolParams.connectionLine),this._symbolParams.boundaryLine&&(a.lineTypes[1].symbol=this._symbolParams.boundaryLine),this.connectionBox&&(this.connectionBox.options?(b=this.getSelectedOption(this.connectionBox),a.lineTypes[0].label=b.label,a.lineTypes[0].type=b.value):(a.lineTypes[0].label=this.nls.lineTypesTable.connectionLineLabel,a.lineTypes[0].type=this.connectionBox.get("value"))),this.boundaryBox&&(this.boundaryBox.options?(b=this.getSelectedOption(this.boundaryBox),a.lineTypes[1].label=
b.label,a.lineTypes[1].type=b.value):(a.lineTypes[1].label=this.nls.lineTypesTable.boundaryLineLabel,a.lineTypes[1].type=this.boundaryBox.get("value")),a.BoundaryLineType=a.lineTypes[1].type));this.polygonDetails&&(a.polygonLayer={},d.mixin(a.polygonLayer,this.polygonDetails),this.map._layers[this.polygonDetails.id]&&(b=this.map._layers[this.polygonDetails.id].fields,(b=f.filter(b,d.hitch(this,function(a){return a.type===this._globalIdFieldType})))&&0<b.length&&(a.polygonLayer.relatedGUID=b[0])),
a.polygonLayer.parcelName=this.getSelectedField(this.parcelNameFieldNode),a.polygonLayer.rotation=this.getSelectedField(this.rotationFieldNode),a.polygonLayer.planName=this.getSelectedField(this.planNameFieldNode),a.polygonLayer.scale=this.getSelectedField(this.scaleFieldNode),a.polygonLayer.documentType=this.getSelectedField(this.documentTypeFieldNode),a.polygonLayer.miscloseRatio=this.getSelectedField(this.miscloseRatioFieldNode),a.polygonLayer.statedArea=this.getSelectedField(this.statedAreaFieldNode),
a.polygonLayer.miscloseDistance=this.getSelectedField(this.miscloseDistanceFieldNode));this.snappingLayerDetails&&(a.snappingLayers=[],d.mixin(a.snappingLayers,this.snappingLayerDetails));this.toleranceNode&&(a.snappingTolerance=this.toleranceNode.get("value"));this.miscloseRatioNode&&(a.miscloseRatioSnap=this.miscloseRatioNode.get("value"));this.miscloseDistanceNode&&(a.miscloseSnapDistance=this.miscloseDistanceNode.get("value"));this.miscloseDistanceUnitNode&&(a.miscloseSnapDistanceUnit=this.miscloseDistanceUnitNode.get("value"));
this._symbolParams.startOrRotaionSymbol&&(a.startOrRotaionSymbol=this._symbolParams.startOrRotaionSymbol);this._symbolParams.pointSymbol&&(a.pointSymbol=this._symbolParams.pointSymbol);return this.validateConfig(a)?a:!1},_showLayerChooser:function(a,b,c){var e,g;switch(a){case "parcelLayers":e=this.nls.selectLayerLabel;g=!0;break;case "snapping":e=this.nls.closureSetting.snappingLayerLabel,g=!1}(new p({title:e,portalUrl:this.appConfig.portalUrl,nls:this.nls,folderUrl:this.folderUrl,map:this.map,multiple:c,
types:b,chooseRelatedLayers:g,relatedLayerTypes:["polyline"],showLayerTypes:["FeatureLayer"]})).onOKButtonClicked=d.hitch(this,function(b){b&&0<b.length&&this._setLayersInfo(a,b)})},_setLayersInfo:function(a,b){for(var c=0;c<b.length;c++)d.mixin(b[c],this._layerUtils.getLayerDetailsFromMap(b[c].baseURL,b[c].layerId,b[c].id));this.config.polygonLayer={};this.config.polylineLayer={};this.config.lineTypes[0].type=null;this.config.lineTypes[1].type=null;switch(a){case "parcelLayers":this._setLayersInUI(this.layersNode,
b);this._setPolygonDetails(b[0]);this._setPolylineDetails(b[1]);this._setSnappingLayerDetails(b,!1);break;case "snapping":this._setSnappingLayerDetails(b,!0)}},_setPolylineDetails:function(a){this.polylineDetails=a;this._setPolylineFields();this._updateLineTypeOptions()},_setPolygonDetails:function(a){this.polygonDetails=a;this._setPolygonFields()},_setSnappingLayerDetails:function(a,b){this.snappingLayerDetails&&!b?f.forEach(a,d.hitch(this,function(a){var b;(b=f.filter(this.snappingLayerDetails,
d.hitch(function(b){return b.id===a.id})))&&0!==b.length||this.snappingLayerDetails.push(a)})):this.snappingLayerDetails=a;this._setLayersInUI(this.snappingLayerNode,this.snappingLayerDetails)},_setLayersInUI:function(a,b){var c,d,e;l.empty(a);for(c=0;c<b.length;c++)"esriGeometryPoint"===b[c].geometryType?e="esriCTPointGeometryIcon":"esriGeometryPolygon"===b[c].geometryType?e="esriCTPolygonGeometryIcon":"esriGeometryPolyline"===b[c].geometryType&&(e="esriCTPolylineGeometryIcon"),d=l.create("div",
{"class":"esriCTLayerList"},a),e&&l.create("div",{"class":"esriCTGeometryTypeIcon "+e,title:b[c].title},d),l.create("div",{"class":"esriCTLayerListItem esriCTEllipsis",innerHTML:b[c].title,title:b[c].title},d)},_getSelectionInfo:function(a,b,c){var d;d={};this.config.hasOwnProperty(b)&&this.config[b].hasOwnProperty(a)&&this.config[b][a]&&this.config[b][a].hasOwnProperty("name")?(d.fieldName=this.config[b][a].name.toLowerCase(),d.exactMatch=!0):(d.fieldName=a.toLowerCase(),d.exactMatch=!1);d.isRequired=
c;return d},_autoPopulateRelatedGUID:function(){var a,b,c,e;this.foreignKeyFieldNode.options.length=0;this.foreignKeyFieldNode.addOption([{value:" ",label:"",field:null}]);c=this.polylineDetails.relationShipId;a=this.map._layers[this.polylineDetails.id];(b=f.filter(a.relationships,d.hitch(this,function(a){return a.id===c})))&&1===b.length&&(e=b[0].keyField,(a=f.filter(a.fields,d.hitch(this,function(a){return a.name===e})))&&0<a.length&&this._loadOptionsForDropDown(this._getSelectionInfo("relatedGUID",
"polylineLayer",!0),this.foreignKeyFieldNode,a,this._guidFieldType));this.foreignKeyFieldNode.set("disabled",!0)},_autoPopulateSequenceID:function(){var a;this.sequenceIdFieldNode.options.length=0;this.sequenceIdFieldNode.addOption([{value:" ",label:"",field:null}]);(a=f.filter(this.map._layers[this.polylineDetails.id].fields,d.hitch(this,function(a){return"sequenceid"===a.name.toLowerCase()&&-1<this._numberFieldTypes.indexOf(a.type)})))&&0<a.length&&this._loadOptionsForDropDown(this._getSelectionInfo("sequenceId",
"polylineLayer",!0),this.sequenceIdFieldNode,a,this._numberFieldTypes);this.sequenceIdFieldNode.set("disabled",!0)},_setPolylineFields:function(){var a;this.map._layers[this.polylineDetails.id]&&(a=this.map._layers[this.polylineDetails.id].fields,this._loadOptionsForDropDown(this._getSelectionInfo("bearing","polylineLayer",!0),this.bearingFieldNode,a,this._numberFieldTypes),this._loadOptionsForDropDown(this._getSelectionInfo("chordLength","polylineLayer",!0),this.chordLengthFieldNode,a,this._numberFieldTypes),
this._loadOptionsForDropDown(this._getSelectionInfo("distance","polylineLayer",!0),this.distanceFieldNode,a,this._numberFieldTypes),this._autoPopulateSequenceID(),this._loadOptionsForDropDown(this._getSelectionInfo("radius","polylineLayer",!0),this.radiusFieldNode,a,this._numberFieldTypes),this._autoPopulateRelatedGUID(),this._loadOptionsForDropDown(this._getSelectionInfo("arcLength","polylineLayer",!0),this.arcLengthFieldNode,a,this._numberFieldTypes),this._loadOptionsForDropDown(this._getSelectionInfo("lineType",
"polylineLayer",!0),this.lineTypeFieldNode,a,this._numberFieldTypes.concat(this._stringFieldType)))},_setPolygonFields:function(){var a;this.map._layers[this.polygonDetails.id]&&(a=this.map._layers[this.polygonDetails.id].fields,this._loadOptionsForDropDown(this._getSelectionInfo("parcelName","polygonLayer",!1),this.parcelNameFieldNode,a,this._stringFieldType),this._loadOptionsForDropDown(this._getSelectionInfo("rotation","polygonLayer",!0),this.rotationFieldNode,a,this._numberFieldTypes),this._loadOptionsForDropDown(this._getSelectionInfo("planName",
"polygonLayer",!1),this.planNameFieldNode,a,this._stringFieldType),this._loadOptionsForDropDown(this._getSelectionInfo("scale","polygonLayer",!0),this.scaleFieldNode,a,this._numberFieldTypes),this._loadOptionsForDropDown(this._getSelectionInfo("documentType","polygonLayer",!1),this.documentTypeFieldNode,a,this._numberFieldTypes.concat(this._stringFieldType)),this._loadOptionsForDropDown(this._getSelectionInfo("miscloseRatio","polygonLayer",!0),this.miscloseRatioFieldNode,a,this._numberFieldTypes),
this._loadOptionsForDropDown(this._getSelectionInfo("statedArea","polygonLayer",!1),this.statedAreaFieldNode,a,this._numberFieldTypes.concat(this._stringFieldType)),this._loadOptionsForDropDown(this._getSelectionInfo("miscloseDistance","polygonLayer",!0),this.miscloseDistanceFieldNode,a,this._numberFieldTypes))},_loadOptionsForDropDown:function(a,b,c,e){var g=[];a.isRequired||g.push({value:" ",label:this.nls.selectLabel,field:{}});f.forEach(c,d.hitch(this,function(b){var c;c=!0;e&&0>e.indexOf(b.type)&&
(c=!1);c&&(c={value:b.name,label:b.alias,field:b},a.exactMatch?b.name.toLowerCase()===a.fieldName&&(c.selected="selected"):-1<b.name.toLowerCase().indexOf(a.fieldName)&&(c.selected="selected"),g.push(c))}));b.options.length=0;0===g.length&&g.push({value:" ",label:"",field:null});b.addOption(g)},_createTableForLineTypes:function(){var a;a=new k({fields:[{name:"lineType",title:this.nls.lineTypesTable.lineTypeLabel,type:"text",editable:"false",width:"150px"},{name:"value",title:this.nls.lineTypesTable.valueLabel,
type:"text",editable:"false",width:"100px"},{name:"symbol",title:this.nls.common.symbol,type:"text",editable:"false",width:"100px"}],selectable:!1});a.placeAt(this.lineTypeNode);a.startup();this._createLineTypeRow(a,"connectionLine");this._createLineTypeRow(a,"boundaryLine")},_createLineTypeRow:function(a,b){a=a.addRow({});a.success&&a.tr&&(a=a.tr,a=B(".simple-table-cell",a),a[0].innerHTML=this.nls.lineTypesTable[b+"Label"],h.add(a[1],"esriCTTableCell"),"connectionLine"===b?this._connectionLineTypeNode=
l.create("div",{},a[1]):"boundaryLine"===b&&(this._boundaryLineTypeNode=l.create("div",{},a[1])),h.add(a[2],"esriCTTableCell"),a=l.create("div",{"class":"esriCTTableControl esriCTPreviewField"},a[2]),this._createSymbolPicker(a,b,"esriGeometryPolyline",this.nls.lineTypesTable[b+"Label"]))},_updateLineTypeOptions:function(){var a=[],b=[],c;c=this.getSelectedField(this.lineTypeFieldNode);l.empty(this._connectionLineTypeNode);l.empty(this._boundaryLineTypeNode);c&&c.domain&&c.domain.codedValues?(this.connectionBox=
new z({"class":"esriCTTableControl",required:!0,style:{width:"180px",height:"25px"}},l.create("div",{},this._connectionLineTypeNode)),this.boundaryBox=new z({"class":"esriCTTableControl",required:!0,style:{width:"180px",height:"25px"}},l.create("div",{},this._boundaryLineTypeNode)),f.forEach(c.domain.codedValues,d.hitch(this,function(c){var d,e;d={value:c.code,label:c.name};e={value:c.code,label:c.name};this.config.lineTypes&&0<this.config.lineTypes.length&&null!==this.config.lineTypes[0].type&&null!==
this.config.lineTypes[1].type?(this.config.lineTypes[0].type===c.code&&(d.selected=!0),this.config.lineTypes[1].type===c.code&&(e.selected=!0)):(-1<c.name.toLowerCase().indexOf("connection")&&(d.selected=!0),-1<c.name.toLowerCase().indexOf("boundary")&&(e.selected=!0));a.push(d);b.push(e)})),this.connectionBox.addOption(a),this.boundaryBox.addOption(b)):c&&(c=0>this._numberFieldTypes.indexOf(c.type)?C:D,this.connectionBox=new c({"class":"esriCTTableControl",trim:!0,required:!0,style:{width:"180px",
height:"25px"}},l.create("div",{},this._connectionLineTypeNode)),this.boundaryBox=new c({"class":"esriCTTableControl",trim:!0,required:!0,style:{width:"180px",height:"25px"}},l.create("div",{},this._boundaryLineTypeNode)),this.config.lineTypes&&0<this.config.lineTypes.length&&(this.connectionBox.set("value",this.config.lineTypes[0].type),this.boundaryBox.set("value",this.config.lineTypes[1].type)))},_createSymbolPicker:function(a,b,e,f){var g={},h,k;e&&(g.type=n.getSymbolTypeByGeometryType(e),"startOrRotaionSymbol"!==
b||this.config[b]||(e={color:[136,136,136,255],size:11.25,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{color:[29,29,53,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}},this.config[b]=e),this.config&&this.config[b]?(g.symbol=t.fromJson(this.config[b]),h=this._createPreviewContainer(a,!0)):"connectionLine"===b?(g.symbol=t.fromJson(this.config.lineTypes[0].symbol),h=this._createPreviewContainer(a,!1)):"boundaryLine"===b&&(g.symbol=t.fromJson(this.config.lineTypes[1].symbol),
h=this._createPreviewContainer(a,!1)),k={symbolChooserTitle:f,symbolParams:g,symbolType:b,nls:this.nls},this._showSelectedSymbol(h,g.symbol,b),this.own(c(h,"click",d.hitch(this,function(){g.symbol=t.fromJson(this._symbolParams[b]);this._initSymbolChooserPopup(k,h)}))));return h},_createPreviewContainer:function(a,b){b&&(a=l.create("table",{cellspacing:"0",cellpadding:"0"},a),a=l.create("tr",{style:"height:30px"},a),b=l.create("td",{},a),l.create("div",{innerHTML:this.nls.parcelLineLayer.symbolPickerPreviewText,
"class":"esriCTSymbolPreviewText"},b),a=l.create("td",{},a));return a=l.create("div",{"class":"esriCTSymbolChooserNode"},a)},_initSymbolChooserPopup:function(a,b){var c=new r(a);c.onOkClick=d.hitch(this,function(){var d=c.symbolChooser.getSymbol();this._showSelectedSymbol(b,d,a.symbolType);c.popup.close()})},_showSelectedSymbol:function(a,b,c){l.empty(a);if(b){var d=m.createSymbolNode(b);d||(d=l.create("div"));l.place(d,a);this._symbolParams[c]=b.toJson()}}})});