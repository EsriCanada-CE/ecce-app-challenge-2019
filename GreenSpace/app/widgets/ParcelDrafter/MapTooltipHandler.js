// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define("dojo/_base/declare dijit/_WidgetBase dojo/_base/lang dojo/Evented dojo/dom-style dojo/dom-construct dojo/on".split(" "),function(e,f,b,g,c,h,k){return e([f,g],{baseClass:"jimu-widget-ParcelDrafter-MapTooltipHandler",map:null,handleClickFor:null,_mapTooltip:null,_mapMoveHandler:null,_mapClickHandler:null,_mouseDragHandler:null,constructor:function(a){b.mixin(this,a)},startup:function(){this.handleClickFor||(this.handleClickFor=this.map);this._createTooltip()},connectEventHandler:function(a){a&&
this.updateTooltip(a);this._disableWebMapPopup();this._mapClickHandler=this.own(k(this.handleClickFor,"click",b.hitch(this,function(a){this._clicked(a)})))[0];"ontouchstart"in document.documentElement?c.set(this._mapTooltip,"display","none"):(this._mapMoveHandler=this.own(this.map.on("mouse-move",b.hitch(this,this._onMapMouseMove)))[0],this.own(this.map.on("mouse-out",b.hitch(this,function(){c.set(this._mapTooltip,"display","none")}))))},disconnectEventHandler:function(){this._enableWebMapPopup();
this._mapClickHandler&&this._mapClickHandler.remove();this._mapMoveHandler&&(this._mapMoveHandler.remove(),this._mapTooltip.style.display="none");this.disconnectMouseDragHandler()},connectMouseDragHandler:function(a){a&&this.updateTooltip(a);this._disableWebMapPopup();this._mapClickHandler&&this._mapClickHandler.remove();this.map.disableMapNavigation();this._mouseDragHandler=this.own(this.map.on("mouse-drag",b.hitch(this,function(a){this._onDragging(a)})))[0]},disconnectMouseDragHandler:function(){this._mouseDragHandler&&
(this._mouseDragHandler.remove(),this._mapTooltip.style.display="none");this.map.enableMapNavigation()},_createTooltip:function(){this._mapTooltip=h.create("div",{"class":"esriCTMapTooltip",innerHTML:this.toolTipText},this.map.container);c.set(this._mapTooltip,"position","fixed");c.set(this._mapTooltip,"display","none")},_enableWebMapPopup:function(){this.map&&(this.map.infoWindow.hide(),this.map.setInfoWindowOnClick(!0))},_disableWebMapPopup:function(){this.map&&(this.map.infoWindow.hide(),this.map.setInfoWindowOnClick(!1))},
_onMapMouseMove:function(a){var b,d;a.clientX||a.pageY?(b=a.clientX,d=a.clientY):(b=a.clientX+document.body.scrollLeft-document.body.clientLeft,d=a.clientY+document.body.scrollTop-document.body.clientTop);c.set(this._mapTooltip,"display","none");c.set(this._mapTooltip,{left:b+15+"px",top:d+"px"});c.set(this._mapTooltip,"display","");this._onMoving(a)},_clicked:function(a){this.emit("clicked",a)},_onDragging:function(a){this.emit("dragging",a)},_onMoving:function(a){this.emit("moving",a)},updateTooltip:function(a){this.toolTipText=
a;this._mapTooltip.innerHTML=this.toolTipText}})});